{"version":3,"sources":["../external \"React\"","core/element/element.module.less","components/footer/index.module.less","components/design-panel/index.module.less","components/github/widget.module.less","components/header/index.module.less","components/center/index.module.less","components/layout/layout.module.less","components/left-panel/index.module.less","core/element-box/index.module.less","components/design-panel/contextmenu/index.module.less","../external \"ReactDOM\"","components/right-panel/index.module.less","components/json-view/index.tsx","components/center/History.tsx","core/utils/eventBus.ts","core/utils/layout.ts","core/utils/index.ts","core/element/NullElement.tsx","core/ElementFactory.ts","configs.ts","core/element-box/BoxContent.tsx","core/element-box/DraggableWrapper.tsx","core/element-box/ElementBox.tsx","core/element-box/LeafBox.tsx","components/animation/index.tsx","core/element/RenderCache.ts","core/element/ElementControl.tsx","core/element/ElementContext.tsx","core/element/ElementCategory.ts","components/form-render/AntRender.tsx","components/center/Preview.tsx","components/center/menus.tsx","components/design-panel/contextmenu/index.tsx","components/design-panel/index.tsx","components/center/index.tsx","core/element/Element.tsx","core/decorator.tsx","controls/antd/PlainText.tsx","controls/antd/Link.tsx","controls/antd/Form.tsx","controls/antd/Input.tsx","controls/antd/TextArea.tsx","controls/antd/Select.tsx","controls/antd/TreeSelect.tsx","controls/antd/Row.tsx","controls/antd/Col.tsx","controls/antd/Button.tsx","controls/antd/Icon.tsx","controls/antd/Radio.tsx","controls/antd/Checkbox.tsx","controls/antd/Switch.tsx","controls/antd/Cascader.tsx","controls/antd/DatePicker.tsx","controls/antd/TimePicker.tsx","controls/antd/Rate.tsx","controls/antd/Slider.tsx","controls/antd/Transfer.tsx","controls/antd/Menu.tsx","controls/antd/Pagination.tsx","controls/antd/PageHeader.tsx","controls/antd/index.ts","controls/antd/Steps.tsx","core/ElementOption.ts","components/left-panel/ControlItem.tsx","components/left-panel/ControlList.tsx","components/left-panel/index.tsx","components/right-panel/basic-panel/PropElement.tsx","components/right-panel/basic-panel/index.tsx","components/right-panel/style-panel/styleList.ts","components/right-panel/style-panel/index.jsx","components/right-panel/data-panel/index.jsx","components/right-panel/data-panel/dataList.ts","components/right-panel/index.tsx","components/header/index.tsx","components/footer/CurrentControl.tsx","components/footer/index.tsx","store/Records.ts","core/element/PageElement.tsx","store/index.ts","components/layout/index.tsx","components/github/widget.tsx","pages/app/App.tsx","serviceWorker.ts","index.tsx","components/json-view/index.module.less"],"names":["module","exports","React","ReactDOM","JsonView","formated","json","JSON","stringify","undefined","replace","match","cls","styles","number","test","key","string","boolean","null","syntaxHighlight","this","props","dangerouslySetInnerHTML","__html","Component","History","inject","observer","undo","rootStore","canUndo","redo","canRedo","historyCls","classnames","history","history__can_undo","history__can_redo","undoCls","history__icon","history__icon__undo","redoCls","history__icon__redo","className","type","title","onClick","emitter","EventEmitter","EventTypes","LEAF_LAYOUT","Symbol","for","CONTEXT_MENU","eventBus","setMaxListeners","reduce","ret","item","triggerLayoutChange","delay","setTimeout","emit","showContextView","point","element","parseValue","value","val","Number","isNaN","RegExp","e","Date","genKey","Math","random","toFixed","split","inRect","rect","x","y","rx","ry","width","height","hRect","addon","wRect","getDropPlace","memorize","from","to","clientOffset","console","warn","parent","isAncestor","canDropTo","canBeDroped","nearestDropable","list","children","getClientRect","length","container","position","index","nearest","nearestIndex","nearestRect","distance","POSITIVE_INFINITY","clientX","clientY","len","i","temp","center","tempDistance","pow","dom","getRenderedDom","parentElement","realStyle","window","getComputedStyle","display","float","cssFloat","calculateDropPlace","serializer","arg","cood","NullElement","dirty","name","propsData","Map","renderOption","Error","options","constructor","icon","displayName","_elements","elemType","Array","isArray","forEach","registerElement","set","option","Ctor","get","map","child","createElement","DragTypes","BoxContent","ref","handleContextMenu","preventDefault","createRef","current","getBoundingClientRect","style","isDragging","isOver","isActive","connectDragSource","connectDropTarget","inline","isInline","mergedCls","active","dragging","over","box","box_inline","onContextMenu","handleHover","throttle","monitor","component","store","shallow","dragItem","getItem","dropHolder","getClientOffset","setPlaceHolder","clearHover","dropSpec","canDrop","drop","didDrop","hover","DraggableWrapper","memo","DropTarget","connect","dropTarget","dropItem","DragSource","beginDrag","endDrag","getDropResult","placeholder","moveElement","canDrag","dragSource","ElementBox","handleClick","selectElement","stopPropagation","removeElement","state","selectedElement","bind","onRemove","LeafBox","componentRef","reLayout","draggerStyle","boxLayout","addListener","removeListener","findDOMNode","offsetTop","offsetLeft","offsetWidth","offsetHeight","oldLayout","setState","comp","compStyle","renderedChild","cloneElement","boxStyle","left","top","transform","Fragment","dragger","Animation","typeName","duration","_cached","setItem","ElementControl","elementStyle","elementProps","Comp","getComponent","mergedProps","toJS","dataType","preparedProps","prepareProps","dropInBox","withBox","preparedStyle","padding","minHeight","minWidth","box_in_container","ctx","createContext","mode","ElementConsumer","Consumer","ElementProvider","Provider","ElementCategory","FormRender","elements","onChange","formData","onDataChange","propSchema","rules","factory","validateRules","ele","Preview","modal","preview","visible","showData","info","handleCancel","jsonSchema","findAllRules","result","size","onCancel","okText","onOk","destroyOnClose","AntRender","TextArea","Center","importJson","showImport","jsonImported","doImport","jsonObj","parse","message","error","loadElements","generateJson","jsonData","showJson","hideJson","doCopy","navigator","clipboard","writeText","success","dlgStyle","overflow","menulist","right","cancelText","centered","bodyStyle","import_text","target","ContextMenu","showMenu","adjusted","adjustPos","hideMenu","onBodyClick","contains","onDel","onCopy","document","addEventListener","removeEventListener","currentRect","bottom","documentElement","clientWidth","clientHeight","retX","retY","menuStyle","contextmenu","menu_panel","menu_panel__header","menu_panel__header__type","menu_panel__header__name","menu_panel__body","menu_panel__item","DesignPanel","handleFormChangeEvent","page","rootElement","placeholderStyle","opacity","panel","withLabel","menus","categoryList","LAYOUT","FORM","BASIC","ADVANCE","Element","componentCtor","propsCache","defaultProps","defaultPropVals","default","Object","assign","_getComponent","ctor","prop","checkDataType","category","observable","staticMembers","members","source","checkTypes","prototype","targetType","every","charAt","substring","label","rows","autoSize","minRows","maxRows","formControl","descriptor","oldValue","retComp","apply","callback","transferValue","FormItem","onBlur","validate","validateStatus","help","validator","Schema","first","errors","childrenWrapped","validateProps","Item","colon","InnerCls","layout","labelCol","wrapperCol","Option","innerProps","buttonStyle","Target","PureComponent","other","Group","Button","CheckboxGroup","checked","mockData","push","toString","description","disabled","leftLabel","rightLabel","titles","targetKeys","Icon","PlainText","Link","Form","Input","Select","TreeSelect","Row","Col","Radio","Checkbox","Switch","Cascader","DatePicker","TimePicker","Slider","Rate","Transfer","Menu","Pagination","PageHeader","ElementOption","rawOptions","elementOption","loadOptions","spec","ControlCtor","control","newElem","ControlItem","item__title","LeftPanel","categoryElements","has","cat","categroy","categroy__title","categroy__body","elem","PropComponent","renderProps","renderOptoin","valueData","span","PropElement","ControlProps","slice","filter","render","STYLE_DEFS","propsSchema","properties","colors","color","backgroundColor","borderColor","texts","fontFamily","fontSize","fontStyle","enum","fontWeight","textAlign","whiteSpace","textDecorationLine","textDecorationColor","textDecorationStyle","margins","marginTop","marginBottom","marginLeft","marginRight","paddings","paddingTop","paddingBottom","paddingLeft","paddingRight","borders","borderWidth","borderStyle","uiSchema","nestedPropNames","styleConfig","styleList","reversedProps","keys","StylePanel","flatternStyle","flattern","includes","nestStyle","nested","parentKey","handleStyleChange","onValidate","displayType","items","enumNames","required","rootValue","max","min","pattern","DataPanel","handleModelChange","shouldCheckDataType","TabPane","defaultActiveKey","tabBarStyle","panel_tabs","tab","controls","Header","header","CurrentControl","Footer","footer","DEFAULT_SIZE","Records","_recordList","_current","deepEqual","getValue","shift","time","hasPrev","setCurrent","hasNext","PageComponent","PageElement","ELement","findAndHandleElement","elementKey","nullElement","Store","records","autorun","add","prev","next","rawJson","arr","makeElementTree","dataValue","reselectElement","removeKey","splice","log","dropPlace","listToDelete","_","pos","startsWith","getPropType","propsValue","cached","computed","action","Layout","toggleLeft","leftPanel","toggleRight","rightPanel","layoutCls","hide_left","hide_right","content","collapseLeft","collapseRight","href","zIndex","aria-label","viewBox","fill","d","transformOrigin","hand","App","backend","HTML5Backend","Boolean","location","hostname","elementTypes","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.de94be4e.chunk.js","sourcesContent":["module.exports = React;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"element_page__1kA8t\",\"box_in_item\":\"element_box_in_item__2A_dY\",\"box_in_container\":\"element_box_in_container__21VAm\",\"opts\":\"element_opts__LgMYi\",\"btn\":\"element_btn__1UR6X\",\"split\":\"element_split__1ZBB_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"index_footer__1C46t\",\"right\":\"index_right__1zbed\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__2ZFUt\",\"placeholder\":\"index_placeholder__27HvM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cat\":\"widget_cat__2W_4T\",\"hand\":\"widget_hand__1kKUS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"index_header__1jnIc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menus\":\"index_menus__35H95\",\"menulist\":\"index_menulist__2MzO5\",\"history\":\"index_history__ZxF9I\",\"history__icon\":\"index_history__icon__2XeJ4\",\"history__can_undo\":\"index_history__can_undo__32Qd3\",\"history__icon__undo\":\"index_history__icon__undo__3YVzv\",\"history__can_redo\":\"index_history__can_redo__2CkDe\",\"history__icon__redo\":\"index_history__icon__redo__2O047\",\"import_text\":\"index_import_text__3Jd5r\",\"right\":\"index_right__3U8uJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"layout_layout__2LROg\",\"header\":\"layout_header__27_3O\",\"content\":\"layout_content__3p8vg\",\"left\":\"layout_left__2aWp9\",\"collapseLeft\":\"layout_collapseLeft__3diRW\",\"center\":\"layout_center__1RqCt\",\"right\":\"layout_right__IRTls\",\"collapseRight\":\"layout_collapseRight__aY70q\",\"hide_right\":\"layout_hide_right__2U_VA\",\"hide_left\":\"layout_hide_left__1ijf5\",\"footer\":\"layout_footer__2Onc9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__3OMBv\",\"categroy\":\"index_categroy__1YF81\",\"categroy__title\":\"index_categroy__title__1TcVV\",\"categroy__body\":\"index_categroy__body__1rZPi\",\"item\":\"index_item__gJ9HU\",\"item__title\":\"index_item__title__18QmJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"index_box__3Y7v0\",\"place_before\":\"index_place_before__3ECvN\",\"box__placeholder__before\":\"index_box__placeholder__before__2XJGS\",\"place_after\":\"index_place_after__1JaBj\",\"box__placeholder__after\":\"index_box__placeholder__after__1rTZP\",\"highlight\":\"index_highlight__Nmwjg\",\"over\":\"index_over__1czE0\",\"active\":\"index_active__EeIvh\",\"opts\":\"index_opts__jOoaK\",\"dragging\":\"index_dragging__2URb7\",\"element\":\"index_element__smY7o\",\"placeholder\":\"index_placeholder__27Cup\",\"child_list\":\"index_child_list__1CCNF\",\"animate\":\"index_animate__3SMCb\",\"animate__active\":\"index_animate__active__19_xI\",\"animate_exit\":\"index_animate_exit__1LuMi\",\"animate_exit__active\":\"index_animate_exit__active__-FQux\",\"dragger\":\"index_dragger__1ynCL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contextmenu\":\"index_contextmenu__2UbBO\",\"menu_panel\":\"index_menu_panel__26oz4\",\"menu_panel__header\":\"index_menu_panel__header__-uD3j\",\"menu_panel__header__type\":\"index_menu_panel__header__type__1NDf3\",\"menu_panel__header__name\":\"index_menu_panel__header__name__1HuK_\",\"menu_panel__body\":\"index_menu_panel__body__2yjuQ\",\"menu_panel__item\":\"index_menu_panel__item__166P3\"};","module.exports = ReactDOM;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__YTLx1\",\"title\":\"index_title__2Qou9\",\"panel_tabs\":\"index_panel_tabs__2IJQ-\",\"controls\":\"index_controls__2Z2_s\",\"prop_item\":\"index_prop_item__2K8yl\"};","import React, { ReactElement } from 'react'\r\nimport styles from './index.module.less'\r\n\r\n// 格式化 json (https://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript)\r\nfunction syntaxHighlight(json: string | object): string {\r\n  if (typeof json != 'string') {\r\n    json = JSON.stringify(json, undefined, 2)\r\n  }\r\n\r\n  json = json.replace(/&/g, '&amp').replace(/</g, '&lt').replace(/>/g, '&gt')\r\n  return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\r\n    var cls = styles.number\r\n    if (/^\"/.test(match)) {\r\n        if (/:$/.test(match)) {\r\n          cls = styles.key;\r\n        } else {\r\n          cls = styles.string;\r\n        }\r\n    } else if (/true|false/.test(match)) {\r\n      cls = styles.boolean;\r\n    } else if (/null/.test(match)) {\r\n      cls = styles.null\r\n    }\r\n    return '<span class=\"' + cls + '\">' + match + '</span>'\r\n  })\r\n}\r\n\r\nexport default class JsonView extends React.Component<{json: object}> {\r\n  render(): ReactElement {\r\n    const { json } = this.props\r\n    const formated = syntaxHighlight(json)\r\n\r\n    return (\r\n      <code>\r\n        <pre>\r\n        <div dangerouslySetInnerHTML={{__html: formated}} />\r\n        </pre>\r\n      </code>\r\n      // <div dangerouslySetInnerHTML={{__html: formated}} />\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport classnames from 'classnames'\r\nimport { Icon } from 'antd'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../store'\r\nimport styles from './index.module.less'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass History extends React.Component<{\r\n  rootStore?: Store\r\n}> {\r\n  undo = (): void => {\r\n    if (!this.props.rootStore!.canUndo) {\r\n      return\r\n    }\r\n    this.props.rootStore!.undo()\r\n  }\r\n\r\n  redo = (): void => {\r\n    if (!this.props.rootStore!.canRedo) {\r\n      return\r\n    }\r\n\r\n    this.props.rootStore!.redo()\r\n  }\r\n\r\n  render() {\r\n    const historyCls = classnames({\r\n      [styles.history]: true,\r\n      [styles.history__can_undo]: this.props.rootStore!.canUndo,\r\n      [styles.history__can_redo]: this.props.rootStore!.canRedo,\r\n    })\r\n\r\n    const undoCls = classnames({\r\n      [styles.history__icon]: true,\r\n      [styles.history__icon__undo]: true\r\n    })\r\n\r\n    const redoCls = classnames({\r\n      [styles.history__icon]: true,\r\n      [styles.history__icon__redo]: true\r\n    })\r\n\r\n    return (\r\n      <div className={historyCls}>\r\n        <Icon className={undoCls} type=\"undo\" title=\"撤销\" onClick={this.undo} />\r\n        <Icon className={redoCls} type=\"redo\" title=\"恢复\" onClick={this.redo} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default History\r\n","import { EventEmitter } from 'events'\r\n\r\nconst emitter = new EventEmitter()\r\n\r\nexport default emitter\r\n\r\nexport const EventTypes = {\r\n  LEAF_LAYOUT: Symbol.for('LEAF_LAYOUT'),\r\n  CONTEXT_MENU: Symbol.for('CONTEXT_MENU'),\r\n}\r\n","/**\r\n * which attribute change will cause reflow\r\n */\r\nimport eventBus, { EventTypes } from './eventBus'\r\nimport { POINT } from '../../types'\r\nimport IElement from '../element/IElement'\r\n\r\neventBus.setMaxListeners(1000) // support 1000 controls\r\n\r\nconst REFLOW_ATTRS: {\r\n  [key: string]: boolean\r\n} = [\r\n  'width',\r\n  'height',\r\n  'top',\r\n  'right',\r\n  'bottom',\r\n  'left',\r\n  'minWidth',\r\n  'minHeight',\r\n  'maxWidth',\r\n  'maxHeight',\r\n  'margin',\r\n  'marginTop',\r\n  'marginRight',\r\n  'marginBottom',\r\n  'marginLeft',\r\n  'padding',\r\n  'paddingTop',\r\n  'paddingRight',\r\n  'paddingBottom',\r\n  'paddingLeft',\r\n  'transform',\r\n  'transformOrigin',\r\n  'perspectiveOrigin',\r\n  'translate',\r\n].reduce((ret, item) => ({\r\n  ...ret,\r\n  [item]: true\r\n}), {})\r\n\r\n/**\r\n * check whether a css attribute change will cause reflow\r\n * @param name attribute name\r\n */\r\nexport const willReflow = (name: string) => {\r\n  return !!REFLOW_ATTRS[name]\r\n}\r\n\r\n/**\r\n * notify change event to all layout listeners\r\n * @param delay event delay (ms), default: 0\r\n */\r\nexport const triggerLayoutChange = (delay: number = 0) => {\r\n  setTimeout(() => {\r\n    // console.debug('box layout update !')\r\n    eventBus.emit(EventTypes.LEAF_LAYOUT)\r\n  }, delay)\r\n}\r\n\r\n/**\r\n * show context menu\r\n */\r\nexport const showContextView = (point: POINT, element: IElement) => {\r\n  eventBus.emit(EventTypes.CONTEXT_MENU, {\r\n    point, element\r\n  })\r\n}\r\n","import { XYCoord } from \"dnd-core\"\r\nimport memorize from 'fast-memoize'\r\nimport IElement from '../element/IElement'\r\n// import { getItem } from './element/RenderCache'\r\nimport { DropPlace, RECT } from '../../types'\r\nexport * from './layout'\r\n\r\nconst PLACEHOLDER_SIZE = 2\r\n\r\n/**\r\n * 浅对比\r\n */\r\nexport const shallowCompare = (obj1: any, obj2: any) => {\r\n  if (!obj1 && !obj2) {\r\n    return true\r\n  }\r\n\r\n  return obj1 && obj2 && Object.keys(obj1).length === Object.keys(obj2).length &&\r\n    Object.keys(obj1).every(\r\n      key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\r\n    )\r\n}\r\n\r\n/**\r\n * 将 value 转为指定类型\r\n */\r\nexport const parseValue = (value: any, type: string) => {\r\n  switch(type) {\r\n    case 'number':\r\n      const val = +value\r\n      return Number.isNaN(val) ? value : val\r\n    case 'boolean':\r\n      return !!value\r\n    case 'regexp': {\r\n      try {\r\n        return new RegExp(value)\r\n      } catch(e) {\r\n        return null\r\n      }\r\n    }\r\n    case 'date': {\r\n      try {\r\n        return new Date(value)\r\n      } catch(e) {\r\n        return null\r\n      }\r\n    }\r\n    default: {\r\n      return value\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 校验参数并将参数转化为数组\r\n */\r\nexport const ensureArray = <T>(obj: T | Array<T>): Array<T> => {\r\n  return Array.isArray(obj) ? obj : [obj]\r\n}\r\n\r\n/**\r\n * 获取唯一 key\r\n */\r\nexport const genKey = (): string => {\r\n  return Math.random().toFixed(16).split('.')[1]\r\n}\r\n\r\n// check point in rect\r\nconst inRect = (point: XYCoord, rect: RECT) => {\r\n  const { x, y } = point\r\n  const { x: rx, y: ry, width = 0, height = 0 } = rect\r\n\r\n  return x > rx && x < rx + width && y > ry && y < ry + height\r\n}\r\n\r\nconst hRect = (rect: RECT, addon: any = {}): RECT => {\r\n  return { ...rect, height: PLACEHOLDER_SIZE, ...addon}\r\n}\r\n\r\nconst wRect = (rect: RECT, addon: any = {}): RECT => {\r\n  return { ...rect, width: PLACEHOLDER_SIZE, ...addon }\r\n}\r\n\r\n// 在控件列表中计算合适的插入位置\r\nconst calculateDropPlace = (from: IElement, to: IElement, clientOffset: XYCoord): DropPlace | null => {\r\n  const list = to.children || []\r\n  const { x, y, width, height } = to.getClientRect()\r\n\r\n  // console.log('calculate', containerRect)\r\n\r\n  if (!list || list.length === 0) {\r\n    // console.log('first child', hRect({ x, y, width, height }))\r\n    return { container: to, position: hRect({ x, y, width, height }), index: 0 }\r\n  }\r\n\r\n  let nearest: IElement | null = null\r\n  let nearestIndex: number = -1\r\n  let nearestRect: RECT & { center: XYCoord } | null = null\r\n  let distance = Number.POSITIVE_INFINITY\r\n  const { x: clientX, y: clientY } = clientOffset\r\n\r\n  // find the nearest element\r\n  const len = list.length\r\n  for (let i = 0; i < len; i++) {\r\n    const temp = list[i]\r\n\r\n    if (temp.key === from.key) {\r\n      continue\r\n    }\r\n\r\n    // const next = list[i + 1]\r\n    const { x, y, width = 0, height = 0 } = temp.getClientRect()\r\n    const center = { x: x + width / 2, y: y + height / 2 }\r\n\r\n    // the only child that contains mouse pointer\r\n    if (inRect(clientOffset, { x, y, width, height })) {\r\n      // if (temp.type === 'plain-text') {\r\n      //   debugger\r\n      // }\r\n      nearest = temp\r\n      nearestRect = { x, y, width, height, center }\r\n      nearestIndex = i\r\n      break\r\n    }\r\n\r\n    // const { x: nextX, y: nextY, width: nextWidth = 0, height: nextHeight = 0 } = next.getClientRect()\r\n    const tempDistance = Math.pow(clientX - center.x, 2) + Math.pow(clientY - center.y, 2)\r\n    if (tempDistance < distance) {\r\n      distance = tempDistance\r\n      nearest = temp\r\n      nearestRect = { x, y, width, height, center }\r\n      nearestIndex = i\r\n    }\r\n  }\r\n\r\n  if (nearest && nearestRect) {\r\n    const { x, y, width = 0, height = 0, center } = nearestRect\r\n    let dom = nearest.getRenderedDom()\r\n    dom = (dom && (nearest.canBeDroped() ? dom.parentElement : dom)) as HTMLElement\r\n    if (!dom) {\r\n      // console.log('no valid dom node')\r\n      return null\r\n    }\r\n\r\n    const realStyle = window.getComputedStyle(dom)\r\n    const display = realStyle.display\r\n    const float = realStyle.cssFloat\r\n    // decide placeholder is horizontal or vertical\r\n    let inline = display === 'inline-block' || display === 'inline' || float !== 'none'\r\n    // console.log(dom, display, inline, float, center)\r\n\r\n    if (inline) {\r\n      if (clientX < center.x) { // left side\r\n        // console.log('left')\r\n        return {\r\n          container: to,\r\n          position: wRect(nearestRect, { x }),\r\n          index: nearestIndex\r\n        }\r\n      } else {\r\n        // console.log('right')\r\n        return {\r\n          container: to,\r\n          position: wRect(nearestRect, { x: x + width }),\r\n          index: nearestIndex + 1\r\n        }\r\n      }\r\n    } else {\r\n      if (clientY < center.y) {\r\n        // console.log('top')\r\n        return {\r\n          container: to,\r\n          position: hRect(nearestRect, {y: y - PLACEHOLDER_SIZE}),\r\n          index: nearestIndex\r\n        }\r\n      } else {\r\n        // console.log('bottom')\r\n        return {\r\n          container: to,\r\n          position: hRect(nearestRect, {y: y + (height || 0)}),\r\n          index: nearestIndex + 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n// get nearest dropable element\r\nconst nearestDropable = (from: IElement, to: IElement | null ): IElement | null => {\r\n  while(to) {\r\n    // console.log('check', to.type, from.type)\r\n    if (from.canDropTo(to) && to.canBeDroped(from)) {\r\n      // console.log('found')\r\n      return to\r\n    }\r\n\r\n    to = to.parent || null\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n// check whether 'from' element is same as or the ancestor of 'to' element\r\nconst isAncestor = (from: IElement, to: IElement | null) => {\r\n  while(to) {\r\n    if (to.key === from.key) {\r\n      console.warn('can not drop to a sub element')\r\n      return true\r\n    }\r\n\r\n    to = to.parent || null\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * 根据拖动元素和底层元素获取正确的放置位置，在拖动元素时使用此函数进行运算\r\n * @returns 待放入的容器元素，插入点坐标和放置位置（索引）\r\n */\r\nexport const getDropPlace = memorize(\r\n  (from: IElement, to: IElement | null, clientOffset: XYCoord | null): DropPlace | null =>  {\r\n  if (!from || !to || !clientOffset || from.key === to.key) {\r\n    return null\r\n  }\r\n\r\n  if (isAncestor(from, to)) {\r\n    // console.log('isAncestor')\r\n    return null\r\n  }\r\n\r\n  if (!from.canDropTo(to) || !to.canBeDroped(from)) {\r\n    // console.log('drop', from, to)\r\n    to = nearestDropable(from, to)\r\n    // console.log('check parent', from, to)\r\n    if (!to) { // 上级元素也不支持拖入\r\n      // console.log('no parent')\r\n      return null\r\n    }\r\n  }\r\n\r\n  return calculateDropPlace(from, to, clientOffset)\r\n}\r\n, {\r\n  serializer: (arg: any) => {\r\n    const [ from, to, cood ] = arg\r\n    return `${from.key}_${to.key}_${cood.x}_${cood.y}`\r\n  }\r\n})\r\n","import React, { ReactElement } from 'react'\r\nimport ElementOption from '../ElementOption'\r\nimport { RenderOption } from './IElement'\r\nimport IElement, { ElementContructor } from './IElement'\r\nimport { JsonFormat, RECT } from '../../types'\r\nimport { genKey } from '../utils'\r\n\r\nexport default class NullElement implements IElement {\r\n  dirty?: boolean | undefined\r\n  value?: any\r\n  name?: string | undefined\r\n  props?: any\r\n  children?: IElement[] | undefined\r\n  parent?: IElement | null | undefined\r\n  public static icon: string = 'null'\r\n  public static displayName: string = '空元素'\r\n\r\n  type = 'null'\r\n  key = genKey()\r\n  propsData = new Map()\r\n\r\n  render(renderOption?: RenderOption | undefined) {\r\n    return <div className=\"null-element\" key={this.key}></div>\r\n  }\r\n\r\n  canDrag(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canBeDroped(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canDropTo(element: IElement): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canRemove(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  renderBefore(props: any, renderOption?: RenderOption | undefined): React.ReactElement | null {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  renderAfter(props: any, renderOption?: RenderOption | undefined): React.ReactElement | null {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  getClientRect(): RECT {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  getRenderedDom() {\r\n    return undefined\r\n  }\r\n  jsonData(): JsonFormat {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n\r\n  defaultProps() {\r\n    return []\r\n  }\r\n  prepareProps(props: any) {\r\n    return props\r\n  }\r\n  getComponent(): typeof React.Component | React.FunctionComponent<{}> {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  isInline() {\r\n    return true\r\n  }\r\n\r\n  _render(options: ElementOption): ReactElement {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n\r\n  ctor() {\r\n    return this.constructor as ElementContructor\r\n  }\r\n\r\n  getPropType(name: string): string {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n}\r\n","/**\r\n * 组件类型工厂，根据 type 返回已注册组件的类型定义\r\n */\r\nimport IElement, { ElementContructor } from './element/IElement'\r\nimport NullElement from './element/NullElement'\r\nimport ElementOption from './ElementOption'\r\nimport { genKey } from './utils'\r\n\r\nclass ElementFactory {\r\n  _elements: Map<string, ElementContructor> = new Map()\r\n\r\n  registerElement(elemType: ElementContructor | Array<ElementContructor>): void {\r\n    if (Array.isArray(elemType)) { // 批量注册\r\n      elemType.forEach(item => {\r\n        this.registerElement(item)\r\n      })\r\n    } else {\r\n      this._elements.set(elemType.type, elemType)\r\n    }\r\n  }\r\n\r\n  createElement(option: ElementOption, parent?: IElement): IElement {\r\n    const Ctor = this._elements.get(option.type)\r\n\r\n    if (!Ctor) {\r\n      console.warn('invalid element type ' + option.type)\r\n      return new NullElement()\r\n    }\r\n\r\n    if (!option.key) {\r\n      option.key = genKey()\r\n    }\r\n\r\n    const element = new Ctor(option)\r\n    element.parent = parent\r\n\r\n    if (option.children && option.children.length > 0) {\r\n      element.children = option.children.map(child => this.createElement(child, element))\r\n    }\r\n\r\n    return element\r\n  }\r\n}\r\n\r\nexport default new ElementFactory()\r\n","import { ElementContructor } from \"./core/element/IElement\"\r\n\r\nexport const DragTypes = {\r\n  CARD: 'CARD'\r\n}\r\n\r\nexport type DragProps = {\r\n  control: ElementContructor\r\n}\r\n\r\n// 根节点约定命名\r\nexport const ROOT_PAGE = 'root_page'\r\n\r\n// 事件名称\r\nexport const STYLE_NAME_PREFIX = 'style!'\r\nexport const DATA_NAME_PREFIX = 'data!'\r\nexport const PROP_NAME_PREFIX = 'prop!'\r\n\r\n// render mode\r\nexport const RENDER_MODE_DESIGN = 'design'\r\nexport const RENDER_MODE_PREVIEW = 'preview'\r\n","import { inject } from \"mobx-react\"\r\nimport React from \"react\"\r\nimport classnames from 'classnames'\r\nimport { DraggableBoxProps, RECT } from \"../../types\"\r\nimport { showContextView } from \"../utils\"\r\nimport styles from './index.module.less'\r\n\r\n@inject('rootStore')\r\nclass BoxContent extends React.Component<DraggableBoxProps> {\r\n  private ref: any\r\n\r\n  constructor(props: DraggableBoxProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n  }\r\n\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current.getBoundingClientRect()\r\n  }\r\n\r\n  handleContextMenu = (e: any) => {\r\n    if (this.props.element && this.props.element.type) {\r\n      showContextView({\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      }, this.props.element)\r\n\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      cls, style, isDragging, isOver, isActive,\r\n      onClick, children,\r\n      connectDragSource, connectDropTarget\r\n    } = this.props\r\n\r\n    const inline = this.props.element.isInline()\r\n\r\n    const mergedCls = classnames({\r\n      ...cls,\r\n      [styles.active]: isActive,\r\n      [styles.dragging]: !!isDragging,\r\n      [styles.over]: !!isOver,\r\n      [styles.box]: true,\r\n      [styles.box_inline]: inline,\r\n    })\r\n\r\n    return connectDropTarget(connectDragSource(\r\n      <div\r\n        ref={this.ref}\r\n        className={mergedCls}\r\n        style={style}\r\n        onClick={onClick}\r\n        onContextMenu={this.handleContextMenu}\r\n      >\r\n        {children}\r\n      </div>\r\n    ))\r\n  }\r\n}\r\n\r\nexport default BoxContent\r\n","import React from \"react\"\r\nimport { throttle } from \"lodash\"\r\nimport { OwnProps, DragItemType, DragConnectedProps, DropConnectedProps } from \"../../types\"\r\nimport { DragSourceMonitor, DragSourceConnector, DropTargetMonitor, DropTargetConnector, DropTarget, DragSource } from \"react-dnd\"\r\nimport ElementBox from \"./ElementBox\"\r\nimport { DragTypes } from \"../../configs\"\r\nimport BoxContent from \"./BoxContent\"\r\nimport { getDropPlace } from '../utils'\r\n\r\nconst HOVER_INTERVAL = 100 // 节流，防止 move 事件执行太频繁\r\n\r\nconst dragSpec = {\r\n  beginDrag(props: OwnProps, monitor: DragSourceMonitor, component: ElementBox): DragItemType {\r\n    return {\r\n      element: props.element,\r\n    }\r\n  },\r\n  endDrag(props: OwnProps, monitor: DragSourceMonitor, component: ElementBox) {\r\n    if (!component) {\r\n      return\r\n    }\r\n\r\n    const { rootStore: store } = component.props\r\n    const droped = monitor.getDropResult()\r\n    if (!droped) {\r\n      store!.clearHover()\r\n      return\r\n    }\r\n\r\n    // const { element: to} = droped\r\n    const { placeholder } = store!\r\n\r\n    if (!placeholder) {\r\n      return\r\n    }\r\n\r\n    store!.moveElement(monitor.getItem().element, placeholder)\r\n    component.props.rootStore!.clearHover()\r\n  },\r\n  canDrag(props: OwnProps, monitor: DragSourceMonitor) {\r\n    return props.element.canDrag()\r\n  }\r\n}\r\n\r\nconst dragConnect = function(connect: DragSourceConnector, monitor: DragSourceMonitor):\r\nDragConnectedProps {\r\n  return {\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging(),\r\n    dragItem: monitor.getItem()\r\n  }\r\n}\r\n\r\n// 将一个控件拖动到其他控件上时实时计算放置区域\r\nconst handleHover = throttle(function(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n\r\n  const store = component.props.rootStore\r\n\r\n  if (!monitor.isOver({ shallow: true })) {\r\n    store!.clearHover()\r\n    return\r\n  }\r\n\r\n  let to = props.element // already placed element\r\n\r\n  const dragItem = monitor.getItem() // dragging element\r\n\r\n  if (!to || to.type === 'null' || !dragItem || !dragItem.element || to.key === dragItem.key) { // 不处理\r\n    store!.clearHover()\r\n    return\r\n  }\r\n\r\n  const from = dragItem.element\r\n  const dropHolder = getDropPlace(from, to, monitor.getClientOffset())\r\n  if (dropHolder) {\r\n    store!.setPlaceHolder(dropHolder)\r\n  } else {\r\n    store!.clearHover()\r\n  }\r\n}, HOVER_INTERVAL)\r\n\r\nconst dropSpec = {\r\n  canDrop(props: OwnProps, monitor: DropTargetMonitor) {\r\n    // return props.element.canBeDroped()\r\n    return true\r\n  },\r\n  drop(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n    if (monitor.didDrop()) {\r\n      return\r\n    }\r\n\r\n    const { element } = props\r\n\r\n    return {\r\n      element\r\n    }\r\n  },\r\n  hover(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n    handleHover(props, monitor, component)\r\n  }\r\n}\r\n\r\nconst dropCollect = function(connect: DropTargetConnector, monitor: DropTargetMonitor): DropConnectedProps {\r\n  return {\r\n    isOver: monitor.isOver({ shallow: true }),\r\n    connectDropTarget: connect.dropTarget(),\r\n    dropItem: monitor.getItem(),\r\n    clientOffset: monitor.getClientOffset(),\r\n  }\r\n}\r\n\r\nconst DraggableWrapper = React.memo(DropTarget(DragTypes.CARD, dropSpec, dropCollect)(DragSource(DragTypes.CARD, dragSpec, dragConnect)(BoxContent)))\r\n\r\nexport default DraggableWrapper\r\n","import React, { ReactNode } from \"react\"\r\nimport { OwnProps, RECT } from \"../../types\"\r\nimport IElement from \"../element/IElement\"\r\n// import styles from './index.module.less'\r\nimport BoxContent from \"./BoxContent\"\r\nimport DraggableWrapper from \"./DraggableWrapper\"\r\nimport { inject, observer } from \"mobx-react\"\r\n\r\ntype StateType = {\r\n  isActive: boolean\r\n}\r\n\r\n/**\r\n * 封装控件\r\n */\r\n@inject('rootStore')\r\n@observer\r\nclass ElementBox extends React.Component<OwnProps, StateType> {\r\n  public ref: React.RefObject<BoxContent>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n\r\n    this.state = {\r\n      isActive: props.rootStore!.selectedElement.key === props.element.key,\r\n    }\r\n  }\r\n\r\n  handleClick = (e: React.MouseEvent) => {\r\n    const { element, rootStore } = this.props\r\n\r\n    rootStore!.selectElement(element)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  removeElement = (element: IElement) => {\r\n    if (!element) {\r\n      return\r\n    }\r\n\r\n    const { rootStore } = this.props\r\n    rootStore!.removeElement(element)\r\n  }\r\n\r\n  // 获取元素所占区域\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current!.getClientRect()\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const {\r\n      element, children, rootStore\r\n    } = this.props\r\n    const isActive = rootStore!.selectedElement.key === element.key\r\n\r\n    const cls: { [key: string]: any } = {}\r\n\r\n    if (this.props.className) {\r\n      cls[this.props.className] = true\r\n    }\r\n\r\n    return (\r\n      <DraggableWrapper\r\n        ref={this.ref}\r\n        element={element}\r\n        cls={cls}\r\n        isActive={isActive}\r\n        onClick={this.handleClick.bind(this)}\r\n        onRemove={this.removeElement.bind(this)}\r\n      >\r\n        {children}\r\n      </DraggableWrapper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ElementBox\r\n","import React, { ReactNode } from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\n// import classnames from 'classnames'\r\nimport { OwnProps, RECT } from \"../../types\"\r\nimport IElement from \"../element/IElement\"\r\nimport BoxContent from \"./BoxContent\"\r\nimport DraggableWrapper from \"./DraggableWrapper\"\r\nimport { inject, observer } from \"mobx-react\"\r\nimport eventBus, { EventTypes } from '../utils/eventBus'\r\nimport styles from './index.module.less'\r\n\r\ntype StateType = {\r\n  isActive: boolean,\r\n  draggerStyle?: Object,\r\n  boxLayout: RECT\r\n}\r\n\r\n/**\r\n * 封装控件\r\n */\r\n@inject('rootStore')\r\n@observer\r\nclass LeafBox extends React.Component<OwnProps, StateType> {\r\n  public ref: React.RefObject<BoxContent>\r\n  public componentRef: React.RefObject<any>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n    this.componentRef = React.createRef()\r\n\r\n    this.reLayout = this.reLayout.bind(this)\r\n\r\n    this.state = {\r\n      isActive: props.rootStore!.selectedElement.key === props.element.key,\r\n      draggerStyle: {\r\n        // opacity: 0,\r\n        position: 'absolute',\r\n      },\r\n      boxLayout: {\r\n        x: 0, y: 0, width: 0, height: 0\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.reLayout()\r\n    }, 400) // 等待动画结束才能拿到元素的布局信息\r\n\r\n    eventBus.addListener(EventTypes.LEAF_LAYOUT, this.reLayout)\r\n  }\r\n\r\n  // componentDidUpdate() {\r\n  //   setTimeout(() => {\r\n  //     this.reLayout()\r\n  //   }, 400) // 等待动画结束才能拿到元素的布局信息\r\n  // }\r\n\r\n  componentWillUnmount() {\r\n    eventBus.removeListener(EventTypes.LEAF_LAYOUT, this.reLayout)\r\n  }\r\n\r\n  reLayout() {\r\n    // const rect = this.props.element.getClientRect()\r\n    const dom = ReactDOM.findDOMNode(this.componentRef.current) as HTMLElement\r\n    if (dom) {\r\n      const { offsetTop: y, offsetLeft: x, offsetWidth: width, offsetHeight: height } = dom\r\n      const oldLayout = this.state.boxLayout\r\n      if (x === oldLayout.x && y === oldLayout.y && width === oldLayout.width && height === oldLayout.height) {\r\n        return\r\n      }\r\n\r\n      // console.log('relayout')\r\n      this.setState({\r\n        boxLayout: { x, y, width, height }\r\n      })\r\n    }\r\n  }\r\n\r\n  handleClick = (e: React.MouseEvent) => {\r\n    const { element, rootStore } = this.props\r\n\r\n    rootStore!.selectElement(element)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  removeElement = (element: IElement) => {\r\n    if (!element) {\r\n      return\r\n    }\r\n\r\n    const { rootStore } = this.props\r\n    rootStore!.removeElement(element)\r\n  }\r\n\r\n  // 获取元素所占区域\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current!.getClientRect()\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const {\r\n      element, children, rootStore\r\n    } = this.props\r\n    const isActive = rootStore!.selectedElement.key === element.key\r\n\r\n    const cls = {\r\n      [styles.box]: true,\r\n      // [styles.box_in_item]: true,\r\n      [styles.active]: isActive\r\n    }\r\n\r\n    const comp = children\r\n    const compStyle = comp.props.style || {}\r\n    const renderedChild = children ? React.cloneElement(comp, {\r\n      style: {\r\n        ...compStyle,\r\n        // zIndex: 3,\r\n        // border: '1px dashed rgba(90, 90, 90, 0.2)',\r\n      },\r\n      // className: cls,\r\n      ref: this.componentRef\r\n    }) : children\r\n\r\n    const {boxLayout, draggerStyle} = this.state\r\n\r\n    const boxStyle = {\r\n      ...draggerStyle,\r\n      // left: `${boxLayout.x + 1}px`,\r\n      // top: `${boxLayout.y + 1}px`,\r\n      left: 0,\r\n      top: 0,\r\n      width: `${boxLayout.width || 1 - 1}px`,\r\n      height: `${boxLayout.height || 1 - 1}px`,\r\n      transform: `translate3d(${boxLayout.x + 1}px, ${boxLayout.y + 1}px, 0)`\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {renderedChild}\r\n        <div className={styles.dragger}>\r\n          <DraggableWrapper\r\n            ref={this.ref}\r\n            element={element}\r\n            isActive={isActive}\r\n            style={boxStyle}\r\n            cls={cls}\r\n            onClick={this.handleClick.bind(this)}\r\n            onRemove={this.removeElement.bind(this)}\r\n          >\r\n          </DraggableWrapper>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LeafBox\r\n","import React from 'react'\r\nimport FlipMove from 'react-flip-move'\r\n\r\n/**\r\n * simply enjoy react-flip-move\r\n */\r\nclass Animation extends React.Component {\r\n  render() {\r\n    // wrapperless mode of FlipMove\r\n    return (\r\n      <FlipMove typeName={null} duration={100}>\r\n        {\r\n          this.props.children\r\n        }\r\n      </FlipMove>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Animation\r\n","/**\r\n * key-value map,\r\n * store relations between elements and rendered doms\r\n */\r\nlet _cached: {[key: string]: any} = {}\r\n\r\nexport const setItem = (key: string, component: any) => {\r\n  if (!key || !component || !component.current) {\r\n    return\r\n  }\r\n\r\n  _cached[key] = component\r\n  // console.log(_cached)\r\n}\r\n\r\nexport const getItem = (key: string): any => {\r\n  return _cached[key]\r\n}\r\n\r\nexport const clear = (): void => {\r\n  _cached = {}\r\n}\r\n","import React from \"react\"\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from \"mobx-react\"\r\n// import ReactDOM from \"react-dom\"\r\nimport ElementBox from \"../element-box/ElementBox\"\r\nimport LeafBox from '../element-box/LeafBox'\r\nimport { Store } from \"../../store\"\r\nimport IElement, { RenderOption } from \"./IElement\"\r\nimport Animation from '../../components/animation'\r\nimport { setItem } from './RenderCache'\r\nimport styles from './element.module.less'\r\n\r\ntype ElementControlProps = {\r\n  rootStore?: Store,\r\n  element: IElement,\r\n  renderOption?: RenderOption,\r\n  // forwardedRef?: any,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ElementControl extends React.Component<ElementControlProps, { display: string | null }> {\r\n  ref: any\r\n  componentRef: any\r\n\r\n  constructor(props: ElementControlProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      display: ''\r\n    }\r\n\r\n    this.ref = React.createRef()\r\n    // this.componentRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    setItem(this.props.element.key, this.ref)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    setItem(this.props.element.key, this.ref)\r\n  }\r\n\r\n  render() {\r\n    const { element, renderOption = {}, rootStore, ...props } = this.props\r\n    if (element.type === 'null') {\r\n      return null\r\n    }\r\n\r\n    const { style: elementStyle, ...elementProps } = element.props || {}\r\n\r\n    const Comp = element.getComponent()\r\n    const mergedProps = {\r\n      ...props,\r\n      ...elementProps,\r\n      ...renderOption.props,\r\n    }\r\n\r\n    if (elementStyle) {\r\n      mergedProps.style = {\r\n        ...mergedProps.style,\r\n        ...toJS(elementStyle)\r\n      }\r\n    }\r\n\r\n    if (!mergedProps.name && element.name) {\r\n      mergedProps.name = element.name\r\n    }\r\n\r\n    if (element.dataType) {\r\n      mergedProps.dataType = element.dataType\r\n    }\r\n\r\n    const  preparedProps = element.prepareProps(mergedProps)\r\n\r\n    const dropInBox = renderOption.withBox && element.canBeDroped()\r\n    const preparedStyle = preparedProps.style || {}\r\n\r\n    preparedProps.style = {\r\n      ...preparedStyle,\r\n      position: 'relative',\r\n      padding: preparedStyle.padding || (dropInBox ? '8px' : undefined),\r\n      minHeight: preparedStyle.minWidth || (renderOption.withBox && '12px'),\r\n    }\r\n\r\n    // 非容器元素\r\n    if (!element.canBeDroped()) {\r\n      // 与容器元素的渲染有区别\r\n      return renderOption.withBox ? (\r\n        <LeafBox\r\n          element={element}\r\n          key={element.key}\r\n          ref={this.ref}\r\n        >\r\n          <Comp {...preparedProps} />\r\n        </LeafBox>\r\n      ) : <Comp {...preparedProps} key={element.key} />\r\n    }\r\n\r\n    return renderOption.withBox ? (\r\n      <Comp {...preparedProps} key={element.key}>\r\n        <ElementBox\r\n          element={element}\r\n          className={styles.box_in_container}\r\n          ref={this.ref}\r\n        />\r\n        <Animation>\r\n        {\r\n          element.children && element.children.map((item: IElement) => (\r\n            <ElementControl key={item.key} element={item} renderOption={renderOption} />\r\n          ))\r\n        }\r\n        </Animation>\r\n      </Comp>\r\n    ) : (\r\n      <Comp {...preparedProps} key={element.key}>\r\n        {/* <Animation> */}\r\n        {\r\n          element.children && element.children.map((item: IElement) => (\r\n            <ElementControl key={item.key} element={item} renderOption={renderOption} />\r\n          ))\r\n        }\r\n        {/* </Animation> */}\r\n      </Comp>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ElementControl\r\n","/**\r\n * Context for all elements\r\n */\r\nimport React from 'react'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\nimport { RuleItem } from '../../types'\r\n\r\nconst ctx = React.createContext<{\r\n  mode: string,\r\n  value?: any,\r\n  validateRules?: RuleItem,\r\n  onChange?: Function\r\n}>({\r\n  mode: RENDER_MODE_DESIGN\r\n})\r\n\r\nconst { Consumer: ElementConsumer, Provider: ElementProvider } = ctx\r\n\r\nexport {\r\n  ElementConsumer,\r\n  ElementProvider,\r\n}\r\n","/**\r\n * 控件分类\r\n */\r\nenum ElementCategory {\r\n  LAYOUT, // 布局控件\r\n  FORM,\r\n  BASIC, // 基本控件\r\n  ADVANCE, // 高级控件\r\n}\r\n\r\nexport const categoryList = [\r\n  {\r\n    type: ElementCategory.LAYOUT,\r\n    title: '布局控件',\r\n  },\r\n  {\r\n    type: ElementCategory.FORM,\r\n    title: '表单控件',\r\n  },\r\n  {\r\n    type: ElementCategory.BASIC,\r\n    title: '通用控件',\r\n  },\r\n  {\r\n    type: ElementCategory.ADVANCE,\r\n    title: '高级控件',\r\n  }\r\n]\r\n\r\nexport default ElementCategory\r\n","import React from 'react'\nimport { JsonFormat } from '../../types'\nimport factory from '../../core/ElementFactory'\nimport ElementControl from '../../core/element/ElementControl'\nimport { ElementProvider } from '../../core/element/ElementContext'\nimport { RENDER_MODE_PREVIEW } from '../../configs'\nimport IElement from '../../core/element/IElement'\n\ntype FormRenderProps = {\n  propSchema: Array<JsonFormat>,\n  formData?: {[key: string]: any},\n  rules?: {[key: string]: any},\n  onChange: Function,\n}\n\n/**\n * ant-design based form renderer\n */\nclass FormRender extends React.Component<FormRenderProps> {\n  elements?: Array<IElement> | null\n\n  constructor(props: FormRenderProps) {\n    super(props)\n    this.elements = null\n  }\n\n  onChange = (value: any, name: string) => {\n    const { formData, onChange: onDataChange } = this.props\n    onDataChange({ ...formData, [name]: value })\n  }\n\n  render() {\n    const { propSchema, formData, rules } = this.props\n    if (!propSchema) {\n      return null\n    }\n\n    if (!this.elements) {\n      this.elements = propSchema.map(item => factory.createElement(item))\n    }\n    // console.log('ant render:', formData)\n\n    return (\n      <ElementProvider\n        value={{\n          value: formData,\n          mode: RENDER_MODE_PREVIEW,\n          validateRules: rules,\n          onChange: this.onChange\n        }}\n      >\n        <div>\n          {\n            this.elements && this.elements.map(ele => (\n              <ElementControl\n                key={ele.key}\n                element={ele}\n                renderOption={{ withBox: false }}\n              />\n            ))\n          }\n        </div>\n      </ElementProvider>\n    )\n  }\n}\n\nexport default FormRender\n","import React from 'react'\r\nimport { Modal, Button } from 'antd'\r\nimport AntRender from '../form-render/AntRender'\r\nimport { JsonFormat, ValidateRule } from '../../types'\r\nimport styles from './index.module.less'\r\n\r\ntype PropType = {\r\n  jsonSchema?: Array<JsonFormat>,\r\n}\r\n\r\ntype StateType = {\r\n  visible: boolean,\r\n  formData: any\r\n}\r\n\r\nconst findAllRules = (jsonSchema: Array<JsonFormat>, result:{[key: string]: ValidateRule[]} = {}) => {\r\n  jsonSchema.forEach(item => {\r\n    // only support rule check for input control\r\n    if (item.name && item.type === 'input' && item.rules) {\r\n      const dataType = item.dataType ? { type: item.dataType } : null\r\n      if (dataType) {\r\n        result[item.name] = [dataType, ...item.rules]\r\n      } else {\r\n        result[item.name] = [...item.rules]\r\n      }\r\n    }\r\n\r\n    if (item.children) {\r\n      findAllRules(item.children, result)\r\n    }\r\n  })\r\n\r\n  return result\r\n}\r\n\r\nclass Preview extends React.Component<PropType, StateType> {\r\n  modal: React.RefObject<Modal>\r\n  ref: React.RefObject<HTMLDivElement>\r\n\r\n  constructor(props: PropType) {\r\n    super(props)\r\n    this.modal = React.createRef()\r\n    this.ref = React.createRef()\r\n\r\n    this.state = {\r\n      visible: false,\r\n      formData: {}\r\n    }\r\n  }\r\n\r\n  preview = (): void => {\r\n    this.setState({\r\n      visible: true\r\n    })\r\n  }\r\n\r\n  showData = () => {\r\n    const { formData } = this.state\r\n    console.info('form data:', formData)\r\n  }\r\n\r\n  onChange = (formData: any) => {\r\n    this.setState({\r\n      formData\r\n    })\r\n  }\r\n\r\n  handleCancel = (e: any) => {\r\n    this.setState({\r\n      visible: false\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { jsonSchema } = this.props\r\n    const { formData } = this.state\r\n    const rules = findAllRules(jsonSchema || [])\r\n\r\n    return jsonSchema && (\r\n      <div className={styles.preview}>\r\n        <Button type=\"link\" size=\"small\" onClick={this.preview}>预览</Button>\r\n        <Modal\r\n          title=\"页面预览\"\r\n          visible={this.state.visible}\r\n          onCancel={this.handleCancel}\r\n          okText=\"获取数据\"\r\n          onOk={this.showData}\r\n          destroyOnClose\r\n          width=\"100%\"\r\n          style={{top: 0}}\r\n          ref={this.modal}\r\n        >\r\n          <AntRender\r\n            propSchema={jsonSchema}\r\n            formData={formData}\r\n            rules={rules}\r\n            onChange={this.onChange}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Preview\r\n","import React from 'react'\r\nimport { Button, Input, Modal, message } from 'antd'\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from 'mobx-react'\r\nimport JsonView from '../json-view'\r\nimport History from './History'\r\nimport Preview from './Preview'\r\nimport { Store } from '../../store'\r\nimport styles from './index.module.less'\r\n\r\nconst { TextArea } = Input\r\n\r\ntype CompStateType = {\r\n  showJson: boolean,\r\n  jsonData: object\r\n  showImport: boolean,\r\n  jsonImported: string,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass Center extends React.Component<{\r\n  rootStore?: Store\r\n}, CompStateType> {\r\n  constructor(props: {\r\n    rootStore?: Store\r\n  }) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      showJson: false,\r\n      jsonData: {},\r\n      showImport: false,\r\n      jsonImported: '',\r\n    }\r\n  }\r\n\r\n  importJson = (): void => {\r\n    this.setState({\r\n      showImport: true,\r\n      jsonImported: ''\r\n    })\r\n  }\r\n\r\n  // 执行配置数据导入\r\n  doImport = (): void => {\r\n    const store = this.props.rootStore\r\n\r\n    let jsonObj = null\r\n\r\n    try {\r\n      jsonObj = JSON.parse(this.state.jsonImported)\r\n    } catch(e) {\r\n      console.warn(e.message)\r\n      message.error('无效的 JSON 格式，请检查输入')\r\n      return\r\n    }\r\n\r\n    store!.loadElements(jsonObj)\r\n    this.setState({\r\n      showImport: false\r\n    })\r\n  }\r\n\r\n  generateJson = (): void => {\r\n    this.setState({\r\n      jsonData: this.props.rootStore!.jsonData,\r\n      showJson: true\r\n    })\r\n  }\r\n\r\n  hideJson = (): void => {\r\n    this.setState({\r\n      showJson: false\r\n    })\r\n  }\r\n\r\n  doCopy = (): void => {\r\n    const { jsonData } = this.state\r\n    navigator.clipboard.writeText(JSON.stringify(jsonData))\r\n    message.success('已将此配置复制到粘贴板')\r\n  }\r\n\r\n  render() {\r\n    const dlgStyle = {\r\n      height: '425px', overflow: 'auto'\r\n    }\r\n\r\n    const store = this.props.rootStore!\r\n\r\n    return (\r\n      <div className={styles.menulist}>\r\n        <Button type=\"link\" size=\"small\" onClick={this.importJson}>导入配置</Button>\r\n        <Button type=\"link\" size=\"small\" onClick={this.generateJson}>生成配置</Button>\r\n        <History />\r\n        <div className={styles.right}>\r\n          <Preview jsonSchema={toJS(store.jsonData)} />\r\n        </div>\r\n        <Modal\r\n          title=\"导入配置\"\r\n          cancelText=\"关闭\"\r\n          okText=\"导入\"\r\n          centered\r\n          visible={this.state.showImport}\r\n          onOk={this.doImport}\r\n          onCancel={() => this.setState({ showImport: false})}\r\n          bodyStyle={dlgStyle}\r\n        >\r\n          <TextArea\r\n            className={styles.import_text}\r\n            value={this.state.jsonImported}\r\n            onChange={(e) => this.setState({ jsonImported: e.target.value})}\r\n          />\r\n        </Modal>\r\n        <Modal\r\n          title=\"生成配置\"\r\n          cancelText=\"关闭\"\r\n          okText=\"复制\"\r\n          centered\r\n          visible={this.state.showJson}\r\n          onOk={this.doCopy}\r\n          onCancel={this.hideJson}\r\n          bodyStyle={dlgStyle}\r\n        >\r\n          <JsonView json={this.state.jsonData} />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Center\r\n","import React, { ReactElement } from 'react'\r\nimport { observer,inject } from \"mobx-react\"\r\nimport { Store } from '../../../store'\r\nimport eventBus, { EventTypes } from '../../../core/utils/eventBus'\r\nimport IElement from '../../../core/element/IElement'\r\nimport { POINT } from '../../../types'\r\nimport styles from './index.module.less'\r\n\r\ninterface OwnProps {\r\n  // elements: Array<ElementOption>,\r\n  rootStore?: Store\r\n}\r\n\r\ninterface OwnState {\r\n  // elements: Array<ElementOption>,\r\n  visible: boolean,\r\n  point?: POINT,\r\n  element?: IElement,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ContextMenu extends React.Component<OwnProps, OwnState> {\r\n  ref: React.RefObject<HTMLDivElement>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n\r\n    this.ref = React.createRef()\r\n    this.state = {\r\n      visible: false,\r\n    }\r\n  }\r\n\r\n  showMenu = (e : { point: POINT, element: IElement }) => {\r\n    this.setState({\r\n      visible: true,\r\n      point: e.point,\r\n      element: e.element\r\n    }, () => {\r\n      setTimeout(() => {\r\n        const current = this.state.point!\r\n        const adjusted = this.adjustPos(e.point)\r\n        if (adjusted.x !== current.x || adjusted.y !== current.y) {\r\n          this.setState({\r\n            point: adjusted\r\n          })\r\n        }\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  hideMenu = () => {\r\n    this.setState({\r\n      visible: false,\r\n      point: undefined,\r\n      element: undefined\r\n    })\r\n  }\r\n\r\n  onBodyClick = (e: any) => {\r\n    if (this.ref.current && this.ref.current!.contains(e.target)) {\r\n      return\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  componentWillMount() {\r\n    eventBus.addListener(EventTypes.CONTEXT_MENU, this.showMenu)\r\n    document.addEventListener('click', this.onBodyClick, false)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    eventBus.removeListener(EventTypes.CONTEXT_MENU, this.showMenu)\r\n    document.removeEventListener('click', this.onBodyClick, false)\r\n  }\r\n\r\n  /**\r\n   * 根据窗口调整弹出框的位置\r\n   * @param pointer 当前位置\r\n   */\r\n  adjustPos(current: POINT): POINT {\r\n    const { current: box } = this.ref\r\n    if (!box) {\r\n      return { x: 0, y: 0}\r\n    }\r\n\r\n    const currentRect = box.getBoundingClientRect()\r\n    const { left, top, right, bottom } = currentRect\r\n    const { clientWidth, clientHeight} = document.documentElement\r\n\r\n    let retX = left\r\n    let retY = top\r\n\r\n    if (bottom > clientHeight) {\r\n      retY = top - bottom + clientHeight\r\n    }\r\n\r\n    if (right > clientWidth) {\r\n      retX = left - right + clientWidth\r\n    }\r\n\r\n    return { x: retX, y: retY }\r\n  }\r\n\r\n  onDel = (e: any) => {\r\n    if (this.state.element) {\r\n      this.props.rootStore!.removeElement(this.state.element)\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  onCopy = () => {\r\n    if (this.state.element) {\r\n      this.props.rootStore!.cloneElement(this.state.element)\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  render(): ReactElement | null {\r\n    const { point, element } = this.state\r\n\r\n    if (!point || !element) {\r\n      return null\r\n    }\r\n\r\n    const { x, y } = point\r\n\r\n    const menuStyle = {\r\n      transform: `translate3d(${x}px, ${y}px, 0)`\r\n    }\r\n\r\n    return this.state.visible ? (\r\n      <div className={styles.contextmenu}>\r\n        <div className={styles.menu_panel} style={menuStyle} ref={this.ref}>\r\n          <div className={styles.menu_panel__header}>\r\n            <span className={styles.menu_panel__header__type}>{element.type}</span>\r\n            {\r\n              element.name && (<span className={styles.menu_panel__header__name}> | {element.name}</span>)\r\n            }\r\n          </div>\r\n          <ul className={styles.menu_panel__body}>\r\n            <li className={styles.menu_panel__item} onClick={this.onDel}>删除</li>\r\n            <li className={styles.menu_panel__item} onClick={this.onCopy}>复制</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    ) : null\r\n  }\r\n}\r\n\r\nexport default ContextMenu\r\n","import React, { ReactElement } from 'react'\r\nimport { observer,inject } from \"mobx-react\"\r\nimport { Store } from '../../store'\r\nimport ElementControl from '../../core/element/ElementControl'\r\nimport { ElementProvider } from '../../core/element/ElementContext'\r\nimport ContextMenu from './contextmenu'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\nimport styles from './index.module.less'\r\n\r\ninterface OwnProps {\r\n  // elements: Array<ElementOption>,\r\n  rootStore?: Store\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass DesignPanel extends React.Component<OwnProps> {\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange(e: React.ChangeEvent, name: string) {\r\n    const { rootStore } = this.props\r\n    rootStore && rootStore.handleFormChangeEvent(e, name)\r\n  }\r\n\r\n  render(): ReactElement {\r\n    const { rootStore } = this.props\r\n    const { placeholder } = rootStore!\r\n    // const elements = rootStore!.elements\r\n\r\n    const page = rootStore!.rootElement\r\n\r\n    const placeholderStyle = placeholder ? {\r\n      width: `${placeholder.position.width}px`,\r\n      height: `${placeholder.position.height}px`,\r\n      transform: `translate3d(${placeholder.position.x}px, ${placeholder.position.y}px, 0)`\r\n    } : {\r\n      opacity: 0\r\n    }\r\n\r\n    return (\r\n      <div className={styles.panel}>\r\n        <ElementProvider\r\n          value={{\r\n            mode: RENDER_MODE_DESIGN,\r\n            validateRules: rootStore!.validateRules,\r\n            onChange: this.onChange\r\n          }}\r\n        >\r\n          <ElementControl\r\n            element={page}\r\n            renderOption={{withBox: true, withLabel: true}}\r\n          />\r\n          <div className={styles.placeholder} style={placeholderStyle}></div>\r\n          <ContextMenu />\r\n        </ElementProvider>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DesignPanel\r\n","import React from 'react'\r\nimport Menus from './menus'\r\nimport DesignPanel from '../design-panel'\r\nimport styles from './index.module.less'\r\n\r\nclass Center extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className={styles.menus}>\r\n          <Menus />\r\n        </div>\r\n        <DesignPanel></DesignPanel>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Center\r\n","import React, { SFC } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { observable } from 'mobx'\r\nimport { JsonFormat, CommonPropType, StaticPropsType, RECT, RuleItem, ModelType } from '../../types'\r\nimport ElementOption from '../ElementOption'\r\nimport ElementCategory from './ElementCategory'\r\nimport factory from '../ElementFactory'\r\nimport IElement, { RenderOption, ElementContructor } from './IElement'\r\nimport { getItem } from './RenderCache'\r\nimport eventBus from '../utils/eventBus'\r\n// import { triggerLayoutChange } from '../utils/index'\r\nimport { EventEmitter } from 'events'\r\n\r\nexport default abstract class Element implements IElement {\r\n  private componentCtor: typeof React.Component | SFC | null = null\r\n  private propsCache: Map<string, CommonPropType> = new Map()\r\n  public eventBus: EventEmitter = eventBus\r\n\r\n  @observable public key: string\r\n  @observable public value?: any\r\n  @observable public name?: string\r\n  @observable public dataType?: ModelType\r\n  @observable public children?: Array<IElement>\r\n  @observable public parent?: IElement | null\r\n  @observable public props?: CommonPropType\r\n  @observable public rules?: Array<RuleItem>\r\n\r\n  static category: ElementCategory = ElementCategory.BASIC\r\n  static icon: string = 'file'\r\n  static displayName: string = ''\r\n  static type:string = ''\r\n  /**\r\n   * 控件默认的属性列表（包含默认值）\r\n   */\r\n  static props: StaticPropsType = []\r\n\r\n  constructor(option: ElementOption) {\r\n    this.key = option.key || ''\r\n    // this.type = this.ctor().type\r\n    this.name = option.name\r\n    this.dataType = option.dataType\r\n    this.rules = option.rules || []\r\n\r\n    this.children = option.children && option.children.map(item => factory.createElement(item, this))\r\n    this.parent = null\r\n\r\n    const defaultProps = this.defaultProps()\r\n    const defaultPropVals: {[key: string]: any} = {}\r\n\r\n    if (defaultProps && defaultProps.length > 0) {\r\n      defaultProps.forEach(item => {\r\n        if (item && item.name) {\r\n          item.name && this.propsCache.set(item.name, item)\r\n          defaultPropVals[item.name] = item.default\r\n        }\r\n      })\r\n    }\r\n\r\n    this.props = Object.assign({}, defaultPropVals, option.props)\r\n  }\r\n\r\n  get type() {\r\n    return this.ctor().type\r\n  }\r\n\r\n  // 转为 json 表示格式\r\n  jsonData(): JsonFormat {\r\n    const ret: JsonFormat = {\r\n      key: this.key,\r\n      type: this.type,\r\n      props: this.props,\r\n      name: this.name,\r\n      rules: this.rules,\r\n      dataType: this.dataType,\r\n    }\r\n\r\n    if (this.children) {\r\n      ret.children = this.children.map(item => item.jsonData())\r\n    }\r\n\r\n    return JSON.parse(JSON.stringify(ret))\r\n  }\r\n\r\n  // 是否允许拖动\r\n  canDrag(): boolean {\r\n    return true\r\n  }\r\n\r\n  // 是否允许将其拖入其他控件\r\n  canDropTo(target: IElement): boolean {\r\n    return true\r\n  }\r\n\r\n  // 是否允许将其他控件拖入\r\n  canBeDroped(target?: IElement): boolean {\r\n    return false\r\n  }\r\n\r\n  // 是否允许删除此控件\r\n  canRemove(): boolean {\r\n    return true\r\n  }\r\n\r\n  // 在 _render 元素之前渲染的东东\r\n  renderBefore(props: any, renderOption?: RenderOption): React.ReactElement | null {\r\n    return null\r\n  }\r\n\r\n  // 在 _render 元素之后渲染的东东\r\n  renderAfter(props: any, renderOption?: RenderOption): React.ReactElement | null {\r\n    return null\r\n  }\r\n\r\n  // render 之前对 props 进行预处理\r\n  prepareProps(props: any): any {\r\n    return props\r\n  }\r\n\r\n  // 获取渲染控件\r\n  abstract _getComponent(): typeof React.Component | SFC<any>\r\n\r\n  getComponent(): typeof React.Component | SFC {\r\n    if (!this.componentCtor) {\r\n      this.componentCtor = this._getComponent()\r\n    }\r\n\r\n    return this.componentCtor\r\n  }\r\n\r\n  // 获取控件所属类的定义\r\n  ctor(): ElementContructor {\r\n    return this.constructor as ElementContructor\r\n  }\r\n\r\n  /**\r\n   * 是否为行内元素\r\n   */\r\n  isInline(): boolean {\r\n    return !!this.ctor().inline\r\n  }\r\n\r\n  get shouldCheckDataType(): boolean {\r\n    return !!this.ctor().checkDataType\r\n  }\r\n\r\n  // 获取控件的默认属性值\r\n  defaultProps(): StaticPropsType {\r\n    // console.log('defaultProps', this.ctor().props)\r\n    return this.ctor().props || []\r\n  }\r\n\r\n  // 获取属性类型\r\n  getPropType(name: string): string {\r\n    const prop = this.propsCache.get(name)\r\n    return (prop && prop.dataType) || 'string'\r\n  }\r\n\r\n  // get real rendered dom element\r\n  getRenderedDom(): HTMLElement | undefined {\r\n    const component = getItem(this.key)\r\n    if (component) {\r\n      const domNode = ReactDOM.findDOMNode(component.current) as HTMLElement\r\n      return domNode\r\n    }\r\n  }\r\n\r\n  getClientRect() {\r\n    const dom = this.getRenderedDom()\r\n    if (dom) {\r\n      return dom.getBoundingClientRect() as RECT\r\n    }\r\n\r\n    return {x: 0, y: 0}\r\n  }\r\n}\r\n","import { StaticMemberDeco } from \"../types\"\r\nimport IElement from \"./element/IElement\"\r\nimport React from \"react\"\r\n\r\n/**\r\n * 为 class 增加静态成员\r\n */\r\nexport const staticMembers = (members: StaticMemberDeco) => {\r\n  return function(target: any) {\r\n    for (let key in members) {\r\n      target[key] = (members as any)[key]\r\n    }\r\n  }\r\n}\r\n\r\ntype DropToType = string | Array<string>\r\n\r\n/**\r\n * 指定可以拖入的其他组件的类型，参数为空表示允许任何类型\r\n * @param source 控件类型，多个类型可用数组表示，字符串以 ! 开头表示排除此控件类型\r\n */\r\nexport const canBeDroped = (source?: DropToType) => {\r\n  const checkTypes: Array<string> = source ? (Array.isArray(source) ? source : [source]) : []\r\n\r\n  return function(target: any) {\r\n    target.prototype.canBeDroped = function(element: IElement) {\r\n      if (!element) { // 若参数为空，默认返回 true\r\n        return true\r\n      }\r\n\r\n      const targetType = element.ctor().type\r\n\r\n      return checkTypes.every(item => {\r\n        if (item.charAt(0) === '!') {\r\n          return item.substring(1) !== targetType\r\n        } else {\r\n          return item === targetType\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 限制拖动后可放置的容器类型，参数为空表示允许任何类型\r\n * @param container 控件类型，多个类型可用数组表示，字符串以 ! 开头表示排除此控件类型\r\n */\r\nexport const canDropTo = (container?: DropToType) => {\r\n  const checkTypes: Array<string> = container ? (Array.isArray(container) ? container : [container]) : []\r\n\r\n  return function(target: any) {\r\n    /**\r\n     * 判断是否可以拖放到目标容器内\r\n     */\r\n    target.prototype.canDropTo = function(element: IElement) {\r\n      const targetType = element.ctor().type\r\n\r\n      return checkTypes.every(item => {\r\n        if (item.charAt(0) === '!') {\r\n          return item.substring(1) !== targetType\r\n        } else {\r\n          return item === targetType\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 部分组件是函数式，无法统一处理 ref,使用此修饰器将其转为 class 组件\r\n */\r\nexport const sfcToCls = (Target: React.ComponentType) => {\r\n  return class extends React.PureComponent {\r\n    render() {\r\n      const { props } = this\r\n      return <Target {...props} />\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '普通文本',\r\n  category: ElementCategory.BASIC,\r\n  type: 'plain-text',\r\n  icon: 'file-text',\r\n  props: [{ // 右侧属性面板中可以编辑的属性列表\r\n    name: 'children',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '文本',\r\n      rows: 4,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '普通文本'\r\n  }]\r\n})\r\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\r\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component {\r\n      render() {\r\n        return <p {...this.props}></p>\r\n      }\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '链接',\r\n  category: ElementCategory.BASIC,\r\n  type: 'link',\r\n  icon: 'link',\r\n  props: [{ // 右侧属性面板中可以编辑的属性列表\r\n    name: 'children',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '链接文本',\r\n      rows: 2,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '点击跳转'\r\n  }, { // 右侧属性面板中可以编辑的属性列表\r\n    name: 'href',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '链接地址',\r\n      rows: 4,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '#'\r\n  }, {\r\n    name: 'target',\r\n    type: 'select',\r\n    props: {\r\n      label: '打开方式',\r\n      options: [\r\n        { label: '_blank', value: '_blank' },\r\n        { label: '_self', value: '_self' },\r\n        { label: '_parent', value: '_parent' },\r\n        { label: '_top', value: '_top' },\r\n      ]\r\n    },\r\n    default: '_blank',\r\n    dataType: 'string'\r\n  }]\r\n})\r\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\r\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component {\r\n      render() {\r\n      return <a {...this.props}>{this.props.children}</a>\r\n      }\r\n    }\r\n  }\r\n}\r\n","import React, { Component, SFC } from 'react'\r\nimport { Form } from 'antd'\r\nimport Schema from 'async-validator'\r\nimport Element from \"../../core/element/Element\"\r\nimport { canBeDroped, staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { ElementConsumer } from '../../core/element/ElementContext'\r\nimport { RuleItem, VALIDATE_STATUS } from '../../types'\r\nimport { parseValue } from '../../core/utils'\r\n\r\ntype ControlProps = {\r\n  // rootStore: Store,\r\n  name: string,\r\n  label: string,\r\n  dataType: string,\r\n  value?: any,\r\n  className?: string,\r\n  onClick?: Function\r\n}\r\n\r\ntype FormItemProps = {\r\n  name: string,\r\n  label: string,\r\n  className: string,\r\n  children: any,\r\n  validateRules?: RuleItem\r\n}\r\n\r\n/**\r\n * 高阶组件装饰器，封装表单控件统一行为：\r\n * - 注入 store\r\n * - 监听 change 事件\r\n */\r\nexport function formControl(target: Object, name: string, descriptor: TypedPropertyDescriptor<any>) {\r\n  const oldValue = descriptor.value\r\n  descriptor.value = function() {\r\n    const retComp = oldValue!.apply(this) as React.ComponentType\r\n    return wrapComponent(retComp)\r\n  }\r\n\r\n  return descriptor\r\n}\r\n\r\nclass FormItem extends React.Component<FormItemProps, {\r\n  validateStatus: VALIDATE_STATUS,\r\n  help: string\r\n}> {\r\n  constructor(props: FormItemProps) {\r\n    super(props)\r\n    this.state = {\r\n      validateStatus: '',\r\n      help: ''\r\n    }\r\n  }\r\n\r\n  onBlur = (e: any) => {\r\n    if (e && e.target && e.target.value !== undefined) {\r\n      const result = this.validate(e.target.value)\r\n      if (result) {\r\n        this.setState(result)\r\n      } else {\r\n        this.setState({\r\n          validateStatus: '',\r\n          help: ''\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  validate(value?: any): any {\r\n    const { name, validateRules } = this.props\r\n    if (value === undefined || !validateRules) {\r\n      return null\r\n    }\r\n\r\n    const rules = validateRules[name]\r\n    if (!rules || rules.length === 0) {\r\n      return null\r\n    }\r\n\r\n    if (rules[0].type) {\r\n      value = parseValue(value, rules[0].type)\r\n    }\r\n\r\n    const validator = new Schema({\r\n      [name]: rules\r\n    })\r\n    let result = null\r\n    validator.validate({[name]: value}, {\r\n      first: true, // when the first validation rule generates an error stop processed\r\n    }, (errors) => {\r\n      if (errors && errors.length > 0) {\r\n        result = {\r\n          validateStatus: 'error',\r\n          help: errors[0].message\r\n        }\r\n      }\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  render() {\r\n    const { label, className, children } = this.props\r\n    const { validateStatus, help } = this.state\r\n\r\n    const childrenWrapped = children && React.cloneElement(children, {\r\n      ...children.props,\r\n      onBlur: this.onBlur,\r\n    })\r\n\r\n    const validateProps = validateStatus ? {\r\n      validateStatus, help\r\n    } : null\r\n\r\n    return (\r\n      <Form.Item\r\n        label={label}\r\n        colon={false}\r\n        className={className}\r\n        {...validateProps}\r\n      >\r\n        {\r\n          childrenWrapped\r\n        }\r\n      </Form.Item>\r\n    )\r\n  }\r\n}\r\n\r\nexport function wrapComponent(Comp: typeof Component | SFC): typeof React.Component {\r\n  // @inject('rootStore')\r\n  // @observer\r\n  class RenderCls extends React.Component<ControlProps, {\r\n    needValidate: boolean\r\n  }> {\r\n    onChange = (e: any, name: string, callback?: Function) => {\r\n      const { dataType } = this.props\r\n      const value = e && e.target ? e.target.value : e\r\n      callback && callback(parseValue(value, dataType), name)\r\n    }\r\n\r\n    render() {\r\n      const { name, label, className, dataType, value: transferValue, ...props } = this.props\r\n\r\n      return (\r\n        <ElementConsumer>\r\n          {\r\n            ({ value, validateRules, onChange }) => (\r\n              <FormItem\r\n                name={name}\r\n                label={label}\r\n                className={className || ''}\r\n                validateRules={validateRules}\r\n              >\r\n                <Comp\r\n                  {...props}\r\n                  name={ name }\r\n                  value={value ? value[name] : transferValue}\r\n                  onChange={(e: React.ChangeEvent) => {\r\n                    this.onChange!(e, name, onChange)\r\n                  }}\r\n                />\r\n              </FormItem>\r\n            )\r\n          }\r\n        </ElementConsumer>\r\n      )\r\n    }\r\n  }\r\n\r\n  return RenderCls\r\n}\r\n\r\n@staticMembers({\r\n  displayName: '表单',\r\n  category: ElementCategory.FORM,\r\n  type: 'form',\r\n  icon: 'form',\r\n  props: [{\r\n    name: 'layout',\r\n    type: 'select',\r\n    props: {\r\n      label: '对齐方式',\r\n      options: [\r\n        { label: '水平', value: 'horizontal' },\r\n        { label: '垂直', value: 'vertical' },\r\n        { label: '内联', value: 'inline' }]\r\n    },\r\n    default: 'horizontal',\r\n  }, {\r\n    name: 'labelCol',\r\n    type: 'json',\r\n    props: {\r\n      label: '标签宽度'\r\n    },\r\n    default: { \"span\": 6 },\r\n    dataType: 'string'\r\n  }, {\r\n    name: 'wrapperCol',\r\n    type: 'json',\r\n    props: {\r\n      label: '内容宽度'\r\n    },\r\n    default: { \"span\": 14 },\r\n    dataType: 'object'\r\n  }]\r\n})\r\n@canBeDroped()\r\nclass InnerCls extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component<any> {\r\n      ref: any\r\n\r\n      constructor(props: any) {\r\n        super(props)\r\n        this.ref = React.createRef()\r\n      }\r\n\r\n      render() {\r\n        return (\r\n          <Form ref={this.ref} {...this.props}>\r\n          </Form>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  prepareProps(props: any) {\r\n    if (props.layout !== 'horizontal') {\r\n      props.labelCol = undefined\r\n      props.wrapperCol = undefined\r\n    }\r\n\r\n    return props\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { Input } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { formControl } from './Form'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\n@staticMembers({\r\n  displayName: '输入框',\r\n  category: ElementCategory.FORM,\r\n  type: 'input',\r\n  icon: 'edit',\r\n  checkDataType: true,\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '输入框',\r\n  }, {\r\n    name: 'type',\r\n    type: 'select',\r\n    props: {\r\n      label: '输入类型',\r\n      options: [\r\n        { label: '文本', value: 'text' },\r\n        { label: '密码', value: 'password' }\r\n      ]\r\n    },\r\n    default: 'text',\r\n  }, {\r\n    name: 'placeholder',\r\n    type: 'input',\r\n    props: {\r\n      label: '提示文字'\r\n    },\r\n    default: '请输入',\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return Input\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","// import React from 'react'\r\nimport { Input } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { formControl } from './Form'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\nconst { TextArea } = Input\r\n\r\n@staticMembers({\r\n  displayName: '文本域',\r\n  category: ElementCategory.FORM,\r\n  type: 'textarea',\r\n  icon: 'edit',\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '文本域',\r\n  }, {\r\n    name: 'placeholder',\r\n    type: 'input',\r\n    props: {\r\n      label: '提示文字'\r\n    },\r\n    default: '请输入',\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return TextArea\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import React from 'react'\r\nimport { Select } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport { formControl } from './Form'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\nconst { Option } = Select\r\n\r\n@staticMembers({\r\n  displayName: '下拉选择',\r\n  category: ElementCategory.FORM,\r\n  type: 'select',\r\n  icon: 'select',\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '下拉框',\r\n  }, { // 右侧属性面板中可以编辑的属性列表\r\n    name: 'options',\r\n    type: 'list',\r\n    props: {\r\n      label: '选项列表'\r\n    },\r\n    default: [\r\n      { value: 0, label: '选项一' },\r\n      { value: 1, label: '选项二' },\r\n      { value: 2, label: '选项三' },\r\n    ],\r\n    dataType: 'string'\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return function(props: any) {\r\n      const { options = [], ...innerProps} = props\r\n\r\n      return (\r\n        <Select {...innerProps}>\r\n          {\r\n            options.map((item: any) => (\r\n              <Option key={item.value} value={item.value}>{item.label}</Option>\r\n            ))\r\n          }\r\n        </Select>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { TreeSelect } from 'antd'\nimport Element from '../../core/element/Element'\nimport { staticMembers } from '../../core/decorator'\nimport { formControl } from './Form'\nimport ElementCategory from '../../core/element/ElementCategory'\n\n@staticMembers({\n  displayName: '树选择',\n  category: ElementCategory.FORM,\n  type: 'tree-select',\n  icon: 'cluster',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '树选择',\n  }, {\n    name: 'placeholder',\n    type: 'input',\n    props: {\n      label: '提示文字',\n    },\n    default: '',\n  }, {\n    name: 'treeData',\n    type: 'json',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      {\n        title: 'Node1',\n        value: '0-0',\n        key: '0-0',\n        children: [\n          {\n            title: 'Child Node1',\n            value: '0-0-1',\n            key: '0-0-1',\n          },\n          {\n            title: 'Child Node2',\n            value: '0-0-2',\n            key: '0-0-2',\n          },\n        ],\n      },\n      {\n        title: 'Node2',\n        value: '0-1',\n        key: '0-1',\n      },\n    ],\n    dataType: 'string'\n  }]\n})\nclass InnerCls extends Element {\n  @formControl\n  _getComponent() {\n    return TreeSelect\n  }\n}\n\nexport default InnerCls\n","import { Row } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { canBeDroped, staticMembers, canDropTo } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '行(栅格)',\r\n  category: ElementCategory.LAYOUT,\r\n  type: 'row',\r\n  icon: 'column-width',\r\n  props: [{\r\n    name: 'align',\r\n    type: 'select',\r\n    props: {\r\n      label: '垂直对齐',\r\n      options: [\r\n        { label: '顶部对齐', value: 'top' },\r\n        { label: '居中对齐', value: 'middle' },\r\n        { label: '底部对齐', value: 'bottom' }]\r\n    },\r\n    default: 'middle',\r\n    dataType: 'string'\r\n  }]\r\n})\r\n@canBeDroped('col')\r\n@canDropTo('!row') // 不能直接拖到另一个行控件内\r\nclass InnerCls extends Element {\r\n  _getComponent() {\r\n    return Row\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { Col } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers, canBeDroped, canDropTo } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '列(栅格)',\r\n  category: ElementCategory.LAYOUT,\r\n  type: 'col',\r\n  icon: 'column-height',\r\n  props: [{\r\n    name: 'span',\r\n    type: 'input',\r\n    props: {\r\n      label: '列宽'\r\n    },\r\n    default: 11,\r\n    dataType: 'number'\r\n  }, {\r\n    name: 'offset',\r\n    type: 'input',\r\n    props: {\r\n      label: '偏移'\r\n    },\r\n    default: 1,\r\n    dataType: 'number'\r\n  }]\r\n})\r\n@canDropTo('row') // 列控件只可被拖入行控件内\r\n@canBeDroped('!col') // 不可拖入其他列控件\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return Col\r\n  }\r\n}\r\n","import { Button } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '按钮',\n  category: ElementCategory.BASIC,\n  type: 'button',\n  icon: 'border',\n  inline: true, // 行内元素\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'children',\n    type: 'input',\n    props: {\n      label: '按钮文本'\n    },\n    default: '按钮',\n    dataType: 'string'\n  }, {\n    name: 'type',\n    type: 'select',\n    props: {\n      label: '风格',\n      options: [\n        { label: 'Primary', value: 'primary' },\n        { label: 'Dashed', value: 'dashed' },\n        { label: 'Danger', value: 'danger' },\n        { label: 'Link', value: 'link' },\n        { label: 'Default', value: 'default' },\n      ]\n    },\n    default: 'default',\n    dataType: 'string'\n  }, {\n    name: 'size',\n    type: 'radio',\n    props: {\n      label: '尺寸',\n      options: [\n        { label: 'L', value: 'large'},\n        { label: 'M', value: 'default'},\n        { label: 'S', value: 'small'}\n      ],\n      buttonStyle: 'solid'\n    },\n    default: 'default',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Button\n  }\n}\n","\nimport { Icon } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers, sfcToCls/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '图标',\n  category: ElementCategory.BASIC,\n  type: 'Icon',\n  icon: 'file-image',\n  inline: true, // 行内元素\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'type',\n    type: 'input',\n    props: {\n      label: '图标名称'\n    },\n    default: 'smile',\n    dataType: 'string'\n  }, {\n    name: 'spin',\n    type: 'switch',\n    props: {\n      label: '旋转动画'\n    },\n    default: false,\n    dataType: 'boolean'\n  }, {\n    name: 'rotate',\n    type: 'input',\n    props: {\n      label: '旋转角度'\n    },\n    default: 0,\n    dataType: 'number'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return sfcToCls(Icon)\n  }\n}\n","import React from 'react'\nimport { Radio } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '单选框',\n  category: ElementCategory.FORM,\n  type: 'radio',\n  icon: 'tablet',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '单选框',\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'list',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      { value: 0, label: '选项一'},\n      { value: 1, label: '选项二'},\n      { value: 2, label: '选项三'},\n    ],\n    dataType: 'string'\n  }, {\n    name: 'buttonStyle',\n    type: 'radio',\n    props: {\n      label: '按钮风格',\n      options: [\n        { value: '', label: '无'},\n        { value: 'solid', label: 'Solid'},\n        { value: 'outline', label: 'Outline'},\n      ],\n      buttonStyle: 'solid',\n    },\n    default: '',\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return function(props: any) {\n      const { options = [], ...other } = props\n\n      return props.buttonStyle ? (\n        <Radio.Group {...other} >\n          {\n            options.map((item: any) => (\n              <Radio.Button value={item.value} key={item.value}>{item.label}</Radio.Button>\n            ))\n          }\n        </Radio.Group>\n      ) : (\n        <Radio.Group {...props} />\n      )\n    }\n  }\n}\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\nconst CheckboxGroup = Checkbox.Group;\n\n@staticMembers({\n  displayName: '多选框',\n  category: ElementCategory.FORM,\n  type: 'checkbox',\n  icon: 'check-square',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '多选框',\n    dataType: 'string'\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'list',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      { value: 0, label: '选项一' },\n      { value: 1, label: '选项二' },\n      { value: 2, label: '选项三' },\n    ],\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return function (props: any) {\n      // console.log('checkbox props', props)\n      const { options = [], ...innerProps } = props\n\n      return (\n        <CheckboxGroup\n          options={options}\n          { ...innerProps }\n        />\n      )\n    }\n  }\n}\n","import React from 'react'\nimport { Switch } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '开关',\n  category: ElementCategory.FORM,\n  type: 'switch',\n  icon: 'switcher',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '开关',\n    dataType: 'string'\n  }, {\n    name: 'size',\n    type: 'radio',\n    props: {\n      label: '尺寸',\n      options: [\n        { label: 'M', value: 'default' },\n        { label: 'S', value: 'small' }\n      ],\n      buttonStyle: 'solid'\n    },\n    default: 'default',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return class extends React.Component<any> {\n      render() {\n        const { value, ...other } = this.props\n        const props = { ...other, checked: !!value }\n\n        return (\n          <Switch {...props} />\n        )\n      }\n    }\n  }\n\n  // prepareProps(props: any) {\n  //   const { value, ...other } = props\n  //   return { ...other, checked: !!value }\n  // }\n}\n","import { Cascader } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '级联选择',\n  category: ElementCategory.FORM,\n  type: 'cascader',\n  icon: 'diff',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '级联选择',\n    dataType: 'string'\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'json',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      {\n        value: 'zhejiang',\n        label: 'Zhejiang',\n        children: [\n          {\n            value: 'hangzhou',\n            label: 'Hangzhou',\n            children: [\n              {\n                value: 'xihu',\n                label: 'West Lake',\n              },\n            ],\n          },\n        ],\n      },\n      {\n        value: 'jiangsu',\n        label: 'Jiangsu',\n        children: [\n          {\n            value: 'nanjing',\n            label: 'Nanjing',\n            children: [\n              {\n                value: 'zhonghuamen',\n                label: 'Zhong Hua Men',\n              },\n            ],\n          },\n        ],\n      },\n    ],\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Cascader\n  }\n}\n","import { DatePicker } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '日期选择',\n  category: ElementCategory.FORM,\n  type: 'date_picker',\n  icon: 'calendar',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '日期选择',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return DatePicker\n  }\n}\n","\nimport { TimePicker } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '时间选择',\n  category: ElementCategory.FORM,\n  type: 'time_picker',\n  icon: 'clock-circle',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '时间选择',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return TimePicker\n  }\n}\n","import { Rate } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '评分',\n  category: ElementCategory.FORM,\n  type: 'rate',\n  icon: 'star',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '评分',\n    dataType: 'string'\n  }, {\n    name: 'count',\n    type: 'input',\n    props: {\n      label: '总数'\n    },\n    default: 5,\n    dataType: 'number'\n  }, {\n    name: 'defaultValue',\n    type: 'input',\n    props: {\n      label: '默认值'\n    },\n    default: 0,\n    dataType: 'number'\n  }, {\n    name: 'allowHalf',\n    type: 'switch',\n    props: {\n      label: '支持半选'\n    },\n    default: false,\n    dataType: 'boolean'\n  }]\n})\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Rate\n  }\n}\n","import { Slider } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '滑动输入条',\n  category: ElementCategory.FORM,\n  type: 'slider',\n  icon: 'column-width',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '滑动输入条',\n    dataType: 'string'\n  }, {\n    name: 'min',\n    type: 'input',\n    props: {\n      label: '最小值'\n    },\n    default: 0,\n    dataType: 'number'\n  }, {\n    name: 'max',\n    type: 'input',\n    props: {\n      label: '最大值'\n    },\n    default: 100,\n    dataType: 'number'\n  }, {\n    name: 'step',\n    type: 'input',\n    props: {\n      label: '步长'\n    },\n    default: 100,\n    dataType: 'number'\n  }, {\n    name: 'range',\n    type: 'switch',\n    props: {\n      label: '范围选择'\n    },\n    default: false,\n    dataType: 'boolean'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Slider\n  }\n}\n","import { Transfer } from 'antd'\nimport Element from '../../core/element/Element'\nimport { staticMembers } from '../../core/decorator'\nimport { formControl } from './Form'\nimport ElementCategory from '../../core/element/ElementCategory'\n\n// 默认数据\nconst mockData = []\nfor (let i = 0; i < 20; i++) {\n  mockData.push({\n    key: i.toString(),\n    title: `content${i + 1}`,\n    description: `description of content${i + 1}`,\n    disabled: i % 3 < 1,\n  })\n}\n\n@staticMembers({\n  displayName: '穿梭框',\n  category: ElementCategory.FORM,\n  type: 'transfer',\n  icon: 'cluster',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '穿梭框',\n  }, {\n    name: 'dataSource',\n    type: 'json',\n    props: {\n      label: '数据源'\n    },\n    default: mockData,\n    dataType: 'array'\n  }, {\n    name: 'leftLabel',\n    type: 'input',\n    props: {\n      label: '左侧标签',\n    },\n    default: '未选',\n  }, {\n    name: 'rightLabel',\n    type: 'input',\n    props: {\n      label: '右侧标签',\n    },\n    default: '已选',\n  }]\n})\nclass InnerCls extends Element {\n  prepareProps(props: any): any {\n    const { leftLabel, rightLabel, value, ...innerProps } = props\n    return {\n      ...innerProps,\n      titles: [ leftLabel, rightLabel ],\n      targetKeys: value,\n    }\n  }\n\n  @formControl\n  _getComponent() {\n    return Transfer\n  }\n}\n\nexport default InnerCls\n","\nimport { Menu } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '导航菜单',\n  category: ElementCategory.BASIC,\n  type: 'menu',\n  icon: 'menu',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Menu\n  }\n}\n","\nimport { Pagination } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '分页',\n  category: ElementCategory.BASIC,\n  type: 'pagination',\n  icon: 'copy',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Pagination\n  }\n}\n","\nimport { PageHeader } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '页头',\n  category: ElementCategory.BASIC,\n  type: 'page_header',\n  icon: 'radius-upleft',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return PageHeader\n  }\n}\n","/**\n * 导出所有控件类型\n */\nimport PlainText from './PlainText'\nimport Link from './Link'\nimport Input from './Input'\nimport TextArea from './TextArea'\nimport Select from './Select'\nimport TreeSelect from './TreeSelect'\nimport Row from './Row'\nimport Col from './Col'\nimport Form from './Form'\nimport Button from './Button'\nimport Icon from './Icon'\nimport Radio from './Radio'\nimport Checkbox from './Checkbox'\nimport Switch from './Switch'\nimport Cascader from './Cascader'\nimport DatePicker from './DatePicker'\nimport TimePicker from './TimePicker'\nimport Rate from './Rate'\nimport Slider from './Slider'\nimport Transfer from './Transfer'\n// import Affix from './Affix'\n// import Breadcrumb from './Breadcrumb'\n// import Dropdown from './Dropdown'\nimport Menu from './Menu'\nimport Pagination from './Pagination'\nimport PageHeader from './PageHeader'\nimport Steps from './Steps'\n// new-comp-import - 不要删除或修改此行，用于自动生成组件\nimport { ElementContructor } from '../../core/element/IElement'\n\nconst elements: Array<ElementContructor> = [\n  Icon,\n  PlainText,\n  Link,\n  Button,\n  Form,\n  Input,\n  TextArea,\n  Select,\n  TreeSelect,\n  Row,\n  Col,\n  Radio,\n  Checkbox,\n  Switch,\n  Cascader,\n  DatePicker,\n  TimePicker,\n  Slider,\n  Rate,\n  Transfer,\n  // Affix,\n  // Breadcrumb,\n  // Dropdown,\n  Menu,\n  Pagination,\n  PageHeader,\n  Steps,\n  // new-comp-list - 不要删除或修改此行，用于自动生成组件\n]\n\nexport default elements\n","\nimport { Steps } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '步骤条',\n  category: ElementCategory.BASIC,\n  type: 'steps',\n  icon: 'arrow-right',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Steps\n  }\n}\n","/**\r\n * 元素初始化参数\r\n */\r\nimport {OptionType, CommonPropType, RuleItem, ModelType} from '../types'\r\nimport { genKey } from './utils'\r\n\r\nexport default class ElementOption {\r\n  key?: string\r\n  type: string\r\n  name?:string\r\n  dataType?: ModelType // 允许绑定的数据类型\r\n  rules?: Array<RuleItem> // 校验规则\r\n  props?: CommonPropType\r\n  children?: Array<ElementOption>\r\n\r\n  constructor(option: OptionType) {\r\n    this.type = option.type\r\n    this.props = option.props\r\n    this.name = option.name\r\n    this.rules = option.rules || []\r\n    this.dataType = option.dataType\r\n    this.children = option.children\r\n    // 若没有定义 key，则随机生成\r\n    this.key = option.key ? option.key : genKey()\r\n  }\r\n\r\n  /**\r\n   * 解析外部配置并创建 ElementOption 列表\r\n   */\r\n  static loadOptions(rawOptions: Array<OptionType> | OptionType): Array<ElementOption> {\r\n    if (!rawOptions) {\r\n      return []\r\n    }\r\n\r\n    if (!Array.isArray(rawOptions)) {\r\n      rawOptions = [rawOptions]\r\n    }\r\n\r\n    return rawOptions.reduce((ret: Array<ElementOption>, option: OptionType) => {\r\n      if (option) {\r\n        const elementOption = new ElementOption({\r\n          key: option.key,\r\n          type: option.type,\r\n          name: option.name,\r\n          props: option.props,\r\n          dataType: option.dataType,\r\n          children: option.children ? ElementOption.loadOptions(option.children) : undefined\r\n        })\r\n\r\n        ret.push(elementOption)\r\n      }\r\n\r\n      return ret\r\n    }, [])\r\n  }\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { Icon } from 'antd'\r\nimport {DragSource, DragSourceMonitor, DragSourceConnector, ConnectDragSource} from 'react-dnd'\r\nimport {DragTypes} from '../../configs'\r\nimport styles from './index.module.less'\r\nimport { ElementContructor } from '../../core/element/IElement'\r\nimport ElementOption from '../../core/ElementOption'\r\nimport { DragItemType, PlainObjectType } from '../../types'\r\nimport { Store } from '../../store'\r\nimport { observer, inject } from 'mobx-react'\r\n\r\ninterface ConnectedProps {\r\n  isDragging: boolean,\r\n  connectDragSource: ConnectDragSource\r\n}\r\n\r\ntype DragProps = {\r\n  control: ElementContructor,\r\n  rootStore?: Store,\r\n  // element: Element\r\n}\r\n\r\ntype AllProps = DragProps & ConnectedProps\r\n\r\nconst spec = {\r\n  beginDrag(props: DragProps, monitor: DragSourceMonitor, component: ControlItem): DragItemType {\r\n    const ControlCtor = props.control\r\n    const defaultProps = ControlCtor.props || []\r\n\r\n    const newElem = new ControlCtor(new ElementOption({ // 创建默认元素\r\n      type: ControlCtor.type,\r\n      props: {\r\n        label: ControlCtor.displayName,\r\n        ...defaultProps.reduce((ret: PlainObjectType, item) => {\r\n          if (item.name && item.default) {\r\n            ret[item.name] = item.default\r\n          }\r\n          return ret\r\n        }, {})\r\n      }\r\n    }))\r\n\r\n    if (newElem.canBeDroped()) {\r\n      newElem.children = []\r\n    }\r\n\r\n    return {\r\n      element: newElem\r\n    }\r\n  },\r\n  endDrag(props: DragProps, monitor: DragSourceMonitor, component: ControlItem) {\r\n    const store: Store | undefined = component.props.rootStore\r\n    const droped = monitor.getDropResult()\r\n    if (!droped) {\r\n      store!.clearHover()\r\n      return\r\n    }\r\n\r\n    let { placeholder } = store!\r\n    if (!placeholder) {\r\n      return\r\n    }\r\n\r\n    const from = monitor.getItem().element\r\n\r\n    if (from) {\r\n      store!.moveElement(\r\n        from,\r\n        placeholder\r\n      )\r\n    }\r\n\r\n    store!.clearHover()\r\n  }\r\n}\r\n\r\nconst connect = function(connect: DragSourceConnector, monitor: DragSourceMonitor): ConnectedProps {\r\n  return {\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging()\r\n  }\r\n}\r\n\r\nclass ControlItem extends React.Component<AllProps> {\r\n  render(): ReactElement<{props: AllProps}> | null {\r\n    const { control, connectDragSource } = this.props\r\n\r\n    return connectDragSource(\r\n      <div className={styles.item}>\r\n        <Icon type={control.icon} />\r\n        <span className={styles.item__title}>{ control.displayName}</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DragSource(DragTypes.CARD, spec, connect)(inject('rootStore')(observer(ControlItem)))\r\n","import React from 'react'\r\nimport elements from '../../controls/antd'\r\nimport ElementCategory, { categoryList } from '../../core/element/ElementCategory'\r\nimport styles from './index.module.less'\r\nimport { ElementContructor } from '../../core/element/IElement'\r\nimport ControlItem from './ControlItem'\r\n\r\nexport default class LeftPanel extends React.Component {\r\n  render() {\r\n    const categoryElements: Map<ElementCategory, [ElementContructor]> = elements.reduce((ret: Map<ElementCategory, [ElementContructor]>, item) => {\r\n      const category = item.category\r\n\r\n      if (ret.has(category)) {\r\n        ret.get(category)!.push(item)\r\n      } else {\r\n        ret.set(category, [item])\r\n      }\r\n\r\n      return ret\r\n    }, new Map())\r\n\r\n    return (\r\n      <div className={styles.panel}>\r\n        {\r\n          categoryList.map(cat => (\r\n            <div key={cat.title} className={styles.categroy}>\r\n              <div className={styles.categroy__title}>{cat.title}</div>\r\n              <div className={styles.categroy__body}>\r\n                {\r\n                  categoryElements.get(cat.type) ? categoryElements.get(cat.type)!.map(elem => (\r\n                    <ControlItem key={elem.displayName} control={elem} />\r\n                  )) : null\r\n                }\r\n              </div>\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ControlList from './ControlList'\r\nimport styles from './index.module.less'\r\n\r\nexport default class LeftPanel extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.panel}>\r\n        \r\n        <ControlList></ControlList>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { ReactElement, MemoExoticComponent } from 'react'\r\nimport { Form } from 'antd'\r\nimport Element from '../../../core/element/Element'\r\nimport IElement, { RenderOption } from '../../../core/element/IElement'\r\nimport ElementControl from '../../../core/element/ElementControl'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../../store'\r\nimport { PROP_NAME_PREFIX } from '../../../configs'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass PropComponent extends React.Component<{\r\n  elements?: IElement[],\r\n  renderOptoin?: RenderOption,\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const renderProps = this.props.renderOptoin || {}\r\n    const { elements, rootStore } = this.props\r\n    const valueData = rootStore!.selectedElement!.props\r\n\r\n    // console.log('prop elements', elements)\r\n\r\n    return (\r\n      <Form labelCol={{span: 8}} wrapperCol={{span: 16}}>\r\n        {\r\n          elements && elements!.map(item => (\r\n            <ElementControl\r\n              key={item.key}\r\n              element={item}\r\n              renderOption={{\r\n                withBox: false, withLabel: true, props: {\r\n                  name: `${PROP_NAME_PREFIX}${item.name}`,\r\n                  value: valueData && item.name && (item.name in valueData) ? valueData[item.name] : ''\r\n                }\r\n              }}\r\n              {...renderProps}\r\n            />\r\n          ))\r\n        }\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nlet MemoedComp: MemoExoticComponent<typeof PropComponent> | null = null\r\n\r\nclass PropElement extends Element {\r\n  render(renderOption?:RenderOption): ReactElement {\r\n    let Comp = this.getComponent()\r\n    if (!MemoedComp) {\r\n      Comp = React.memo(Comp)\r\n    }\r\n\r\n    return (\r\n      <Comp renderOptoin={renderOption} elements={this.children} />\r\n    )\r\n  }\r\n\r\n  _getComponent(): typeof PropComponent {\r\n    return PropComponent\r\n  }\r\n}\r\n\r\nexport default PropElement\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../../store'\r\nimport PropElement from './PropElement'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ControlProps extends React.Component<{\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const selectedElement = this.props.rootStore!.selectedElement\r\n\r\n    const propElement = new PropElement({\r\n      type: 'prop',\r\n      children: (selectedElement!.defaultProps() || []).slice().filter(item => item.type !== 'null')\r\n    })\r\n\r\n    return propElement.render()\r\n  }\r\n}\r\n\r\nexport default ControlProps\r\n","/**\r\n * define style render props,\r\n * follow json-schema\r\n */\r\nconst STYLE_DEFS: any = {\r\n  name: 'styles',\r\n  propsSchema: {\r\n    type: 'object',\r\n    properties: {\r\n      colors: {\r\n        title: 'Colors',\r\n        description: '颜色',\r\n        type: 'object',\r\n        properties: {\r\n          color: {\r\n            title: '前景色',\r\n            type: 'string',\r\n          },\r\n          backgroundColor: {\r\n            title: '背景色',\r\n            type: 'string',\r\n          },\r\n          borderColor: {\r\n            title: '边框颜色',\r\n            type: 'string',\r\n          }\r\n        }\r\n      },\r\n      texts: {\r\n        title: 'Text',\r\n        description: '文本',\r\n        type: 'object',\r\n        properties: {\r\n          fontFamily: {\r\n            title: '字体',\r\n            type: 'string',\r\n          },\r\n          fontSize: {\r\n            title: '字体大小',\r\n            type: 'string',\r\n          },\r\n          fontStyle: {\r\n            title: '字体样式',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'italic', 'oblique', 'initial', 'inherit']\r\n          },\r\n          fontWeight: {\r\n            title: '字体粗细',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'bold', 'bolder', 'lighter']\r\n          },\r\n          textAlign: {\r\n            title: '左右对齐',\r\n            type: 'string',\r\n            enum: ['', 'left', 'center', 'right'],\r\n          },\r\n          whiteSpace: {\r\n            title: '空白换行',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap']\r\n          },\r\n          textDecorationLine: {\r\n            title: '线条',\r\n            type: 'string',\r\n            enum: ['', 'none', 'underline', 'overline', 'line-through']\r\n          },\r\n          textDecorationColor: {\r\n            title: '线条颜色',\r\n            type: 'string',\r\n          },\r\n          textDecorationStyle: {\r\n            title: '线条风格',\r\n            type: 'string',\r\n            enum: ['', 'solid', 'double', 'dotted', 'dashed', 'wavy']\r\n          },\r\n        }\r\n      },\r\n      margins: {\r\n        title: 'Margins',\r\n        description: '外边距',\r\n        type: 'object',\r\n        properties: {\r\n          marginTop: {\r\n            title: '上边距',\r\n            type: 'string'\r\n          },\r\n          marginBottom: {\r\n            title: '下边距',\r\n            type: 'string'\r\n          },\r\n          marginLeft: {\r\n            title: '左边距',\r\n            type: 'string'\r\n          },\r\n          marginRight: {\r\n            title: '右边距',\r\n            type: 'string'\r\n          }\r\n        }\r\n      },\r\n      paddings: {\r\n        title: 'Paddings',\r\n        description: '内边距',\r\n        type: 'object',\r\n        properties: {\r\n          paddingTop: {\r\n            title: '上边距',\r\n            type: 'string'\r\n          },\r\n          paddingBottom: {\r\n            title: '下边距',\r\n            type: 'string'\r\n          },\r\n          paddingLeft: {\r\n            title: '左边距',\r\n            type: 'string'\r\n          },\r\n          paddingRight: {\r\n            title: '右边距',\r\n            type: 'string'\r\n          }\r\n        }\r\n      },\r\n      borders: {\r\n        title: 'Border',\r\n        description: '边框',\r\n        type: 'object',\r\n        properties: {\r\n          borderWidth: {\r\n            title: '宽度',\r\n            type: 'string',\r\n          },\r\n          borderColor: {\r\n            title: '颜色',\r\n            type: 'string',\r\n          },\r\n          borderStyle: {\r\n            title: '样式',\r\n            type: 'string',\r\n            enum: ['', 'solid', 'none', 'hidden', 'dotted', 'dashed', 'double', 'groove', 'ridge', 'inset', 'outset']\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    colors: {\r\n      color: {\r\n        'ui:widget': 'color'\r\n      },\r\n      backgroundColor: {\r\n        'ui:widget': 'color'\r\n      },\r\n      borderColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    },\r\n    texts: {\r\n      textAlign: {\r\n        'ui:widget': 'select'\r\n      },\r\n      textDecorationColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    },\r\n    borders: {\r\n      borderColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default () => STYLE_DEFS\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { toJS } from 'mobx'\r\nimport FormRender from 'form-render/lib/antd'\r\nimport styleList from './styleList'\r\n\r\nconst nestedPropNames = ['colors', 'texts', 'margins', 'paddings', 'borders']\r\n\r\nconst styleConfig = styleList()\r\n\r\nconst reversedProps = (function() {\r\n  const props = styleConfig.propsSchema.properties\r\n\r\n  return nestedPropNames.reduce((ret, item) => {\r\n    Object.keys(props[item].properties).forEach(name => {\r\n      ret[name] = item\r\n    })\r\n\r\n    return ret\r\n  }, {})\r\n})()\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass StylePanel extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      formData: {}\r\n    }\r\n  }\r\n\r\n  flatternStyle = (style) => {\r\n    const flattern = {}\r\n\r\n    for(let name in style) {\r\n      if (nestedPropNames.includes(name)) {\r\n        Object.keys(style[name]).forEach(item => {\r\n          if (style[name][item] === '') {\r\n            flattern[item] = undefined\r\n          } else {\r\n            flattern[item] = style[name][item]\r\n          }\r\n        })\r\n      } else {\r\n        flattern[name] = style[name]\r\n      }\r\n    }\r\n\r\n    return flattern\r\n  }\r\n\r\n  nestStyle = (style) => {\r\n    const nested = {}\r\n    for (let key in style) {\r\n      const parentKey = reversedProps[key]\r\n      if (parentKey) {\r\n        nested[parentKey] = nested[parentKey] || {}\r\n        nested[parentKey][key] = style[key]\r\n      } else {\r\n        nested[key] = style[key]\r\n      }\r\n    }\r\n\r\n    return nested\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.props.rootStore.handleStyleChange(this.flatternStyle(e))\r\n  }\r\n\r\n  onValidate = () => {}\r\n\r\n  render() {\r\n    const { propsSchema, uiSchema } = styleList()\r\n    const { selectedElement } = this.props.rootStore\r\n\r\n    if (!selectedElement) {\r\n      return null\r\n    }\r\n\r\n    const elem = toJS(selectedElement)\r\n    const style = this.nestStyle(elem.props ? elem.props.style : {})\r\n\r\n    return (\r\n      <FormRender\r\n        propsSchema={propsSchema}\r\n        uiSchema={uiSchema}\r\n        formData={style}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        displayType=\"row\"\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default StylePanel\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport FormRender from 'form-render/lib/antd'\r\nimport dataList from './dataList'\r\n\r\nconst propsSchema = dataList()\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass DataPanel extends React.Component {\r\n  onChange = (e) => {\r\n    // console.log('on change ')\r\n    this.props.rootStore.handleModelChange(e)\r\n  }\r\n\r\n  render() {\r\n    const { rootStore } = this.props\r\n    const selectedElement = rootStore.selectedElement\r\n    const { name, dataType, rules, shouldCheckDataType } = selectedElement\r\n\r\n    propsSchema.properties.dataType['ui:hidden'] = !shouldCheckDataType\r\n\r\n    const formData = {\r\n      name, dataType, rules\r\n    }\r\n\r\n    return (\r\n      <FormRender\r\n        propsSchema={propsSchema}\r\n        formData={formData}\r\n        onChange={this.onChange}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default DataPanel\r\n","/**\r\n * define data model properties\r\n */\r\nexport default () => ({\r\n  type: 'object',\r\n  properties: {\r\n    name: {\r\n      type: 'string',\r\n      title: '模型名称',\r\n    },\r\n    dataType: {\r\n      type: 'string',\r\n      title: '数据类型',\r\n      enum: [\r\n        '', 'string', 'number', 'boolean', 'regexp', 'array',\r\n        'date', 'url', 'email',\r\n      ],\r\n      'ui:hidden': false\r\n    },\r\n    rules: {\r\n      type: 'array',\r\n      title: '校验规则',\r\n      description: '表单字段校验',\r\n      items: {\r\n        type: 'object',\r\n        properties: {\r\n          name: {\r\n            title: '规则',\r\n            type: 'string',\r\n            enum: ['required', 'max', 'min', 'pattern'],\r\n            enumNames: ['是否必须', '最大长度', '最小长度', '自定义']\r\n          },\r\n          required: {\r\n            title: '',\r\n            type: 'boolean',\r\n            'ui:widget': 'switch',\r\n            'ui:hidden': (value: boolean, rootValue: any, formData: object) => rootValue.name !== 'required'\r\n          },\r\n          max: {\r\n            title: '长度值',\r\n            type: 'string',\r\n            'ui:hidden': (value: boolean, rootValue: any, formData: object) => rootValue.name !== 'max'\r\n          },\r\n          min: {\r\n            title: '长度值',\r\n            type: 'string',\r\n            'ui:hidden': (value: boolean, rootValue: any, formData: object) => rootValue.name !== 'min'\r\n          },\r\n          pattern: {\r\n            title: '正则表达式',\r\n            type: 'string',\r\n            'ui:hidden': (value: boolean, rootValue: any, formData: object) => rootValue.name !== 'pattern'\r\n          },\r\n          message: {\r\n            title: '错误提示',\r\n            type: 'string'\r\n          }\r\n        }\r\n      },\r\n      \"ui:options\": {\r\n        \"foldable\": true\r\n      },\r\n    }\r\n  }\r\n})\r\n","import React from 'react'\r\nimport { inject } from 'mobx-react'\r\nimport { Tabs } from 'antd'\r\nimport ControlPanel from './basic-panel'\r\nimport StylePanel from './style-panel'\r\nimport DataPanel from './data-panel'\r\nimport styles from './index.module.less'\r\nimport { ElementProvider } from '../../core/element/ElementContext'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\n\r\nconst { TabPane } = Tabs\r\n\r\n@inject('rootStore')\r\nexport default class extends React.Component<any, {\r\n  current: string\r\n}> {\r\n  constructor(props: any) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      current: 'basic'\r\n    }\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange(e: React.ChangeEvent, name: string) {\r\n    const { rootStore } = this.props\r\n    rootStore && rootStore.handleFormChangeEvent(e, name)\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { current } = this.state\r\n\r\n    return (\r\n      <ElementProvider value={{ mode: RENDER_MODE_DESIGN, onChange: this.onChange }}>\r\n        <div className={styles.panel}>\r\n          <div className={styles.title}>控件属性</div>\r\n          <Tabs\r\n            defaultActiveKey={current}\r\n            onChange={index => this.setState({ current: index })}\r\n            size=\"small\"\r\n            tabBarStyle={{padding: '0 8px'}}\r\n            className={styles.panel_tabs}\r\n          >\r\n            <TabPane tab=\"基本属性\" key=\"basic\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <ControlPanel />\r\n              </div>\r\n            </TabPane>\r\n            <TabPane tab=\"样式\" key=\"style\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <StylePanel />\r\n              </div>\r\n            </TabPane>\r\n            <TabPane tab=\"数据\" key=\"data\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <DataPanel />\r\n              </div>\r\n            </TabPane>\r\n          </Tabs>\r\n        </div>\r\n      </ElementProvider>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styles from './index.module.less'\r\n\r\nexport default class Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.header}>Design Panel</div>\r\n    )\r\n  }\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport Element from '../../core/element/Element'\r\nimport { Store } from '../../store'\r\n\r\n@inject('rootStore')\r\n@observer\r\nexport default class CurrentControl extends React.Component<{rootStore?: Store}> {\r\n  render(): ReactElement | null {\r\n    const { rootStore } = this.props\r\n    const selectedElement = rootStore!.selectedElement\r\n\r\n    return selectedElement ? (\r\n      <div>\r\n        <span>{(selectedElement as Element).ctor().displayName}</span>\r\n        <span>&nbsp;|&nbsp;</span>\r\n        {\r\n          selectedElement.name ? (\r\n            <React.Fragment>\r\n              <span>{selectedElement.name}</span>\r\n              <span>&nbsp;|&nbsp;</span>\r\n            </React.Fragment>\r\n          ) : null\r\n        }\r\n        <span>{selectedElement.key}</span>\r\n      </div>\r\n    ) : null\r\n  }\r\n}\r\n","import React from 'react'\r\nimport CurrentControl from './CurrentControl'\r\nimport styles from './index.module.less'\r\n\r\nexport default class Footer extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.footer}>\r\n        <div className={styles.left}></div>\r\n        <div className={styles.right}>\r\n          <CurrentControl />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * 状态变化记录，\r\n * 可基于此模块实现 redo/undo 功能\r\n */\r\nimport deepEqual from 'lodash.isequal'\r\n\r\ntype RecordType<T> = {\r\n  time: Date,\r\n  value: T,\r\n}\r\n\r\n// 默认可记录 100 条操作\r\nconst DEFAULT_SIZE: number = 100\r\n\r\nclass Records<T> {\r\n  // 记录列表\r\n  _recordList: Array<RecordType<T>> = []\r\n  // 当前位置\r\n  _current: number = -1\r\n  // 保存列表最大长度\r\n  size: number = 0\r\n\r\n  constructor({ size = DEFAULT_SIZE } = {}) {\r\n    this.size = size\r\n  }\r\n\r\n  // 增加记录\r\n  add(value: T) {\r\n    // 防止重复添加\r\n    if (!value || deepEqual(this.getValue(), value)) {\r\n      return\r\n    }\r\n\r\n    // 超出限制大小，删除旧的元素\r\n    if (this._recordList.length === this.size) {\r\n      this._recordList.shift()\r\n    }\r\n\r\n    this._recordList.push({\r\n      time: new Date(),\r\n      value\r\n    })\r\n\r\n    // 调整队列\r\n    this._current = this._current + 1\r\n    this._recordList.length = this._current + 1\r\n  }\r\n\r\n  hasPrev(): boolean {\r\n    return this._current > 0\r\n  }\r\n\r\n  hasNext(): boolean {\r\n    return this._current < this._recordList.length - 1\r\n  }\r\n\r\n  prev(): T | undefined {\r\n    if (!this.hasPrev()) {\r\n      return undefined\r\n    }\r\n\r\n    this.setCurrent(this._current - 1)\r\n    return this.getValue()\r\n  }\r\n\r\n  next(): T | undefined {\r\n    if (!this.hasNext()) {\r\n      return undefined\r\n    }\r\n\r\n    this.setCurrent(this._current + 1)\r\n    return this.getValue()\r\n  }\r\n\r\n  // 获取当前记录点的值\r\n  getValue(): T | undefined {\r\n    if (this._current < 0 || this._current >= this._recordList.length) {\r\n      return undefined\r\n    }\r\n\r\n    // console.log('current', this._current)\r\n    return this._recordList[this._current] && this._recordList[this._current].value\r\n  }\r\n\r\n  // 设置当前记录点\r\n  setCurrent(current: number): boolean {\r\n    if (current < 0 || current >= this._recordList.length) {\r\n      return false\r\n    }\r\n\r\n    this._current = current\r\n    return true\r\n  }\r\n}\r\n\r\nexport default Records\r\n","import React from 'react'\r\nimport ELement from './Element'\r\nimport styles from './element.module.less'\r\n\r\nclass PageComponent extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.page}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class PageElement extends ELement {\r\n  public static icon: string = ''\r\n  public static displayName: string = '根节点'\r\n\r\n  _getComponent(): typeof React.Component {\r\n    return PageComponent\r\n  }\r\n\r\n  canDrag(): boolean {\r\n    return false\r\n  }\r\n\r\n  canBeDroped(): boolean {\r\n    return true\r\n  }\r\n\r\n  canRemove(): boolean {\r\n    return false\r\n  }\r\n}\r\n","import { observable, action, IObservableArray, computed, autorun } from 'mobx'\r\nimport ElementOption from '../core/ElementOption'\r\nimport rawOptions from '../mock.json'\r\nimport NullElement from '../core/element/NullElement'\r\nimport factory from '../core/ElementFactory'\r\nimport { ROOT_PAGE, PROP_NAME_PREFIX } from '../configs'\r\nimport IElement from '../core/element/IElement'\r\nimport { parseValue, triggerLayoutChange/* , willReflow */ } from '../core/utils'\r\nimport Records from './Records'\r\n// import { ChangeEvent } from 'react'\r\nimport { ValueDataType, DropPlace } from '../types'\r\nimport PageElement from '../core/element/PageElement'\r\n\r\nconst ensureArray = <T>(arr: T | Array<T>): Array<T> => Array.isArray(arr) ? arr : [arr]\r\n\r\n// 构建组件树\r\nconst makeElementTree = (options: Array<ElementOption>, dataValue: ValueDataType, parent?: IElement): Array<IElement> => {\r\n  return options.map(item => {\r\n    const elem = factory.createElement(item, parent)\r\n\r\n    if (item.children && item.children.length > 0) {\r\n      elem.children = makeElementTree(item.children, dataValue, elem)\r\n    }\r\n\r\n    return elem\r\n  })\r\n}\r\n\r\n// 在树结构中查找控件并进行自定义处理\r\ntype CallbackFunc = (item: IElement, index: number, list: Array<IElement>, parent?: IElement) => void\r\n\r\n// 查找控件并做指定的处理\r\nconst findAndHandleElement = (elementKey: string, list: Array<IElement>, callback: CallbackFunc, parent?: IElement) => {\r\n  for (let i = 0, len = list.length; i < len; i++) {\r\n    const item = list[i]\r\n    if (item.key === elementKey) {\r\n      callback && callback(item, i, list, parent)\r\n      return true\r\n    } else {\r\n      if (findAndHandleElement(elementKey, item!.children || [], callback, item)) {\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n// 收集所有校验规则\r\nconst findAllRules = (list: Array<IElement>, result:{[key: string]: any} = {}) => {\r\n  for (let i = 0, len = list.length; i < len; i++) {\r\n    const item = list[i]\r\n    if (item.name && item.rules &&  item.rules.length > 0) {\r\n      result[item.name] = item.rules\r\n    }\r\n\r\n    if (item.children) {\r\n      findAllRules(item.children, result)\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nconst nullElement = new NullElement()\r\nconst rootElement = new PageElement(new ElementOption({\r\n  type: 'page',\r\n  key: ROOT_PAGE,\r\n}))\r\n\r\nconst propsCache:Map<string, ElementOption | Array<ElementOption>> = new Map()\r\n\r\nexport class Store {\r\n  /**\r\n   * 所有节点定义\r\n   */\r\n  @observable elements: IObservableArray<IElement> = observable([])\r\n  @observable selectedElement: IElement = rootElement\r\n  @observable hoverElement?: IElement = nullElement\r\n  @observable hoverPlace: string = ''\r\n  @observable valueData: ValueDataType = new Map()\r\n  @observable canUndo: boolean = false\r\n  @observable canRedo: boolean = false\r\n  @observable placeholder: DropPlace | null = null\r\n  @observable rootElement: IElement = rootElement\r\n\r\n  records = new Records<Object>()\r\n\r\n  constructor() {\r\n    autorun(() => {\r\n      this.records.add(this.jsonData)\r\n\r\n      this.canUndo = this.records.hasPrev()\r\n      this.canRedo = this.records.hasNext()\r\n\r\n      triggerLayoutChange(120) // wait for animating\r\n    }, {\r\n      delay: 100\r\n    })\r\n  }\r\n\r\n  @computed get validateRules(): {[key: string]: any} {\r\n    return findAllRules(this.elements)\r\n  }\r\n\r\n  @computed get selectedProps(): Array<ElementOption> {\r\n    const  { selectedElement } = this\r\n    if (!selectedElement) {\r\n      return []\r\n    }\r\n\r\n    const defaultProps = selectedElement.defaultProps()\r\n    if (!defaultProps) {\r\n      return []\r\n    }\r\n\r\n    const elementKey = selectedElement.key\r\n    if (propsCache.has(elementKey)) {\r\n      return propsCache.get(elementKey) as ElementOption[]\r\n    } else {\r\n      const propsValue = selectedElement.props || {}\r\n\r\n      propsCache.set(elementKey, defaultProps.map(item => {\r\n        const key = `${elementKey}_prop_${item.name}`\r\n\r\n        if (!propsCache.has(key)) {\r\n          const option = new ElementOption({\r\n            type: 'input',\r\n            name: item.name,\r\n            key: key,\r\n            props: {}\r\n          })\r\n\r\n          propsCache.set(key, option)\r\n        }\r\n\r\n        const cached = propsCache.get(key) as ElementOption\r\n        Object.assign(cached.props, {\r\n          name: item.name,\r\n          ...(item.props || {}),\r\n          value: item.name ? propsValue[item.name] : item.default\r\n        })\r\n\r\n        return cached\r\n      }))\r\n    }\r\n\r\n    return propsCache.get(elementKey) as ElementOption[]\r\n  }\r\n\r\n  // 控件列表的 json 表示\r\n  @computed get jsonData() {\r\n    return (this.elements || []).map((item: IElement) => item.jsonData())\r\n  }\r\n\r\n  @action undo() {\r\n    const val = this.records.prev()\r\n    if (val) {\r\n      this.loadElements(val)\r\n    }\r\n  }\r\n\r\n  @action redo() {\r\n    const val = this.records.next()\r\n    if (val) {\r\n      this.loadElements(val)\r\n    }\r\n  }\r\n\r\n  // 加载配置并创建组件\r\n  @action loadElements(rawJson?: any) {\r\n    const options = ensureArray<ElementOption>(ElementOption.loadOptions(rawJson || rawOptions))\r\n    this.elements.replace(makeElementTree(options, this.valueData))\r\n    this.rootElement.children = this.elements\r\n    this.elements.map(item => item.parent = this.rootElement)\r\n\r\n    this.reselectElement()\r\n  }\r\n\r\n  // 列表发生变化后重新选中元素\r\n  reselectElement() {\r\n    if (this.selectedElement !== nullElement) {\r\n      if (!findAndHandleElement(this.selectedElement.key, this.elements, (item) => {\r\n        this.selectElement(item)\r\n      }, this.rootElement)) {\r\n        this.selectElement(rootElement)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 当前设计器中选择元素\r\n  @action selectElement(element: IElement) {\r\n    this.selectedElement = element\r\n  }\r\n\r\n  // 移除元素\r\n  @action removeElement(element: IElement) {\r\n    const removeKey = element.key\r\n    findAndHandleElement(removeKey, this.elements, (item: IElement, index, list) => {\r\n      list.splice(index, 1)\r\n\r\n      if(removeKey === this.selectedElement.key) {\r\n        this.selectElement(rootElement)\r\n      }\r\n    }, this.rootElement)\r\n  }\r\n\r\n  @action cloneElement(element: IElement) {\r\n    console.log('clone it')\r\n  }\r\n\r\n  @action clearHover() {\r\n    this.setPlaceHolder(null)\r\n  }\r\n\r\n  // 移动控件位置\r\n  @action moveElement(source: IElement, dropPlace: DropPlace) {\r\n    const { container, index } = dropPlace\r\n\r\n    if (container && source) {\r\n      const len = container.children ? container.children.length : 0\r\n      if (container.children && index < len && container.children[index].key === source.key) {\r\n        return\r\n      }\r\n\r\n      // 记录待删除的位置，添加之后进行删除操作\r\n      let listToDelete: Array<IElement> = []\r\n\r\n      findAndHandleElement(source.key, this.elements, (_, pos, list, parent) => {\r\n        // find same place to remove and insert\r\n        // list.splice(pos, 1)\r\n        listToDelete = list\r\n        list[pos] = nullElement\r\n      }, this.rootElement)\r\n\r\n      if (! container.children) {\r\n        container.children = []\r\n      }\r\n\r\n      source.parent = container\r\n      container.children.splice(index, 0, source)\r\n\r\n      if (listToDelete) {\r\n        listToDelete.forEach((item, index) => {\r\n          if (item.type === 'null') {\r\n            listToDelete.splice(index, 1)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  @action handleModelChange(e: any) {\r\n    const { selectedElement } = this\r\n    selectedElement.name = e.name\r\n    selectedElement.dataType = e.dataType\r\n    selectedElement.rules = e.rules\r\n  }\r\n\r\n  @action handleStyleChange(e: any) {\r\n    const { selectedElement } = this\r\n    if (!selectedElement) {\r\n      return\r\n    }\r\n\r\n    if (!selectedElement.props) {\r\n      selectedElement.props = {}\r\n    }\r\n\r\n    selectedElement.props.style = e\r\n  }\r\n\r\n  /**\r\n   * 控件属性面板\r\n   */\r\n  @action handleFormChangeEvent(value: any, name: string) {\r\n    const { selectedElement } = this\r\n    if (!selectedElement || !name) {\r\n      return\r\n    }\r\n\r\n    if (!selectedElement.props) {\r\n      selectedElement.props = {}\r\n    }\r\n\r\n    if (name.startsWith(PROP_NAME_PREFIX)) {\r\n      name = name.replace(PROP_NAME_PREFIX, '')\r\n      selectedElement.props = {\r\n        ...selectedElement.props,\r\n        [name]: parseValue(value, selectedElement.getPropType(name))\r\n      }\r\n    } else {\r\n      \r\n    }\r\n  }\r\n\r\n  // 设置插入占位符\r\n  @action setPlaceHolder(placeholder: DropPlace | null) {\r\n    this.placeholder = placeholder\r\n  }\r\n}\r\n","import React, { ReactNode } from 'react'\r\nimport { Icon } from 'antd'\r\nimport classnames from 'classnames'\r\nimport { triggerLayoutChange } from '../../core/utils'\r\nimport styles from './layout.module.less'\r\n\r\nexport default class Layout extends React.Component<{\r\n  header?: ReactNode,\r\n  left?: ReactNode,\r\n  center?: ReactNode,\r\n  right?: ReactNode,\r\n  footer?: ReactNode\r\n}, { leftPanel: boolean, rightPanel: boolean }> {\r\n  constructor(props: any) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      leftPanel: true,\r\n      rightPanel: true\r\n    }\r\n  }\r\n\r\n  toggleLeft = () => {\r\n    this.setState({\r\n      leftPanel: !this.state.leftPanel\r\n    }, () => triggerLayoutChange(100))\r\n  }\r\n\r\n  toggleRight = () => {\r\n    this.setState({\r\n      rightPanel: !this.state.rightPanel\r\n    }, () => triggerLayoutChange(100))\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      header,\r\n      left,\r\n      center,\r\n      right,\r\n      footer,\r\n    } = this.props\r\n\r\n    const { leftPanel, rightPanel } = this.state\r\n\r\n    const layoutCls = classnames({\r\n      [styles.layout]: true,\r\n      [styles.hide_left]: !leftPanel,\r\n      [styles.hide_right]: !rightPanel\r\n    })\r\n\r\n    return (\r\n      <div className={layoutCls}>\r\n        <div className={styles.header}>\r\n          {header}\r\n        </div>\r\n        <div className={styles.content}>\r\n          <div className={styles.left}>\r\n            {left}\r\n            <Icon\r\n              type={leftPanel ? \"double-left\" : \"double-right\"}\r\n              className={styles.collapseLeft}\r\n              onClick={this.toggleLeft}\r\n            />\r\n          </div>\r\n          <div className={styles.center}>\r\n            {center}\r\n          </div>\r\n          <div className={styles.right}>\r\n            {right}\r\n            <Icon\r\n              type={rightPanel ? \"double-right\" : \"double-left\"}\r\n              className={styles.collapseRight}\r\n              onClick={this.toggleRight}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.footer}>\r\n          {footer}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styles from './widget.module.less'\r\n\r\nexport default () => (\r\n  <a\r\n    href=\"https://github.com/lkiarest/page-designer\"\r\n    style={{ position: \"absolute\", zIndex: 999, right: 0, top: 0, color: \"#5584ff\"}}\r\n    aria-label=\"Open GitHub project\"\r\n    title=\"Open GitHub project\"\r\n  >\r\n    <svg\r\n      width=\"48\"\r\n      height=\"48\"\r\n      viewBox=\"0 0 250 250\"\r\n      className={styles.cat}\r\n      style={{ position: \"absolute\", top: \"0px\", fill: \"rgb(255, 255, 255)\", right: \"0px\" }}\r\n    >\r\n      <path\r\n        d=\"M0 0l115 115h15l12 27 108 108V0z\"\r\n        fill=\"#F6C14F\">\r\n      </path>\r\n      <path\r\n        d=\"M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16\"\r\n        style={{transformOrigin: \"130px 106px\"}}\r\n        className={styles.hand}\r\n      >\r\n      </path>\r\n      <path\r\n        d=\"M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z\"\r\n      ></path>\r\n    </svg>\r\n  </a>\r\n)\r\n","import React from 'react'\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { Provider } from 'mobx-react'\nimport Center from '../../components/center'\nimport LeftPanel from '../../components/left-panel'\nimport RightPanel from '../../components/right-panel'\nimport Header from '../../components/header'\nimport Footer from '../../components/footer'\nimport { Store } from '../../store'\nimport Layout from '../../components/layout'\nimport GithubWidget from '../../components/github/widget'\n\nconst rootStore = new Store()\n\nclass App extends React.Component<any, {user: string}> {\n  componentDidMount() {\n    rootStore.loadElements()\n  }\n\n  render() {\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <Provider rootStore={rootStore}>\n          <Layout\n            header={\n              <Header />\n            }\n            left={\n              <LeftPanel />\n            }\n            right={\n              <RightPanel />\n            }\n            center={\n              <Center />\n            }\n            footer={\n              <Footer />\n            }\n          >\n          </Layout>\n          <GithubWidget />\n        </Provider>\n      </DndProvider>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport App from './pages/app/App';\nimport elementTypes from './controls/antd'\nimport factory from './core/ElementFactory'\nimport * as serviceWorker from './serviceWorker'\nimport './index.less'\n\n// 初始化组件列表\nfactory.registerElement(elementTypes)\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"key\":\"index_key__Xy9AU\",\"string\":\"index_string__D8fDw\",\"boolean\":\"index_boolean__1AJRp\",\"number\":\"index_number__1sDNj\",\"null\":\"index_null__2__up\"};"],"sourceRoot":""}
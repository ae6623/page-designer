{"version":3,"sources":["../external \"React\"","core/element/element.module.less","components/footer/index.module.less","components/design-panel/index.module.less","components/header/index.module.less","components/center/index.module.less","components/layout/layout.module.less","components/left-panel/index.module.less","core/element-box/index.module.less","components/design-panel/contextmenu/index.module.less","../external \"ReactDOM\"","components/right-panel/index.module.less","components/json-view/index.tsx","components/center/History.tsx","core/utils/eventBus.ts","core/utils/layout.ts","core/utils/index.ts","core/element/NullElement.tsx","core/ElementFactory.ts","configs.ts","core/element-box/BoxContent.tsx","core/element-box/DraggableWrapper.tsx","core/element-box/ElementBox.tsx","core/element-box/LeafBox.tsx","components/animation/index.tsx","core/element/RenderCache.ts","core/element/ElementControl.tsx","core/element/ElementContext.tsx","core/element/ElementCategory.ts","components/form-render/AntRender.tsx","components/center/Preview.tsx","components/center/menus.tsx","components/design-panel/contextmenu/index.tsx","components/design-panel/index.tsx","components/center/index.tsx","core/element/Element.tsx","core/decorator.tsx","controls/antd/PlainText.tsx","controls/antd/Link.tsx","controls/antd/Form.tsx","controls/antd/Input.tsx","controls/antd/TextArea.tsx","controls/antd/Select.tsx","controls/antd/TreeSelect.tsx","controls/antd/Row.tsx","controls/antd/Col.tsx","controls/antd/Button.tsx","controls/antd/Icon.tsx","controls/antd/Radio.tsx","controls/antd/Checkbox.tsx","controls/antd/Switch.tsx","controls/antd/Cascader.tsx","controls/antd/DatePicker.tsx","controls/antd/TimePicker.tsx","controls/antd/Rate.tsx","controls/antd/Slider.tsx","controls/antd/Transfer.tsx","controls/antd/Menu.tsx","controls/antd/Pagination.tsx","controls/antd/PageHeader.tsx","controls/antd/index.ts","controls/antd/Steps.tsx","core/ElementOption.ts","components/left-panel/ControlItem.tsx","components/left-panel/ControlList.tsx","components/left-panel/index.tsx","components/right-panel/basic-panel/PropElement.tsx","components/right-panel/basic-panel/index.tsx","components/right-panel/style-panel/styleList.ts","components/right-panel/style-panel/index.jsx","components/right-panel/data-panel/DataElement.tsx","components/right-panel/data-panel/index.tsx","components/right-panel/data-panel/dataList.ts","components/right-panel/index.tsx","components/header/index.tsx","components/footer/CurrentControl.tsx","components/footer/index.tsx","store/Records.ts","core/element/PageElement.tsx","store/index.ts","components/layout/index.tsx","pages/app/App.tsx","serviceWorker.ts","index.tsx","components/json-view/index.module.less"],"names":["module","exports","React","ReactDOM","JsonView","formated","json","JSON","stringify","undefined","replace","match","cls","styles","number","test","key","string","boolean","null","syntaxHighlight","this","props","dangerouslySetInnerHTML","__html","Component","History","inject","observer","undo","rootStore","canUndo","redo","canRedo","historyCls","classnames","history","history__can_undo","history__can_redo","undoCls","history__icon","history__icon__undo","redoCls","history__icon__redo","className","type","title","onClick","emitter","EventEmitter","EventTypes","LEAF_LAYOUT","Symbol","for","CONTEXT_MENU","eventBus","setMaxListeners","reduce","ret","item","triggerLayoutChange","delay","setTimeout","emit","showContextView","point","element","genKey","Math","random","toFixed","split","inRect","rect","x","y","rx","ry","width","height","hRect","addon","wRect","getDropPlace","memorize","from","to","clientOffset","console","warn","parent","isAncestor","canDropTo","canBeDroped","nearestDropable","list","children","getClientRect","length","container","position","index","nearest","nearestIndex","nearestRect","distance","Number","POSITIVE_INFINITY","clientX","clientY","len","i","temp","center","tempDistance","pow","dom","getRenderedDom","parentElement","realStyle","window","getComputedStyle","display","float","cssFloat","calculateDropPlace","serializer","arg","cood","NullElement","dirty","value","name","propsData","Map","renderOption","Error","options","constructor","icon","displayName","_elements","elemType","Array","isArray","forEach","registerElement","set","option","Ctor","get","map","child","createElement","DragTypes","BoxContent","ref","handleContextMenu","e","preventDefault","createRef","current","getBoundingClientRect","style","isDragging","isOver","isActive","connectDragSource","connectDropTarget","inline","isInline","mergedCls","active","dragging","over","box","box_inline","onContextMenu","handleHover","throttle","monitor","component","store","shallow","dragItem","getItem","dropHolder","getClientOffset","setPlaceHolder","clearHover","dropSpec","canDrop","drop","didDrop","hover","DraggableWrapper","memo","DropTarget","connect","dropTarget","dropItem","DragSource","beginDrag","endDrag","getDropResult","placeholder","moveElement","canDrag","dragSource","ElementBox","handleClick","selectElement","stopPropagation","removeElement","state","selectedElement","bind","onRemove","LeafBox","componentRef","reLayout","draggerStyle","boxLayout","addListener","removeListener","findDOMNode","offsetTop","offsetLeft","offsetWidth","offsetHeight","oldLayout","setState","comp","compStyle","renderedChild","cloneElement","boxStyle","left","top","transform","Fragment","dragger","Animation","typeName","duration","_cached","setItem","ElementControl","elementStyle","elementProps","Comp","getComponent","mergedProps","toJS","preparedProps","prepareProps","dropInBox","withBox","preparedStyle","padding","minHeight","minWidth","box_in_container","ctx","createContext","mode","ElementConsumer","Consumer","ElementProvider","Provider","ElementCategory","FormRender","elements","onChange","formData","onDataChange","target","propSchema","factory","ele","Preview","modal","preview","visible","showData","log","handleCancel","jsonSchema","size","onCancel","okText","onOk","destroyOnClose","AntRender","TextArea","Center","importJson","showImport","jsonImported","doImport","jsonObj","parse","message","error","loadElements","generateJson","jsonData","showJson","hideJson","doCopy","navigator","clipboard","writeText","success","dlgStyle","overflow","menulist","right","cancelText","centered","bodyStyle","import_text","ContextMenu","showMenu","adjusted","adjustPos","hideMenu","onBodyClick","contains","onDel","onCopy","document","addEventListener","removeEventListener","currentRect","bottom","documentElement","clientWidth","clientHeight","retX","retY","menuStyle","contextmenu","menu_panel","menu_panel__header","menu_panel__header__type","menu_panel__header__name","menu_panel__body","menu_panel__item","DesignPanel","handleFormChangeEvent","page","rootElement","placeholderStyle","opacity","panel","withLabel","menus","categoryList","LAYOUT","FORM","BASIC","ADVANCE","Element","componentCtor","propsCache","dataType","defaultProps","defaultPropVals","default","Object","assign","_getComponent","ctor","prop","category","observable","staticMembers","members","source","checkTypes","prototype","targetType","every","charAt","substring","label","rows","autoSize","minRows","maxRows","formControl","descriptor","oldValue","retComp","apply","transferValue","Item","colon","InnerCls","layout","labelCol","wrapperCol","Option","innerProps","buttonStyle","Target","PureComponent","other","Group","Button","CheckboxGroup","checked","mockData","push","toString","description","disabled","leftLabel","rightLabel","titles","targetKeys","Icon","PlainText","Link","Form","Input","Select","TreeSelect","Row","Col","Radio","Checkbox","Switch","Cascader","DatePicker","TimePicker","Slider","Rate","Transfer","Menu","Pagination","PageHeader","ElementOption","rawOptions","elementOption","loadOptions","spec","ControlCtor","control","newElem","ControlItem","item__title","LeftPanel","categoryElements","has","cat","categroy","categroy__title","categroy__body","elem","PropComponent","renderProps","renderOptoin","valueData","span","PropElement","ControlProps","slice","filter","render","STYLE_DEFS","propsSchema","properties","colors","color","backgroundColor","borderColor","texts","fontFamily","fontSize","fontStyle","enum","fontWeight","textAlign","whiteSpace","textDecorationLine","textDecorationColor","textDecorationStyle","margins","marginTop","marginBottom","marginLeft","marginRight","paddings","paddingTop","paddingBottom","paddingLeft","paddingRight","borders","borderWidth","borderStyle","uiSchema","nestedPropNames","styleConfig","styleList","reversedProps","keys","StylePanel","flatternStyle","flattern","includes","nestStyle","nested","parentKey","handleStyleChange","onValidate","displayType","DataComponent","DataElement","DataPanel","dataElement","TabPane","defaultActiveKey","tabBarStyle","panel_tabs","tab","controls","Header","header","CurrentControl","Footer","footer","DEFAULT_SIZE","Records","_recordList","_current","deepEqual","getValue","shift","time","Date","hasPrev","setCurrent","hasNext","PageComponent","PageElement","ELement","findAndHandleElement","elementKey","callback","nullElement","Store","records","autorun","add","val","prev","next","rawJson","arr","makeElementTree","dataValue","reselectElement","removeKey","splice","dropPlace","listToDelete","_","pos","debug","startsWith","parseValue","getPropType","propsValue","cached","computed","action","Layout","toggleLeft","leftPanel","toggleRight","rightPanel","layoutCls","hide_left","hide_right","content","collapseLeft","collapseRight","App","backend","HTML5Backend","Boolean","location","hostname","elementTypes","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4ea229a1.chunk.js","sourcesContent":["module.exports = React;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"element_page__1kA8t\",\"box_in_item\":\"element_box_in_item__2A_dY\",\"box_in_container\":\"element_box_in_container__21VAm\",\"opts\":\"element_opts__LgMYi\",\"btn\":\"element_btn__1UR6X\",\"split\":\"element_split__1ZBB_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"index_footer__1C46t\",\"right\":\"index_right__1zbed\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__2ZFUt\",\"placeholder\":\"index_placeholder__27HvM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"index_header__1jnIc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menus\":\"index_menus__35H95\",\"menulist\":\"index_menulist__2MzO5\",\"history\":\"index_history__ZxF9I\",\"history__icon\":\"index_history__icon__2XeJ4\",\"history__can_undo\":\"index_history__can_undo__32Qd3\",\"history__icon__undo\":\"index_history__icon__undo__3YVzv\",\"history__can_redo\":\"index_history__can_redo__2CkDe\",\"history__icon__redo\":\"index_history__icon__redo__2O047\",\"import_text\":\"index_import_text__3Jd5r\",\"right\":\"index_right__3U8uJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"layout_layout__2LROg\",\"header\":\"layout_header__27_3O\",\"content\":\"layout_content__3p8vg\",\"left\":\"layout_left__2aWp9\",\"collapseLeft\":\"layout_collapseLeft__3diRW\",\"center\":\"layout_center__1RqCt\",\"right\":\"layout_right__IRTls\",\"collapseRight\":\"layout_collapseRight__aY70q\",\"hide_right\":\"layout_hide_right__2U_VA\",\"hide_left\":\"layout_hide_left__1ijf5\",\"footer\":\"layout_footer__2Onc9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__3OMBv\",\"categroy\":\"index_categroy__1YF81\",\"categroy__title\":\"index_categroy__title__1TcVV\",\"categroy__body\":\"index_categroy__body__1rZPi\",\"item\":\"index_item__gJ9HU\",\"item__title\":\"index_item__title__18QmJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"index_box__3Y7v0\",\"place_before\":\"index_place_before__3ECvN\",\"box__placeholder__before\":\"index_box__placeholder__before__2XJGS\",\"place_after\":\"index_place_after__1JaBj\",\"box__placeholder__after\":\"index_box__placeholder__after__1rTZP\",\"highlight\":\"index_highlight__Nmwjg\",\"over\":\"index_over__1czE0\",\"active\":\"index_active__EeIvh\",\"opts\":\"index_opts__jOoaK\",\"dragging\":\"index_dragging__2URb7\",\"element\":\"index_element__smY7o\",\"placeholder\":\"index_placeholder__27Cup\",\"child_list\":\"index_child_list__1CCNF\",\"animate\":\"index_animate__3SMCb\",\"animate__active\":\"index_animate__active__19_xI\",\"animate_exit\":\"index_animate_exit__1LuMi\",\"animate_exit__active\":\"index_animate_exit__active__-FQux\",\"dragger\":\"index_dragger__1ynCL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contextmenu\":\"index_contextmenu__2UbBO\",\"menu_panel\":\"index_menu_panel__26oz4\",\"menu_panel__header\":\"index_menu_panel__header__-uD3j\",\"menu_panel__header__type\":\"index_menu_panel__header__type__1NDf3\",\"menu_panel__header__name\":\"index_menu_panel__header__name__1HuK_\",\"menu_panel__body\":\"index_menu_panel__body__2yjuQ\",\"menu_panel__item\":\"index_menu_panel__item__166P3\"};","module.exports = ReactDOM;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"index_panel__YTLx1\",\"title\":\"index_title__2Qou9\",\"panel_tabs\":\"index_panel_tabs__2IJQ-\",\"controls\":\"index_controls__2Z2_s\",\"prop_item\":\"index_prop_item__2K8yl\"};","import React, { ReactElement } from 'react'\r\nimport styles from './index.module.less'\r\n\r\n// 格式化 json (https://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript)\r\nfunction syntaxHighlight(json: string | object): string {\r\n  if (typeof json != 'string') {\r\n    json = JSON.stringify(json, undefined, 2)\r\n  }\r\n\r\n  json = json.replace(/&/g, '&amp').replace(/</g, '&lt').replace(/>/g, '&gt')\r\n  return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\r\n    var cls = styles.number\r\n    if (/^\"/.test(match)) {\r\n        if (/:$/.test(match)) {\r\n          cls = styles.key;\r\n        } else {\r\n          cls = styles.string;\r\n        }\r\n    } else if (/true|false/.test(match)) {\r\n      cls = styles.boolean;\r\n    } else if (/null/.test(match)) {\r\n      cls = styles.null\r\n    }\r\n    return '<span class=\"' + cls + '\">' + match + '</span>'\r\n  })\r\n}\r\n\r\nexport default class JsonView extends React.Component<{json: object}> {\r\n  render(): ReactElement {\r\n    const { json } = this.props\r\n    const formated = syntaxHighlight(json)\r\n\r\n    return (\r\n      <code>\r\n        <pre>\r\n        <div dangerouslySetInnerHTML={{__html: formated}} />\r\n        </pre>\r\n      </code>\r\n      // <div dangerouslySetInnerHTML={{__html: formated}} />\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport classnames from 'classnames'\r\nimport { Icon } from 'antd'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../store'\r\nimport styles from './index.module.less'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass History extends React.Component<{\r\n  rootStore?: Store\r\n}> {\r\n  undo = (): void => {\r\n    if (!this.props.rootStore!.canUndo) {\r\n      return\r\n    }\r\n    this.props.rootStore!.undo()\r\n  }\r\n\r\n  redo = (): void => {\r\n    if (!this.props.rootStore!.canRedo) {\r\n      return\r\n    }\r\n\r\n    this.props.rootStore!.redo()\r\n  }\r\n\r\n  render() {\r\n    const historyCls = classnames({\r\n      [styles.history]: true,\r\n      [styles.history__can_undo]: this.props.rootStore!.canUndo,\r\n      [styles.history__can_redo]: this.props.rootStore!.canRedo,\r\n    })\r\n\r\n    const undoCls = classnames({\r\n      [styles.history__icon]: true,\r\n      [styles.history__icon__undo]: true\r\n    })\r\n\r\n    const redoCls = classnames({\r\n      [styles.history__icon]: true,\r\n      [styles.history__icon__redo]: true\r\n    })\r\n\r\n    return (\r\n      <div className={historyCls}>\r\n        <Icon className={undoCls} type=\"undo\" title=\"撤销\" onClick={this.undo} />\r\n        <Icon className={redoCls} type=\"redo\" title=\"恢复\" onClick={this.redo} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default History\r\n","import { EventEmitter } from 'events'\r\n\r\nconst emitter = new EventEmitter()\r\n\r\nexport default emitter\r\n\r\nexport const EventTypes = {\r\n  LEAF_LAYOUT: Symbol.for('LEAF_LAYOUT'),\r\n  CONTEXT_MENU: Symbol.for('CONTEXT_MENU'),\r\n}\r\n","/**\r\n * which attribute change will cause reflow\r\n */\r\nimport eventBus, { EventTypes } from './eventBus'\r\nimport { POINT } from '../../types'\r\nimport IElement from '../element/IElement'\r\n\r\neventBus.setMaxListeners(1000) // support 1000 controls\r\n\r\nconst REFLOW_ATTRS: {\r\n  [key: string]: boolean\r\n} = [\r\n  'width',\r\n  'height',\r\n  'top',\r\n  'right',\r\n  'bottom',\r\n  'left',\r\n  'minWidth',\r\n  'minHeight',\r\n  'maxWidth',\r\n  'maxHeight',\r\n  'margin',\r\n  'marginTop',\r\n  'marginRight',\r\n  'marginBottom',\r\n  'marginLeft',\r\n  'padding',\r\n  'paddingTop',\r\n  'paddingRight',\r\n  'paddingBottom',\r\n  'paddingLeft',\r\n  'transform',\r\n  'transformOrigin',\r\n  'perspectiveOrigin',\r\n  'translate',\r\n].reduce((ret, item) => ({\r\n  ...ret,\r\n  [item]: true\r\n}), {})\r\n\r\n/**\r\n * check whether a css attribute change will cause reflow\r\n * @param name attribute name\r\n */\r\nexport const willReflow = (name: string) => {\r\n  return !!REFLOW_ATTRS[name]\r\n}\r\n\r\n/**\r\n * notify change event to all layout listeners\r\n * @param delay event delay (ms), default: 0\r\n */\r\nexport const triggerLayoutChange = (delay: number = 0) => {\r\n  setTimeout(() => {\r\n    // console.debug('box layout update !')\r\n    eventBus.emit(EventTypes.LEAF_LAYOUT)\r\n  }, delay)\r\n}\r\n\r\n/**\r\n * show context menu\r\n */\r\nexport const showContextView = (point: POINT, element: IElement) => {\r\n  eventBus.emit(EventTypes.CONTEXT_MENU, {\r\n    point, element\r\n  })\r\n}\r\n","import { XYCoord } from \"dnd-core\"\r\nimport memorize from 'fast-memoize'\r\nimport IElement from '../element/IElement'\r\n// import { getItem } from './element/RenderCache'\r\nimport { DropPlace, RECT } from '../../types'\r\nexport * from './layout'\r\n\r\nconst PLACEHOLDER_SIZE = 2\r\n\r\n/**\r\n * 浅对比\r\n */\r\nexport const shallowCompare = (obj1: any, obj2: any) => {\r\n  if (!obj1 && !obj2) {\r\n    return true\r\n  }\r\n\r\n  return obj1 && obj2 && Object.keys(obj1).length === Object.keys(obj2).length &&\r\n    Object.keys(obj1).every(\r\n      key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\r\n    )\r\n}\r\n\r\n/**\r\n * 将 value 转为指定类型\r\n */\r\nexport const parseValue = (value: any, type: string) => {\r\n  switch(type) {\r\n    case 'string':\r\n      return value\r\n    case 'number':\r\n      return +value\r\n    case 'boolean':\r\n      return !!value\r\n    default:\r\n      return value\r\n  }\r\n}\r\n\r\n/**\r\n * 校验参数并将参数转化为数组\r\n */\r\nexport const ensureArray = <T>(obj: T | Array<T>): Array<T> => {\r\n  return Array.isArray(obj) ? obj : [obj]\r\n}\r\n\r\n/**\r\n * 获取唯一 key\r\n */\r\nexport const genKey = (): string => {\r\n  return Math.random().toFixed(16).split('.')[1]\r\n}\r\n\r\n// check point in rect\r\nconst inRect = (point: XYCoord, rect: RECT) => {\r\n  const { x, y } = point\r\n  const { x: rx, y: ry, width = 0, height = 0 } = rect\r\n\r\n  return x > rx && x < rx + width && y > ry && y < ry + height\r\n}\r\n\r\nconst hRect = (rect: RECT, addon: any = {}): RECT => {\r\n  return { ...rect, height: PLACEHOLDER_SIZE, ...addon}\r\n}\r\n\r\nconst wRect = (rect: RECT, addon: any = {}): RECT => {\r\n  return { ...rect, width: PLACEHOLDER_SIZE, ...addon }\r\n}\r\n\r\n// 在控件列表中计算合适的插入位置\r\nconst calculateDropPlace = (from: IElement, to: IElement, clientOffset: XYCoord): DropPlace | null => {\r\n  const list = to.children || []\r\n  const { x, y, width, height } = to.getClientRect()\r\n\r\n  // console.log('calculate', containerRect)\r\n\r\n  if (!list || list.length === 0) {\r\n    // console.log('first child', hRect({ x, y, width, height }))\r\n    return { container: to, position: hRect({ x, y, width, height }), index: 0 }\r\n  }\r\n\r\n  let nearest: IElement | null = null\r\n  let nearestIndex: number = -1\r\n  let nearestRect: RECT & { center: XYCoord } | null = null\r\n  let distance = Number.POSITIVE_INFINITY\r\n  const { x: clientX, y: clientY } = clientOffset\r\n\r\n  // find the nearest element\r\n  const len = list.length\r\n  for (let i = 0; i < len; i++) {\r\n    const temp = list[i]\r\n\r\n    if (temp.key === from.key) {\r\n      continue\r\n    }\r\n\r\n    // const next = list[i + 1]\r\n    const { x, y, width = 0, height = 0 } = temp.getClientRect()\r\n    const center = { x: x + width / 2, y: y + height / 2 }\r\n\r\n    // the only child that contains mouse pointer\r\n    if (inRect(clientOffset, { x, y, width, height })) {\r\n      // if (temp.type === 'plain-text') {\r\n      //   debugger\r\n      // }\r\n      nearest = temp\r\n      nearestRect = { x, y, width, height, center }\r\n      nearestIndex = i\r\n      break\r\n    }\r\n\r\n    // const { x: nextX, y: nextY, width: nextWidth = 0, height: nextHeight = 0 } = next.getClientRect()\r\n    const tempDistance = Math.pow(clientX - center.x, 2) + Math.pow(clientY - center.y, 2)\r\n    if (tempDistance < distance) {\r\n      distance = tempDistance\r\n      nearest = temp\r\n      nearestRect = { x, y, width, height, center }\r\n      nearestIndex = i\r\n    }\r\n  }\r\n\r\n  if (nearest && nearestRect) {\r\n    const { x, y, width = 0, height = 0, center } = nearestRect\r\n    let dom = nearest.getRenderedDom()\r\n    dom = (dom && (nearest.canBeDroped() ? dom.parentElement : dom)) as HTMLElement\r\n    if (!dom) {\r\n      // console.log('no valid dom node')\r\n      return null\r\n    }\r\n\r\n    const realStyle = window.getComputedStyle(dom)\r\n    const display = realStyle.display\r\n    const float = realStyle.cssFloat\r\n    // decide placeholder is horizontal or vertical\r\n    let inline = display === 'inline-block' || display === 'inline' || float !== 'none'\r\n    // console.log(dom, display, inline, float, center)\r\n\r\n    if (inline) {\r\n      if (clientX < center.x) { // left side\r\n        // console.log('left')\r\n        return {\r\n          container: to,\r\n          position: wRect(nearestRect, { x }),\r\n          index: nearestIndex\r\n        }\r\n      } else {\r\n        // console.log('right')\r\n        return {\r\n          container: to,\r\n          position: wRect(nearestRect, { x: x + width }),\r\n          index: nearestIndex + 1\r\n        }\r\n      }\r\n    } else {\r\n      if (clientY < center.y) {\r\n        // console.log('top')\r\n        return {\r\n          container: to,\r\n          position: hRect(nearestRect, {y: y - PLACEHOLDER_SIZE}),\r\n          index: nearestIndex\r\n        }\r\n      } else {\r\n        // console.log('bottom')\r\n        return {\r\n          container: to,\r\n          position: hRect(nearestRect, {y: y + (height || 0)}),\r\n          index: nearestIndex + 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n// get nearest dropable element\r\nconst nearestDropable = (from: IElement, to: IElement | null ): IElement | null => {\r\n  while(to) {\r\n    // console.log('check', to.type, from.type)\r\n    if (from.canDropTo(to) && to.canBeDroped(from)) {\r\n      // console.log('found')\r\n      return to\r\n    }\r\n\r\n    to = to.parent || null\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n// check whether 'from' element is same as or the ancestor of 'to' element\r\nconst isAncestor = (from: IElement, to: IElement | null) => {\r\n  while(to) {\r\n    if (to.key === from.key) {\r\n      console.warn('can not drop to a sub element')\r\n      return true\r\n    }\r\n\r\n    to = to.parent || null\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * 根据拖动元素和底层元素获取正确的放置位置，在拖动元素时使用此函数进行运算\r\n * @returns 待放入的容器元素，插入点坐标和放置位置（索引）\r\n */\r\nexport const getDropPlace = memorize(\r\n  (from: IElement, to: IElement | null, clientOffset: XYCoord | null): DropPlace | null =>  {\r\n  if (!from || !to || !clientOffset || from.key === to.key) {\r\n    return null\r\n  }\r\n\r\n  if (isAncestor(from, to)) {\r\n    // console.log('isAncestor')\r\n    return null\r\n  }\r\n\r\n  if (!from.canDropTo(to) || !to.canBeDroped(from)) {\r\n    // console.log('drop', from, to)\r\n    to = nearestDropable(from, to)\r\n    // console.log('check parent', from, to)\r\n    if (!to) { // 上级元素也不支持拖入\r\n      // console.log('no parent')\r\n      return null\r\n    }\r\n  }\r\n\r\n  return calculateDropPlace(from, to, clientOffset)\r\n}\r\n, {\r\n  serializer: (arg: any) => {\r\n    const [ from, to, cood ] = arg\r\n    return `${from.key}_${to.key}_${cood.x}_${cood.y}`\r\n  }\r\n})\r\n","import React, { ReactElement } from 'react'\r\nimport ElementOption from '../ElementOption'\r\nimport { RenderOption } from './IElement'\r\nimport IElement, { ElementContructor } from './IElement'\r\nimport { JsonFormat, RECT } from '../../types'\r\nimport { genKey } from '../utils'\r\n\r\nexport default class NullElement implements IElement {\r\n  dirty?: boolean | undefined\r\n  value?: any\r\n  name?: string | undefined\r\n  props?: any\r\n  children?: IElement[] | undefined\r\n  parent?: IElement | null | undefined\r\n  public static icon: string = 'null'\r\n  public static displayName: string = '空元素'\r\n\r\n  type = 'null'\r\n  key = genKey()\r\n  propsData = new Map()\r\n\r\n  render(renderOption?: RenderOption | undefined) {\r\n    return <div className=\"null-element\" key={this.key}></div>\r\n  }\r\n\r\n  canDrag(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canBeDroped(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canDropTo(element: IElement): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  canRemove(): boolean {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  renderBefore(props: any, renderOption?: RenderOption | undefined): React.ReactElement | null {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  renderAfter(props: any, renderOption?: RenderOption | undefined): React.ReactElement | null {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  getClientRect(): RECT {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  getRenderedDom() {\r\n    return undefined\r\n  }\r\n  jsonData(): JsonFormat {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n\r\n  defaultProps() {\r\n    return []\r\n  }\r\n  prepareProps(props: any) {\r\n    return props\r\n  }\r\n  getComponent(): typeof React.Component | React.FunctionComponent<{}> {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n  isInline() {\r\n    return true\r\n  }\r\n\r\n  _render(options: ElementOption): ReactElement {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n\r\n  ctor() {\r\n    return this.constructor as ElementContructor\r\n  }\r\n\r\n  getPropType(name: string): string {\r\n    throw new Error(\"Method not implemented.\")\r\n  }\r\n}\r\n","/**\r\n * 组件类型工厂，根据 type 返回已注册组件的类型定义\r\n */\r\nimport IElement, { ElementContructor } from './element/IElement'\r\nimport NullElement from './element/NullElement'\r\nimport ElementOption from './ElementOption'\r\nimport { genKey } from './utils'\r\n\r\nclass ElementFactory {\r\n  _elements: Map<string, ElementContructor> = new Map()\r\n\r\n  registerElement(elemType: ElementContructor | Array<ElementContructor>): void {\r\n    if (Array.isArray(elemType)) { // 批量注册\r\n      elemType.forEach(item => {\r\n        this.registerElement(item)\r\n      })\r\n    } else {\r\n      this._elements.set(elemType.type, elemType)\r\n    }\r\n  }\r\n\r\n  createElement(option: ElementOption, parent?: IElement): IElement {\r\n    const Ctor = this._elements.get(option.type)\r\n\r\n    if (!Ctor) {\r\n      console.warn('invalid element type ' + option.type)\r\n      return new NullElement()\r\n    }\r\n\r\n    if (!option.key) {\r\n      option.key = genKey()\r\n    }\r\n\r\n    const element = new Ctor(option)\r\n    element.parent = parent\r\n\r\n    if (option.children && option.children.length > 0) {\r\n      element.children = option.children.map(child => this.createElement(child, element))\r\n    }\r\n\r\n    return element\r\n  }\r\n}\r\n\r\nexport default new ElementFactory()\r\n","import { ElementContructor } from \"./core/element/IElement\"\r\n\r\nexport const DragTypes = {\r\n  CARD: 'CARD'\r\n}\r\n\r\nexport type DragProps = {\r\n  control: ElementContructor\r\n}\r\n\r\n// 根节点约定命名\r\nexport const ROOT_PAGE = 'root_page'\r\n\r\n// 事件名称\r\nexport const STYLE_NAME_PREFIX = 'style!'\r\nexport const DATA_NAME_PREFIX = 'data!'\r\nexport const PROP_NAME_PREFIX = 'prop!'\r\n\r\n// render mode\r\nexport const RENDER_MODE_DESIGN = 'design'\r\nexport const RENDER_MODE_PREVIEW = 'preview'\r\n","import { inject } from \"mobx-react\"\r\nimport React from \"react\"\r\nimport classnames from 'classnames'\r\nimport { DraggableBoxProps, RECT } from \"../../types\"\r\nimport { showContextView } from \"../utils\"\r\nimport styles from './index.module.less'\r\n\r\n@inject('rootStore')\r\nclass BoxContent extends React.Component<DraggableBoxProps> {\r\n  private ref: any\r\n\r\n  constructor(props: DraggableBoxProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n  }\r\n\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current.getBoundingClientRect()\r\n  }\r\n\r\n  handleContextMenu = (e: any) => {\r\n    if (this.props.element && this.props.element.type) {\r\n      showContextView({\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      }, this.props.element)\r\n\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      cls, style, isDragging, isOver, isActive,\r\n      onClick, children,\r\n      connectDragSource, connectDropTarget\r\n    } = this.props\r\n\r\n    const inline = this.props.element.isInline()\r\n\r\n    const mergedCls = classnames({\r\n      ...cls,\r\n      [styles.active]: isActive,\r\n      [styles.dragging]: !!isDragging,\r\n      [styles.over]: !!isOver,\r\n      [styles.box]: true,\r\n      [styles.box_inline]: inline,\r\n    })\r\n\r\n    return connectDropTarget(connectDragSource(\r\n      <div\r\n        ref={this.ref}\r\n        className={mergedCls}\r\n        style={style}\r\n        onClick={onClick}\r\n        onContextMenu={this.handleContextMenu}\r\n      >\r\n        {children}\r\n      </div>\r\n    ))\r\n  }\r\n}\r\n\r\nexport default BoxContent\r\n","import React from \"react\"\r\nimport { throttle } from \"lodash\"\r\nimport { OwnProps, DragItemType, DragConnectedProps, DropConnectedProps } from \"../../types\"\r\nimport { DragSourceMonitor, DragSourceConnector, DropTargetMonitor, DropTargetConnector, DropTarget, DragSource } from \"react-dnd\"\r\nimport ElementBox from \"./ElementBox\"\r\nimport { DragTypes } from \"../../configs\"\r\nimport BoxContent from \"./BoxContent\"\r\nimport { getDropPlace } from '../utils'\r\n\r\nconst HOVER_INTERVAL = 100 // 节流，防止 move 事件执行太频繁\r\n\r\nconst dragSpec = {\r\n  beginDrag(props: OwnProps, monitor: DragSourceMonitor, component: ElementBox): DragItemType {\r\n    return {\r\n      element: props.element,\r\n    }\r\n  },\r\n  endDrag(props: OwnProps, monitor: DragSourceMonitor, component: ElementBox) {\r\n    if (!component) {\r\n      return\r\n    }\r\n\r\n    const { rootStore: store } = component.props\r\n    const droped = monitor.getDropResult()\r\n    if (!droped) {\r\n      store!.clearHover()\r\n      return\r\n    }\r\n\r\n    // const { element: to} = droped\r\n    const { placeholder } = store!\r\n\r\n    if (!placeholder) {\r\n      return\r\n    }\r\n\r\n    store!.moveElement(monitor.getItem().element, placeholder)\r\n    component.props.rootStore!.clearHover()\r\n  },\r\n  canDrag(props: OwnProps, monitor: DragSourceMonitor) {\r\n    return props.element.canDrag()\r\n  }\r\n}\r\n\r\nconst dragConnect = function(connect: DragSourceConnector, monitor: DragSourceMonitor):\r\nDragConnectedProps {\r\n  return {\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging(),\r\n    dragItem: monitor.getItem()\r\n  }\r\n}\r\n\r\n// 将一个控件拖动到其他控件上时实时计算放置区域\r\nconst handleHover = throttle(function(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n\r\n  const store = component.props.rootStore\r\n\r\n  if (!monitor.isOver({ shallow: true })) {\r\n    store!.clearHover()\r\n    return\r\n  }\r\n\r\n  let to = props.element // already placed element\r\n\r\n  const dragItem = monitor.getItem() // dragging element\r\n\r\n  if (!to || to.type === 'null' || !dragItem || !dragItem.element || to.key === dragItem.key) { // 不处理\r\n    store!.clearHover()\r\n    return\r\n  }\r\n\r\n  const from = dragItem.element\r\n  const dropHolder = getDropPlace(from, to, monitor.getClientOffset())\r\n  if (dropHolder) {\r\n    store!.setPlaceHolder(dropHolder)\r\n  } else {\r\n    store!.clearHover()\r\n  }\r\n}, HOVER_INTERVAL)\r\n\r\nconst dropSpec = {\r\n  canDrop(props: OwnProps, monitor: DropTargetMonitor) {\r\n    // return props.element.canBeDroped()\r\n    return true\r\n  },\r\n  drop(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n    if (monitor.didDrop()) {\r\n      return\r\n    }\r\n\r\n    const { element } = props\r\n\r\n    return {\r\n      element\r\n    }\r\n  },\r\n  hover(props: OwnProps, monitor: DropTargetMonitor, component: ElementBox) {\r\n    handleHover(props, monitor, component)\r\n  }\r\n}\r\n\r\nconst dropCollect = function(connect: DropTargetConnector, monitor: DropTargetMonitor): DropConnectedProps {\r\n  return {\r\n    isOver: monitor.isOver({ shallow: true }),\r\n    connectDropTarget: connect.dropTarget(),\r\n    dropItem: monitor.getItem(),\r\n    clientOffset: monitor.getClientOffset(),\r\n  }\r\n}\r\n\r\nconst DraggableWrapper = React.memo(DropTarget(DragTypes.CARD, dropSpec, dropCollect)(DragSource(DragTypes.CARD, dragSpec, dragConnect)(BoxContent)))\r\n\r\nexport default DraggableWrapper\r\n","import React, { ReactNode } from \"react\"\r\nimport { OwnProps, RECT } from \"../../types\"\r\nimport IElement from \"../element/IElement\"\r\n// import styles from './index.module.less'\r\nimport BoxContent from \"./BoxContent\"\r\nimport DraggableWrapper from \"./DraggableWrapper\"\r\nimport { inject, observer } from \"mobx-react\"\r\n\r\ntype StateType = {\r\n  isActive: boolean\r\n}\r\n\r\n/**\r\n * 封装控件\r\n */\r\n@inject('rootStore')\r\n@observer\r\nclass ElementBox extends React.Component<OwnProps, StateType> {\r\n  public ref: React.RefObject<BoxContent>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n\r\n    this.state = {\r\n      isActive: props.rootStore!.selectedElement.key === props.element.key,\r\n    }\r\n  }\r\n\r\n  handleClick = (e: React.MouseEvent) => {\r\n    const { element, rootStore } = this.props\r\n\r\n    rootStore!.selectElement(element)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  removeElement = (element: IElement) => {\r\n    if (!element) {\r\n      return\r\n    }\r\n\r\n    const { rootStore } = this.props\r\n    rootStore!.removeElement(element)\r\n  }\r\n\r\n  // 获取元素所占区域\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current!.getClientRect()\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const {\r\n      element, children, rootStore\r\n    } = this.props\r\n    const isActive = rootStore!.selectedElement.key === element.key\r\n\r\n    const cls: { [key: string]: any } = {}\r\n\r\n    if (this.props.className) {\r\n      cls[this.props.className] = true\r\n    }\r\n\r\n    return (\r\n      <DraggableWrapper\r\n        ref={this.ref}\r\n        element={element}\r\n        cls={cls}\r\n        isActive={isActive}\r\n        onClick={this.handleClick.bind(this)}\r\n        onRemove={this.removeElement.bind(this)}\r\n      >\r\n        {children}\r\n      </DraggableWrapper>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ElementBox\r\n","import React, { ReactNode } from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\n// import classnames from 'classnames'\r\nimport { OwnProps, RECT } from \"../../types\"\r\nimport IElement from \"../element/IElement\"\r\nimport BoxContent from \"./BoxContent\"\r\nimport DraggableWrapper from \"./DraggableWrapper\"\r\nimport { inject, observer } from \"mobx-react\"\r\nimport eventBus, { EventTypes } from '../utils/eventBus'\r\nimport styles from './index.module.less'\r\n\r\ntype StateType = {\r\n  isActive: boolean,\r\n  draggerStyle?: Object,\r\n  boxLayout: RECT\r\n}\r\n\r\n/**\r\n * 封装控件\r\n */\r\n@inject('rootStore')\r\n@observer\r\nclass LeafBox extends React.Component<OwnProps, StateType> {\r\n  public ref: React.RefObject<BoxContent>\r\n  public componentRef: React.RefObject<any>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n    this.ref = React.createRef()\r\n    this.componentRef = React.createRef()\r\n\r\n    this.reLayout = this.reLayout.bind(this)\r\n\r\n    this.state = {\r\n      isActive: props.rootStore!.selectedElement.key === props.element.key,\r\n      draggerStyle: {\r\n        // opacity: 0,\r\n        position: 'absolute',\r\n      },\r\n      boxLayout: {\r\n        x: 0, y: 0, width: 0, height: 0\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.reLayout()\r\n    }, 400) // 等待动画结束才能拿到元素的布局信息\r\n\r\n    eventBus.addListener(EventTypes.LEAF_LAYOUT, this.reLayout)\r\n  }\r\n\r\n  // componentDidUpdate() {\r\n  //   setTimeout(() => {\r\n  //     this.reLayout()\r\n  //   }, 400) // 等待动画结束才能拿到元素的布局信息\r\n  // }\r\n\r\n  componentWillUnmount() {\r\n    eventBus.removeListener(EventTypes.LEAF_LAYOUT, this.reLayout)\r\n  }\r\n\r\n  reLayout() {\r\n    // const rect = this.props.element.getClientRect()\r\n    const dom = ReactDOM.findDOMNode(this.componentRef.current) as HTMLElement\r\n    if (dom) {\r\n      const { offsetTop: y, offsetLeft: x, offsetWidth: width, offsetHeight: height } = dom\r\n      const oldLayout = this.state.boxLayout\r\n      if (x === oldLayout.x && y === oldLayout.y && width === oldLayout.width && height === oldLayout.height) {\r\n        return\r\n      }\r\n\r\n      // console.log('relayout')\r\n      this.setState({\r\n        boxLayout: { x, y, width, height }\r\n      })\r\n    }\r\n  }\r\n\r\n  handleClick = (e: React.MouseEvent) => {\r\n    const { element, rootStore } = this.props\r\n\r\n    rootStore!.selectElement(element)\r\n    e.stopPropagation()\r\n  }\r\n\r\n  removeElement = (element: IElement) => {\r\n    if (!element) {\r\n      return\r\n    }\r\n\r\n    const { rootStore } = this.props\r\n    rootStore!.removeElement(element)\r\n  }\r\n\r\n  // 获取元素所占区域\r\n  getClientRect(): RECT {\r\n    const { current } = this.ref\r\n    return current!.getClientRect()\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const {\r\n      element, children, rootStore\r\n    } = this.props\r\n    const isActive = rootStore!.selectedElement.key === element.key\r\n\r\n    const cls = {\r\n      [styles.box]: true,\r\n      // [styles.box_in_item]: true,\r\n      [styles.active]: isActive\r\n    }\r\n\r\n    const comp = children\r\n    const compStyle = comp.props.style || {}\r\n    const renderedChild = children ? React.cloneElement(comp, {\r\n      style: {\r\n        ...compStyle,\r\n        // zIndex: 3,\r\n        // border: '1px dashed rgba(90, 90, 90, 0.2)',\r\n      },\r\n      // className: cls,\r\n      ref: this.componentRef\r\n    }) : children\r\n\r\n    const {boxLayout, draggerStyle} = this.state\r\n\r\n    const boxStyle = {\r\n      ...draggerStyle,\r\n      // left: `${boxLayout.x + 1}px`,\r\n      // top: `${boxLayout.y + 1}px`,\r\n      left: 0,\r\n      top: 0,\r\n      width: `${boxLayout.width || 1 - 1}px`,\r\n      height: `${boxLayout.height || 1 - 1}px`,\r\n      transform: `translate3d(${boxLayout.x + 1}px, ${boxLayout.y + 1}px, 0)`\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {renderedChild}\r\n        <div className={styles.dragger}>\r\n          <DraggableWrapper\r\n            ref={this.ref}\r\n            element={element}\r\n            isActive={isActive}\r\n            style={boxStyle}\r\n            cls={cls}\r\n            onClick={this.handleClick.bind(this)}\r\n            onRemove={this.removeElement.bind(this)}\r\n          >\r\n          </DraggableWrapper>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LeafBox\r\n","import React from 'react'\r\nimport FlipMove from 'react-flip-move'\r\n\r\n/**\r\n * simply enjoy react-flip-move\r\n */\r\nclass Animation extends React.Component {\r\n  render() {\r\n    // wrapperless mode of FlipMove\r\n    return (\r\n      <FlipMove typeName={null} duration={100}>\r\n        {\r\n          this.props.children\r\n        }\r\n      </FlipMove>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Animation\r\n","/**\r\n * key-value map,\r\n * store relations between elements and rendered doms\r\n */\r\nlet _cached: {[key: string]: any} = {}\r\n\r\nexport const setItem = (key: string, component: any) => {\r\n  if (!key || !component || !component.current) {\r\n    return\r\n  }\r\n\r\n  _cached[key] = component\r\n  // console.log(_cached)\r\n}\r\n\r\nexport const getItem = (key: string): any => {\r\n  return _cached[key]\r\n}\r\n\r\nexport const clear = (): void => {\r\n  _cached = {}\r\n}\r\n","import React from \"react\"\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from \"mobx-react\"\r\n// import ReactDOM from \"react-dom\"\r\nimport ElementBox from \"../element-box/ElementBox\"\r\nimport LeafBox from '../element-box/LeafBox'\r\nimport { Store } from \"../../store\"\r\nimport IElement, { RenderOption } from \"./IElement\"\r\nimport Animation from '../../components/animation'\r\nimport { setItem } from './RenderCache'\r\nimport styles from './element.module.less'\r\n\r\ntype ElementControlProps = {\r\n  rootStore?: Store,\r\n  element: IElement,\r\n  renderOption?: RenderOption,\r\n  // forwardedRef?: any,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ElementControl extends React.Component<ElementControlProps, { display: string | null }> {\r\n  ref: any\r\n  componentRef: any\r\n\r\n  constructor(props: ElementControlProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      display: ''\r\n    }\r\n\r\n    this.ref = React.createRef()\r\n    // this.componentRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    setItem(this.props.element.key, this.ref)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    setItem(this.props.element.key, this.ref)\r\n  }\r\n\r\n  render() {\r\n    const { element, renderOption = {}, rootStore, ...props } = this.props\r\n    if (element.type === 'null') {\r\n      return null\r\n    }\r\n\r\n    const { style: elementStyle, ...elementProps } = element.props || {}\r\n\r\n    const Comp = element.getComponent()\r\n    const mergedProps = {\r\n      ...props,\r\n      ...elementProps,\r\n      ...renderOption.props,\r\n    }\r\n\r\n    if (elementStyle) {\r\n      mergedProps.style = {\r\n        ...mergedProps.style,\r\n        ...toJS(elementStyle)\r\n      }\r\n    }\r\n\r\n    if (!mergedProps.name && element.name) {\r\n      mergedProps.name = element.name\r\n    }\r\n\r\n    const  preparedProps = element.prepareProps(mergedProps)\r\n\r\n    const dropInBox = renderOption.withBox && element.canBeDroped()\r\n    const preparedStyle = preparedProps.style || {}\r\n\r\n    preparedProps.style = {\r\n      ...preparedStyle,\r\n      position: 'relative',\r\n      padding: preparedStyle.padding || (dropInBox ? '8px' : undefined),\r\n      minHeight: preparedStyle.minWidth || (renderOption.withBox && '12px'),\r\n    }\r\n\r\n    // 非容器元素\r\n    if (!element.canBeDroped()) {\r\n      // 与容器元素的渲染有区别\r\n      return renderOption.withBox ? (\r\n        <LeafBox\r\n          element={element}\r\n          key={element.key}\r\n          ref={this.ref}\r\n        >\r\n          <Comp {...preparedProps} />\r\n        </LeafBox>\r\n      ) : <Comp {...preparedProps} key={element.key} />\r\n    }\r\n\r\n    return renderOption.withBox ? (\r\n      <Comp {...preparedProps} key={element.key}>\r\n        <ElementBox\r\n          element={element}\r\n          className={styles.box_in_container}\r\n          ref={this.ref}\r\n        />\r\n        <Animation>\r\n        {\r\n          element.children && element.children.map((item: IElement) => (\r\n            <ElementControl key={item.key} element={item} renderOption={renderOption} />\r\n          ))\r\n        }\r\n        </Animation>\r\n      </Comp>\r\n    ) : (\r\n      <Comp {...preparedProps} key={element.key}>\r\n        {/* <Animation> */}\r\n        {\r\n          element.children && element.children.map((item: IElement) => (\r\n            <ElementControl key={item.key} element={item} renderOption={renderOption} />\r\n          ))\r\n        }\r\n        {/* </Animation> */}\r\n      </Comp>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ElementControl\r\n","/**\r\n * Context for all elements\r\n */\r\nimport React from 'react'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\n\r\nconst ctx = React.createContext<{\r\n  mode: string,\r\n  value?: any,\r\n  onChange?: Function\r\n}>({\r\n  mode: RENDER_MODE_DESIGN\r\n})\r\n\r\nconst { Consumer: ElementConsumer, Provider: ElementProvider } = ctx\r\n\r\nexport {\r\n  ElementConsumer,\r\n  ElementProvider,\r\n}\r\n","/**\r\n * 控件分类\r\n */\r\nenum ElementCategory {\r\n  LAYOUT, // 布局控件\r\n  FORM,\r\n  BASIC, // 基本控件\r\n  ADVANCE, // 高级控件\r\n}\r\n\r\nexport const categoryList = [\r\n  {\r\n    type: ElementCategory.LAYOUT,\r\n    title: '布局控件',\r\n  },\r\n  {\r\n    type: ElementCategory.FORM,\r\n    title: '表单控件',\r\n  },\r\n  {\r\n    type: ElementCategory.BASIC,\r\n    title: '通用控件',\r\n  },\r\n  {\r\n    type: ElementCategory.ADVANCE,\r\n    title: '高级控件',\r\n  }\r\n]\r\n\r\nexport default ElementCategory\r\n","import React from 'react'\nimport { JsonFormat } from '../../types'\nimport factory from '../../core/ElementFactory'\nimport ElementControl from '../../core/element/ElementControl'\nimport { ElementProvider } from '../../core/element/ElementContext'\nimport { RENDER_MODE_PREVIEW } from '../../configs'\nimport IElement from '../../core/element/IElement'\n\ntype FormRenderProps = {\n  propSchema: Array<JsonFormat>,\n  formData?: {[key: string]: any},\n  onChange: Function,\n}\n\n/**\n * ant-design based form renderer\n */\nclass FormRender extends React.Component<FormRenderProps> {\n  elements?: Array<IElement> | null\n\n  constructor(props: FormRenderProps) {\n    super(props)\n    this.elements = null\n  }\n\n  onChange = (e: any, name: string) => {\n    const { formData, onChange: onDataChange } = this.props\n    const value = e.target ? e.target.value : e\n    onDataChange({ ...formData, [name]: value })\n  }\n\n  render() {\n    const { propSchema, formData } = this.props\n    if (!propSchema) {\n      return null\n    }\n\n    if (!this.elements) {\n      this.elements = propSchema.map(item => factory.createElement(item))\n    }\n    // console.log('ant render:', formData)\n\n    return (\n      <ElementProvider value={{ value: formData, mode: RENDER_MODE_PREVIEW, onChange: this.onChange }}>\n        <div>\n          {\n            this.elements && this.elements.map(ele => (\n              <ElementControl\n                key={ele.key}\n                element={ele}\n                renderOption={{ withBox: false }}\n              />\n            ))\n          }\n        </div>\n      </ElementProvider>\n    )\n  }\n}\n\nexport default FormRender\n","import React from 'react'\r\n// import ReactDom from 'react-dom'\r\nimport { Modal, Button } from 'antd'\r\n// import { inject, observer } from 'mobx-react'\r\n// import { Store } from '../../store'\r\n// import FormRenderAnt from './FormRenderAnt'\r\nimport AntRender from '../form-render/AntRender'\r\nimport { JsonFormat } from '../../types'\r\nimport styles from './index.module.less'\r\n\r\ntype PropType = {\r\n  jsonSchema?: Array<JsonFormat>\r\n}\r\n\r\ntype StateType = {\r\n  visible: boolean,\r\n  formData: any\r\n}\r\n\r\nclass Preview extends React.Component<PropType, StateType> {\r\n  modal: React.RefObject<Modal>\r\n  ref: React.RefObject<HTMLDivElement>\r\n\r\n  constructor(props: PropType) {\r\n    super(props)\r\n    this.modal = React.createRef()\r\n    this.ref = React.createRef()\r\n\r\n    this.state = {\r\n      visible: false,\r\n      formData: {}\r\n    }\r\n  }\r\n\r\n  preview = (): void => {\r\n    this.setState({\r\n      visible: true\r\n    }, () => {\r\n      // const { jsonSchema } = this.props\r\n\r\n      // if (jsonSchema) {\r\n      //   setTimeout(() => {\r\n      //     ReactDom.render(\r\n      //       <AntRender propSchema={jsonSchema} />,\r\n      //       this.ref.current\r\n      //     )\r\n      //   }, 0)\r\n      // }\r\n    })\r\n  }\r\n\r\n  showData = () => {\r\n    const { formData } = this.state\r\n    console.log('form data:', formData)\r\n  }\r\n\r\n  onChange = (formData: any) => {\r\n    this.setState({\r\n      formData\r\n    })\r\n  }\r\n\r\n  handleCancel = (e: any) => {\r\n    this.setState({\r\n      visible: false\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { jsonSchema } = this.props\r\n    const { formData } = this.state\r\n\r\n    return jsonSchema && (\r\n      <div className={styles.preview}>\r\n        <Button type=\"link\" size=\"small\" onClick={this.preview}>预览</Button>\r\n        <Modal\r\n          title=\"页面预览\"\r\n          visible={this.state.visible}\r\n          onCancel={this.handleCancel}\r\n          okText=\"获取数据\"\r\n          onOk={this.showData}\r\n          destroyOnClose\r\n          width=\"100%\"\r\n          style={{top: 0}}\r\n          ref={this.modal}\r\n        >\r\n          <AntRender\r\n            propSchema={jsonSchema}\r\n            formData={formData}\r\n            onChange={this.onChange}\r\n          />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Preview\r\n","import React from 'react'\r\nimport { Button, Input, Modal, message } from 'antd'\r\nimport { toJS } from 'mobx'\r\nimport { inject, observer } from 'mobx-react'\r\nimport JsonView from '../json-view'\r\nimport History from './History'\r\nimport Preview from './Preview'\r\nimport { Store } from '../../store'\r\nimport styles from './index.module.less'\r\n\r\nconst { TextArea } = Input\r\n\r\ntype CompStateType = {\r\n  showJson: boolean,\r\n  jsonData: object\r\n  showImport: boolean,\r\n  jsonImported: string,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass Center extends React.Component<{\r\n  rootStore?: Store\r\n}, CompStateType> {\r\n  constructor(props: {\r\n    rootStore?: Store\r\n  }) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      showJson: false,\r\n      jsonData: {},\r\n      showImport: false,\r\n      jsonImported: '',\r\n    }\r\n  }\r\n\r\n  importJson = (): void => {\r\n    this.setState({\r\n      showImport: true,\r\n      jsonImported: ''\r\n    })\r\n  }\r\n\r\n  // 执行配置数据导入\r\n  doImport = (): void => {\r\n    const store = this.props.rootStore\r\n\r\n    let jsonObj = null\r\n\r\n    try {\r\n      jsonObj = JSON.parse(this.state.jsonImported)\r\n    } catch(e) {\r\n      console.warn(e.message)\r\n      message.error('无效的 JSON 格式，请检查输入')\r\n      return\r\n    }\r\n\r\n    store!.loadElements(jsonObj)\r\n    this.setState({\r\n      showImport: false\r\n    })\r\n  }\r\n\r\n  generateJson = (): void => {\r\n    this.setState({\r\n      jsonData: this.props.rootStore!.jsonData,\r\n      showJson: true\r\n    })\r\n  }\r\n\r\n  hideJson = (): void => {\r\n    this.setState({\r\n      showJson: false\r\n    })\r\n  }\r\n\r\n  doCopy = (): void => {\r\n    const { jsonData } = this.state\r\n    navigator.clipboard.writeText(JSON.stringify(jsonData))\r\n    message.success('已将此配置复制到粘贴板')\r\n  }\r\n\r\n  render() {\r\n    const dlgStyle = {\r\n      height: '425px', overflow: 'auto'\r\n    }\r\n\r\n    const store = this.props.rootStore!\r\n\r\n    return (\r\n      <div className={styles.menulist}>\r\n        <Button type=\"link\" size=\"small\" onClick={this.importJson}>导入配置</Button>\r\n        <Button type=\"link\" size=\"small\" onClick={this.generateJson}>生成配置</Button>\r\n        <History />\r\n        <div className={styles.right}>\r\n          <Preview jsonSchema={toJS(store.jsonData)} />\r\n        </div>\r\n        <Modal\r\n          title=\"导入配置\"\r\n          cancelText=\"关闭\"\r\n          okText=\"导入\"\r\n          centered\r\n          visible={this.state.showImport}\r\n          onOk={this.doImport}\r\n          onCancel={() => this.setState({ showImport: false})}\r\n          bodyStyle={dlgStyle}\r\n        >\r\n          <TextArea\r\n            className={styles.import_text}\r\n            value={this.state.jsonImported}\r\n            onChange={(e) => this.setState({ jsonImported: e.target.value})}\r\n          />\r\n        </Modal>\r\n        <Modal\r\n          title=\"生成配置\"\r\n          cancelText=\"关闭\"\r\n          okText=\"复制\"\r\n          centered\r\n          visible={this.state.showJson}\r\n          onOk={this.doCopy}\r\n          onCancel={this.hideJson}\r\n          bodyStyle={dlgStyle}\r\n        >\r\n          <JsonView json={this.state.jsonData} />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Center\r\n","import React, { ReactElement } from 'react'\r\nimport { observer,inject } from \"mobx-react\"\r\nimport { Store } from '../../../store'\r\nimport eventBus, { EventTypes } from '../../../core/utils/eventBus'\r\nimport IElement from '../../../core/element/IElement'\r\nimport { POINT } from '../../../types'\r\nimport styles from './index.module.less'\r\n\r\ninterface OwnProps {\r\n  // elements: Array<ElementOption>,\r\n  rootStore?: Store\r\n}\r\n\r\ninterface OwnState {\r\n  // elements: Array<ElementOption>,\r\n  visible: boolean,\r\n  point?: POINT,\r\n  element?: IElement,\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ContextMenu extends React.Component<OwnProps, OwnState> {\r\n  ref: React.RefObject<HTMLDivElement>\r\n\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n\r\n    this.ref = React.createRef()\r\n    this.state = {\r\n      visible: false,\r\n    }\r\n  }\r\n\r\n  showMenu = (e : { point: POINT, element: IElement }) => {\r\n    this.setState({\r\n      visible: true,\r\n      point: e.point,\r\n      element: e.element\r\n    }, () => {\r\n      setTimeout(() => {\r\n        const current = this.state.point!\r\n        const adjusted = this.adjustPos(e.point)\r\n        if (adjusted.x !== current.x || adjusted.y !== current.y) {\r\n          this.setState({\r\n            point: adjusted\r\n          })\r\n        }\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  hideMenu = () => {\r\n    this.setState({\r\n      visible: false,\r\n      point: undefined,\r\n      element: undefined\r\n    })\r\n  }\r\n\r\n  onBodyClick = (e: any) => {\r\n    if (this.ref.current && this.ref.current!.contains(e.target)) {\r\n      return\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  componentWillMount() {\r\n    eventBus.addListener(EventTypes.CONTEXT_MENU, this.showMenu)\r\n    document.addEventListener('click', this.onBodyClick, false)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    eventBus.removeListener(EventTypes.CONTEXT_MENU, this.showMenu)\r\n    document.removeEventListener('click', this.onBodyClick, false)\r\n  }\r\n\r\n  /**\r\n   * 根据窗口调整弹出框的位置\r\n   * @param pointer 当前位置\r\n   */\r\n  adjustPos(current: POINT): POINT {\r\n    const { current: box } = this.ref\r\n    if (!box) {\r\n      return { x: 0, y: 0}\r\n    }\r\n\r\n    const currentRect = box.getBoundingClientRect()\r\n    const { left, top, right, bottom } = currentRect\r\n    const { clientWidth, clientHeight} = document.documentElement\r\n\r\n    let retX = left\r\n    let retY = top\r\n\r\n    if (bottom > clientHeight) {\r\n      retY = top - bottom + clientHeight\r\n    }\r\n\r\n    if (right > clientWidth) {\r\n      retX = left - right + clientWidth\r\n    }\r\n\r\n    return { x: retX, y: retY }\r\n  }\r\n\r\n  onDel = (e: any) => {\r\n    if (this.state.element) {\r\n      this.props.rootStore!.removeElement(this.state.element)\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  onCopy = () => {\r\n    if (this.state.element) {\r\n      this.props.rootStore!.cloneElement(this.state.element)\r\n    }\r\n\r\n    this.hideMenu()\r\n  }\r\n\r\n  render(): ReactElement | null {\r\n    const { point, element } = this.state\r\n\r\n    if (!point || !element) {\r\n      return null\r\n    }\r\n\r\n    const { x, y } = point\r\n\r\n    const menuStyle = {\r\n      transform: `translate3d(${x}px, ${y}px, 0)`\r\n    }\r\n\r\n    return this.state.visible ? (\r\n      <div className={styles.contextmenu}>\r\n        <div className={styles.menu_panel} style={menuStyle} ref={this.ref}>\r\n          <div className={styles.menu_panel__header}>\r\n            <span className={styles.menu_panel__header__type}>{element.type}</span>\r\n            {\r\n              element.name && (<span className={styles.menu_panel__header__name}> | {element.name}</span>)\r\n            }\r\n          </div>\r\n          <ul className={styles.menu_panel__body}>\r\n            <li className={styles.menu_panel__item} onClick={this.onDel}>删除</li>\r\n            <li className={styles.menu_panel__item} onClick={this.onCopy}>复制</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    ) : null\r\n  }\r\n}\r\n\r\nexport default ContextMenu\r\n","import React, { ReactElement } from 'react'\r\nimport { observer,inject } from \"mobx-react\"\r\nimport { Store } from '../../store'\r\nimport ElementControl from '../../core/element/ElementControl'\r\nimport { ElementProvider } from '../../core/element/ElementContext'\r\nimport ContextMenu from './contextmenu'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\nimport styles from './index.module.less'\r\n\r\ninterface OwnProps {\r\n  // elements: Array<ElementOption>,\r\n  rootStore?: Store\r\n}\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass DesignPanel extends React.Component<OwnProps> {\r\n  constructor(props: OwnProps) {\r\n    super(props)\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange(e: React.ChangeEvent, name: string) {\r\n    const { rootStore } = this.props\r\n    rootStore && rootStore.handleFormChangeEvent(e, name)\r\n  }\r\n\r\n  render(): ReactElement {\r\n    const { rootStore } = this.props\r\n    const { placeholder } = rootStore!\r\n    // const elements = rootStore!.elements\r\n\r\n    const page = rootStore!.rootElement\r\n\r\n    const placeholderStyle = placeholder ? {\r\n      width: `${placeholder.position.width}px`,\r\n      height: `${placeholder.position.height}px`,\r\n      transform: `translate3d(${placeholder.position.x}px, ${placeholder.position.y}px, 0)`\r\n    } : {\r\n      opacity: 0\r\n    }\r\n\r\n    return (\r\n      <div className={styles.panel}>\r\n        <ElementProvider value={{ mode: RENDER_MODE_DESIGN, onChange: this.onChange }}>\r\n          <ElementControl\r\n            element={page}\r\n            renderOption={{withBox: true, withLabel: true}}\r\n          />\r\n          <div className={styles.placeholder} style={placeholderStyle}></div>\r\n          <ContextMenu />\r\n        </ElementProvider>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DesignPanel\r\n","import React from 'react'\r\nimport Menus from './menus'\r\nimport DesignPanel from '../design-panel'\r\nimport styles from './index.module.less'\r\n\r\nclass Center extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className={styles.menus}>\r\n          <Menus />\r\n        </div>\r\n        <DesignPanel></DesignPanel>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Center\r\n","import React, { SFC } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { observable } from 'mobx'\r\nimport { JsonFormat, CommonPropType, StaticPropsType, RECT } from '../../types'\r\nimport ElementOption from '../ElementOption'\r\nimport ElementCategory from './ElementCategory'\r\nimport factory from '../ElementFactory'\r\nimport IElement, { RenderOption, ElementContructor } from './IElement'\r\nimport { getItem } from './RenderCache'\r\nimport eventBus from '../utils/eventBus'\r\n// import { triggerLayoutChange } from '../utils/index'\r\nimport { EventEmitter } from 'events'\r\n\r\nexport default abstract class Element implements IElement {\r\n  private componentCtor: typeof React.Component | SFC | null = null\r\n  private propsCache: Map<string, CommonPropType> = new Map()\r\n  public eventBus: EventEmitter = eventBus\r\n\r\n  @observable public key: string\r\n  @observable public value?: any\r\n  @observable public name?: string\r\n  @observable public dataType?: string\r\n  @observable public children?: Array<IElement>\r\n  @observable public parent?: IElement | null\r\n  @observable public props?: CommonPropType\r\n\r\n  static category: ElementCategory = ElementCategory.BASIC\r\n  static icon: string = 'file'\r\n  static displayName: string = ''\r\n  static type:string = ''\r\n  /**\r\n   * 控件默认的属性列表（包含默认值）\r\n   */\r\n  static props: StaticPropsType = []\r\n\r\n  constructor(option: ElementOption) {\r\n    this.key = option.key || ''\r\n    // this.type = this.ctor().type\r\n    this.name = option.name\r\n    this.dataType = option.dataType\r\n\r\n    this.children = option.children && option.children.map(item => factory.createElement(item, this))\r\n    this.parent = null\r\n\r\n    const defaultProps = this.defaultProps()\r\n    const defaultPropVals: {[key: string]: any} = {}\r\n\r\n    if (defaultProps && defaultProps.length > 0) {\r\n      defaultProps.forEach(item => {\r\n        if (item && item.name) {\r\n          item.name && this.propsCache.set(item.name, item)\r\n          defaultPropVals[item.name] = item.default\r\n        }\r\n      })\r\n    }\r\n\r\n    this.props = Object.assign({}, defaultPropVals, option.props)\r\n  }\r\n\r\n  get type() {\r\n    return this.ctor().type\r\n  }\r\n\r\n  // 转为 json 表示格式\r\n  jsonData(): JsonFormat {\r\n    const ret: JsonFormat = {\r\n      key: this.key,\r\n      type: this.type,\r\n      props: this.props,\r\n      name: this.name,\r\n      dataType: this.dataType,\r\n    }\r\n\r\n    if (this.children) {\r\n      ret.children = this.children.map(item => item.jsonData())\r\n    }\r\n\r\n    return JSON.parse(JSON.stringify(ret))\r\n  }\r\n\r\n  // 是否允许拖动\r\n  canDrag(): boolean {\r\n    return true\r\n  }\r\n\r\n  // 是否允许将其拖入其他控件\r\n  canDropTo(target: IElement): boolean {\r\n    return true\r\n  }\r\n\r\n  // 是否允许将其他控件拖入\r\n  canBeDroped(target?: IElement): boolean {\r\n    return false\r\n  }\r\n\r\n  // 是否允许删除此控件\r\n  canRemove(): boolean {\r\n    return true\r\n  }\r\n\r\n  // 在 _render 元素之前渲染的东东\r\n  renderBefore(props: any, renderOption?: RenderOption): React.ReactElement | null {\r\n    return null\r\n  }\r\n\r\n  // 在 _render 元素之后渲染的东东\r\n  renderAfter(props: any, renderOption?: RenderOption): React.ReactElement | null {\r\n    return null\r\n  }\r\n\r\n  // render 之前对 props 进行预处理\r\n  prepareProps(props: any): any {\r\n    return props\r\n  }\r\n\r\n  // 获取渲染控件\r\n  abstract _getComponent(): typeof React.Component | SFC<any>\r\n\r\n  getComponent(): typeof React.Component | SFC {\r\n    if (!this.componentCtor) {\r\n      this.componentCtor = this._getComponent()\r\n    }\r\n\r\n    return this.componentCtor\r\n  }\r\n\r\n  // 获取控件所属类的定义\r\n  ctor(): ElementContructor {\r\n    return this.constructor as ElementContructor\r\n  }\r\n\r\n  /**\r\n   * 是否为行内元素\r\n   */\r\n  isInline(): boolean {\r\n    return !!this.ctor().inline\r\n  }\r\n\r\n  // 获取控件的默认属性值\r\n  defaultProps(): StaticPropsType {\r\n    // console.log('defaultProps', this.ctor().props)\r\n    return this.ctor().props || []\r\n  }\r\n\r\n  // 获取属性类型\r\n  getPropType(name: string): string {\r\n    const prop = this.propsCache.get(name)\r\n    return (prop && prop.dataType) || 'string'\r\n  }\r\n\r\n  // get real rendered dom element\r\n  getRenderedDom(): HTMLElement | undefined {\r\n    const component = getItem(this.key)\r\n    if (component) {\r\n      const domNode = ReactDOM.findDOMNode(component.current) as HTMLElement\r\n      return domNode\r\n    }\r\n  }\r\n\r\n  getClientRect() {\r\n    const dom = this.getRenderedDom()\r\n    if (dom) {\r\n      return dom.getBoundingClientRect() as RECT\r\n    }\r\n\r\n    return {x: 0, y: 0}\r\n  }\r\n}\r\n","import { StaticMemberDeco } from \"../types\"\r\nimport IElement from \"./element/IElement\"\r\nimport React from \"react\"\r\n\r\n/**\r\n * 为 class 增加静态成员\r\n */\r\nexport const staticMembers = (members: StaticMemberDeco) => {\r\n  return function(target: any) {\r\n    for (let key in members) {\r\n      target[key] = (members as any)[key]\r\n    }\r\n  }\r\n}\r\n\r\ntype DropToType = string | Array<string>\r\n\r\n/**\r\n * 指定可以拖入的其他组件的类型，参数为空表示允许任何类型\r\n * @param source 控件类型，多个类型可用数组表示，字符串以 ! 开头表示排除此控件类型\r\n */\r\nexport const canBeDroped = (source?: DropToType) => {\r\n  const checkTypes: Array<string> = source ? (Array.isArray(source) ? source : [source]) : []\r\n\r\n  return function(target: any) {\r\n    target.prototype.canBeDroped = function(element: IElement) {\r\n      if (!element) { // 若参数为空，默认返回 true\r\n        return true\r\n      }\r\n\r\n      const targetType = element.ctor().type\r\n\r\n      return checkTypes.every(item => {\r\n        if (item.charAt(0) === '!') {\r\n          return item.substring(1) !== targetType\r\n        } else {\r\n          return item === targetType\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 限制拖动后可放置的容器类型，参数为空表示允许任何类型\r\n * @param container 控件类型，多个类型可用数组表示，字符串以 ! 开头表示排除此控件类型\r\n */\r\nexport const canDropTo = (container?: DropToType) => {\r\n  const checkTypes: Array<string> = container ? (Array.isArray(container) ? container : [container]) : []\r\n\r\n  return function(target: any) {\r\n    /**\r\n     * 判断是否可以拖放到目标容器内\r\n     */\r\n    target.prototype.canDropTo = function(element: IElement) {\r\n      const targetType = element.ctor().type\r\n\r\n      return checkTypes.every(item => {\r\n        if (item.charAt(0) === '!') {\r\n          return item.substring(1) !== targetType\r\n        } else {\r\n          return item === targetType\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 部分组件是函数式，无法统一处理 ref,使用此修饰器将其转为 class 组件\r\n */\r\nexport const sfcToCls = (Target: React.ComponentType) => {\r\n  return class extends React.PureComponent {\r\n    render() {\r\n      const { props } = this\r\n      return <Target {...props} />\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '普通文本',\r\n  category: ElementCategory.BASIC,\r\n  type: 'plain-text',\r\n  icon: 'file-text',\r\n  props: [{ // 右侧属性面板中可以编辑的属性列表\r\n    name: 'children',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '文本',\r\n      rows: 4,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '普通文本'\r\n  }]\r\n})\r\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\r\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component {\r\n      render() {\r\n        return <p {...this.props}></p>\r\n      }\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '链接',\r\n  category: ElementCategory.BASIC,\r\n  type: 'link',\r\n  icon: 'link',\r\n  props: [{ // 右侧属性面板中可以编辑的属性列表\r\n    name: 'children',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '链接文本',\r\n      rows: 2,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '点击跳转'\r\n  }, { // 右侧属性面板中可以编辑的属性列表\r\n    name: 'href',\r\n    dataType: 'string',\r\n    type: 'textarea',\r\n    props: {\r\n      label: '链接地址',\r\n      rows: 4,\r\n      props: {\r\n        autoSize: { minRows: 2, maxRows: 6 }\r\n      }\r\n    },\r\n    default: '#'\r\n  }, {\r\n    name: 'target',\r\n    type: 'select',\r\n    props: {\r\n      label: '打开方式',\r\n      options: [\r\n        { label: '_blank', value: '_blank' },\r\n        { label: '_self', value: '_self' },\r\n        { label: '_parent', value: '_parent' },\r\n        { label: '_top', value: '_top' },\r\n      ]\r\n    },\r\n    default: '_blank',\r\n    dataType: 'string'\r\n  }]\r\n})\r\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\r\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component {\r\n      render() {\r\n        return <a {...this.props}></a>\r\n      }\r\n    }\r\n  }\r\n}\r\n","import React, { Component, SFC } from 'react'\r\n// import { inject } from 'mobx-react'\r\nimport { Form } from 'antd'\r\nimport Element from \"../../core/element/Element\"\r\n// import { Store } from '../../store'\r\nimport { canBeDroped, staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { ElementConsumer } from '../../core/element/ElementContext'\r\n\r\n/**\r\n * 高阶组件装饰器，封装表单控件统一行为：\r\n * - 注入 store\r\n * - 监听 change 事件\r\n */\r\nexport function formControl(target: Object, name: string, descriptor: TypedPropertyDescriptor<any>) {\r\n  const oldValue = descriptor.value\r\n  descriptor.value = function() {\r\n    const retComp = oldValue!.apply(this) as React.ComponentType\r\n    return wrapComponent(retComp)\r\n  }\r\n\r\n  return descriptor\r\n}\r\n\r\nexport function wrapComponent(Comp: typeof Component | SFC): typeof React.Component {\r\n  // @inject('rootStore')\r\n  // @observer\r\n  class RenderCls extends React.Component<{\r\n    // rootStore: Store,\r\n    name: string,\r\n    label: string,\r\n    value?: any,\r\n    className?: string,\r\n    onClick?: Function\r\n  }> {\r\n    render() {\r\n      const { name, label, className, value: transferValue, ...props } = this.props\r\n      // console.log('transfer value', transferValue)\r\n\r\n      return (\r\n        <ElementConsumer>\r\n          {\r\n            ({ value, onChange }) => (\r\n              <Form.Item label={label} colon={false} className={className}>\r\n                <Comp\r\n                  {...props}\r\n                  name={ name }\r\n                  value={value ? value[name] : transferValue}\r\n                  onChange={(e: React.ChangeEvent) => onChange!(e, name)}\r\n                />\r\n              </Form.Item>\r\n            )\r\n          }\r\n        </ElementConsumer>\r\n      )\r\n    }\r\n  }\r\n\r\n  return RenderCls\r\n}\r\n\r\n@staticMembers({\r\n  displayName: '表单',\r\n  category: ElementCategory.FORM,\r\n  type: 'form',\r\n  icon: 'form',\r\n  props: [{\r\n    name: 'layout',\r\n    type: 'select',\r\n    props: {\r\n      label: '对齐方式',\r\n      options: [\r\n        { label: '水平', value: 'horizontal' },\r\n        { label: '垂直', value: 'vertical' },\r\n        { label: '内联', value: 'inline' }]\r\n    },\r\n    default: 'horizontal',\r\n    dataType: 'string'\r\n  }, {\r\n    name: 'labelCol',\r\n    type: 'json',\r\n    props: {\r\n      label: '标签宽度'\r\n    },\r\n    default: { \"span\": 6 },\r\n    dataType: 'object'\r\n  }, {\r\n    name: 'wrapperCol',\r\n    type: 'json',\r\n    props: {\r\n      label: '内容宽度'\r\n    },\r\n    default: { \"span\": 14 },\r\n    dataType: 'object'\r\n  }]\r\n})\r\n@canBeDroped()\r\nclass InnerCls extends Element {\r\n  _getComponent() {\r\n    return class extends React.Component<any> {\r\n      ref: any\r\n\r\n      constructor(props: any) {\r\n        super(props)\r\n        this.ref = React.createRef()\r\n      }\r\n\r\n      render() {\r\n        return (\r\n          <Form ref={this.ref} {...this.props}>\r\n          </Form>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  prepareProps(props: any) {\r\n    if (props.layout !== 'horizontal') {\r\n      props.labelCol = undefined\r\n      props.wrapperCol = undefined\r\n    }\r\n\r\n    return props\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { Input } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { formControl } from './Form'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\n@staticMembers({\r\n  displayName: '输入框',\r\n  category: ElementCategory.FORM,\r\n  type: 'input',\r\n  icon: 'edit',\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '输入框',\r\n  }, {\r\n    name: 'type',\r\n    type: 'select',\r\n    props: {\r\n      label: '输入类型',\r\n      options: [\r\n        { label: '文本', value: 'text' },\r\n        { label: '密码', value: 'password' }\r\n      ]\r\n    },\r\n    default: 'text',\r\n  }, {\r\n    name: 'placeholder',\r\n    type: 'input',\r\n    props: {\r\n      label: '提示文字'\r\n    },\r\n    default: '请输入',\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return Input\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","// import React from 'react'\r\nimport { Input } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { formControl } from './Form'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\nconst { TextArea } = Input\r\n\r\n@staticMembers({\r\n  displayName: '文本域',\r\n  category: ElementCategory.FORM,\r\n  type: 'textarea',\r\n  icon: 'edit',\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '文本域',\r\n  }, {\r\n    name: 'placeholder',\r\n    type: 'input',\r\n    props: {\r\n      label: '提示文字'\r\n    },\r\n    default: '请输入',\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return TextArea\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import React from 'react'\r\nimport { Select } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport { staticMembers } from '../../core/decorator'\r\nimport { formControl } from './Form'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\n\r\nconst { Option } = Select\r\n\r\n@staticMembers({\r\n  displayName: '下拉选择',\r\n  category: ElementCategory.FORM,\r\n  type: 'select',\r\n  icon: 'select',\r\n  props: [{\r\n    name: 'label',\r\n    type: 'input',\r\n    props: {\r\n      label: '标签文字',\r\n    },\r\n    default: '下拉框',\r\n  }, { // 右侧属性面板中可以编辑的属性列表\r\n    name: 'options',\r\n    type: 'list',\r\n    props: {\r\n      label: '选项列表'\r\n    },\r\n    default: [\r\n      { value: 0, label: '选项一' },\r\n      { value: 1, label: '选项二' },\r\n      { value: 2, label: '选项三' },\r\n    ],\r\n    dataType: 'string'\r\n  }]\r\n})\r\nclass InnerCls extends Element {\r\n  @formControl\r\n  _getComponent() {\r\n    return function(props: any) {\r\n      const { options = [], ...innerProps} = props\r\n\r\n      return (\r\n        <Select {...innerProps}>\r\n          {\r\n            options.map((item: any) => (\r\n              <Option key={item.value} value={item.value}>{item.label}</Option>\r\n            ))\r\n          }\r\n        </Select>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { TreeSelect } from 'antd'\nimport Element from '../../core/element/Element'\nimport { staticMembers } from '../../core/decorator'\nimport { formControl } from './Form'\nimport ElementCategory from '../../core/element/ElementCategory'\n\n@staticMembers({\n  displayName: '树选择',\n  category: ElementCategory.FORM,\n  type: 'tree-select',\n  icon: 'cluster',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '树选择',\n  }, {\n    name: 'placeholder',\n    type: 'input',\n    props: {\n      label: '提示文字',\n    },\n    default: '',\n  }, {\n    name: 'treeData',\n    type: 'json',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      {\n        title: 'Node1',\n        value: '0-0',\n        key: '0-0',\n        children: [\n          {\n            title: 'Child Node1',\n            value: '0-0-1',\n            key: '0-0-1',\n          },\n          {\n            title: 'Child Node2',\n            value: '0-0-2',\n            key: '0-0-2',\n          },\n        ],\n      },\n      {\n        title: 'Node2',\n        value: '0-1',\n        key: '0-1',\n      },\n    ],\n    dataType: 'string'\n  }]\n})\nclass InnerCls extends Element {\n  @formControl\n  _getComponent() {\n    return TreeSelect\n  }\n}\n\nexport default InnerCls\n","import { Row } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { canBeDroped, staticMembers, canDropTo } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '行(栅格)',\r\n  category: ElementCategory.LAYOUT,\r\n  type: 'row',\r\n  icon: 'column-width',\r\n  props: [{\r\n    name: 'align',\r\n    type: 'select',\r\n    props: {\r\n      label: '垂直对齐',\r\n      options: [\r\n        { label: '顶部对齐', value: 'top' },\r\n        { label: '居中对齐', value: 'middle' },\r\n        { label: '底部对齐', value: 'bottom' }]\r\n    },\r\n    default: 'middle',\r\n    dataType: 'string'\r\n  }]\r\n})\r\n@canBeDroped('col')\r\n@canDropTo('!row') // 不能直接拖到另一个行控件内\r\nclass InnerCls extends Element {\r\n  _getComponent() {\r\n    return Row\r\n  }\r\n}\r\n\r\nexport default InnerCls\r\n","import { Col } from 'antd'\r\nimport Element from '../../core/element/Element'\r\nimport ElementCategory from '../../core/element/ElementCategory'\r\nimport { staticMembers, canBeDroped, canDropTo } from '../../core/decorator'\r\n\r\n@staticMembers({\r\n  displayName: '列(栅格)',\r\n  category: ElementCategory.LAYOUT,\r\n  type: 'col',\r\n  icon: 'column-height',\r\n  props: [{\r\n    name: 'span',\r\n    type: 'input',\r\n    props: {\r\n      label: '列宽'\r\n    },\r\n    default: 11,\r\n    dataType: 'number'\r\n  }, {\r\n    name: 'offset',\r\n    type: 'input',\r\n    props: {\r\n      label: '偏移'\r\n    },\r\n    default: 1,\r\n    dataType: 'number'\r\n  }]\r\n})\r\n@canDropTo('row') // 列控件只可被拖入行控件内\r\n@canBeDroped('!col') // 不可拖入其他列控件\r\nexport default class extends Element {\r\n  _getComponent() {\r\n    return Col\r\n  }\r\n}\r\n","import { Button } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '按钮',\n  category: ElementCategory.BASIC,\n  type: 'button',\n  icon: 'border',\n  inline: true, // 行内元素\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'children',\n    type: 'input',\n    props: {\n      label: '按钮文本'\n    },\n    default: '按钮',\n    dataType: 'string'\n  }, {\n    name: 'type',\n    type: 'select',\n    props: {\n      label: '风格',\n      options: [\n        { label: 'Primary', value: 'primary' },\n        { label: 'Dashed', value: 'dashed' },\n        { label: 'Danger', value: 'danger' },\n        { label: 'Link', value: 'link' },\n        { label: 'Default', value: 'default' },\n      ]\n    },\n    default: 'default',\n    dataType: 'string'\n  }, {\n    name: 'size',\n    type: 'radio',\n    props: {\n      label: '尺寸',\n      options: [\n        { label: 'L', value: 'large'},\n        { label: 'M', value: 'default'},\n        { label: 'S', value: 'small'}\n      ],\n      buttonStyle: 'solid'\n    },\n    default: 'default',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Button\n  }\n}\n","\nimport { Icon } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers, sfcToCls/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '图标',\n  category: ElementCategory.BASIC,\n  type: 'Icon',\n  icon: 'file-image',\n  inline: true, // 行内元素\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'type',\n    type: 'input',\n    props: {\n      label: '图标名称'\n    },\n    default: 'smile',\n    dataType: 'string'\n  }, {\n    name: 'spin',\n    type: 'switch',\n    props: {\n      label: '旋转动画'\n    },\n    default: false,\n    dataType: 'boolean'\n  }, {\n    name: 'rotate',\n    type: 'input',\n    props: {\n      label: '旋转角度'\n    },\n    default: 0,\n    dataType: 'number'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return sfcToCls(Icon)\n  }\n}\n","import React from 'react'\nimport { Radio } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '单选框',\n  category: ElementCategory.FORM,\n  type: 'radio',\n  icon: 'tablet',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '单选框',\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'list',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      { value: 0, label: '选项一'},\n      { value: 1, label: '选项二'},\n      { value: 2, label: '选项三'},\n    ],\n    dataType: 'string'\n  }, {\n    name: 'buttonStyle',\n    type: 'radio',\n    props: {\n      label: '按钮风格',\n      options: [\n        { value: '', label: '无'},\n        { value: 'solid', label: 'Solid'},\n        { value: 'outline', label: 'Outline'},\n      ],\n      buttonStyle: 'solid',\n    },\n    default: '',\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return function(props: any) {\n      const { options = [], ...other } = props\n\n      return props.buttonStyle ? (\n        <Radio.Group {...other} >\n          {\n            options.map((item: any) => (\n              <Radio.Button value={item.value} key={item.value}>{item.label}</Radio.Button>\n            ))\n          }\n        </Radio.Group>\n      ) : (\n        <Radio.Group {...props} />\n      )\n    }\n  }\n}\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\nconst CheckboxGroup = Checkbox.Group;\n\n@staticMembers({\n  displayName: '多选框',\n  category: ElementCategory.FORM,\n  type: 'checkbox',\n  icon: 'check-square',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '多选框',\n    dataType: 'string'\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'list',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      { value: 0, label: '选项一' },\n      { value: 1, label: '选项二' },\n      { value: 2, label: '选项三' },\n    ],\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return function (props: any) {\n      // console.log('checkbox props', props)\n      const { options = [], ...innerProps } = props\n\n      return (\n        <CheckboxGroup\n          options={options}\n          { ...innerProps }\n        />\n      )\n    }\n  }\n}\n","import React from 'react'\nimport { Switch } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '开关',\n  category: ElementCategory.FORM,\n  type: 'switch',\n  icon: 'switcher',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '开关',\n    dataType: 'string'\n  }, {\n    name: 'size',\n    type: 'radio',\n    props: {\n      label: '尺寸',\n      options: [\n        { label: 'M', value: 'default' },\n        { label: 'S', value: 'small' }\n      ],\n      buttonStyle: 'solid'\n    },\n    default: 'default',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return class extends React.Component<any> {\n      render() {\n        const { value, ...other } = this.props\n        const props = { ...other, checked: !!value }\n\n        return (\n          <Switch {...props} />\n        )\n      }\n    }\n  }\n\n  // prepareProps(props: any) {\n  //   const { value, ...other } = props\n  //   return { ...other, checked: !!value }\n  // }\n}\n","import { Cascader } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '级联选择',\n  category: ElementCategory.FORM,\n  type: 'cascader',\n  icon: 'diff',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '级联选择',\n    dataType: 'string'\n  }, { // 右侧属性面板中可以编辑的属性列表\n    name: 'options',\n    type: 'json',\n    props: {\n      label: '选项列表'\n    },\n    default: [\n      {\n        value: 'zhejiang',\n        label: 'Zhejiang',\n        children: [\n          {\n            value: 'hangzhou',\n            label: 'Hangzhou',\n            children: [\n              {\n                value: 'xihu',\n                label: 'West Lake',\n              },\n            ],\n          },\n        ],\n      },\n      {\n        value: 'jiangsu',\n        label: 'Jiangsu',\n        children: [\n          {\n            value: 'nanjing',\n            label: 'Nanjing',\n            children: [\n              {\n                value: 'zhonghuamen',\n                label: 'Zhong Hua Men',\n              },\n            ],\n          },\n        ],\n      },\n    ],\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Cascader\n  }\n}\n","import { DatePicker } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '日期选择',\n  category: ElementCategory.FORM,\n  type: 'date_picker',\n  icon: 'calendar',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '日期选择',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return DatePicker\n  }\n}\n","\nimport { TimePicker } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '时间选择',\n  category: ElementCategory.FORM,\n  type: 'time_picker',\n  icon: 'clock-circle',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '时间选择',\n    dataType: 'string'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return TimePicker\n  }\n}\n","import { Rate } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '评分',\n  category: ElementCategory.FORM,\n  type: 'rate',\n  icon: 'star',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '评分',\n    dataType: 'string'\n  }, {\n    name: 'count',\n    type: 'input',\n    props: {\n      label: '总数'\n    },\n    default: 5,\n    dataType: 'number'\n  }, {\n    name: 'defaultValue',\n    type: 'input',\n    props: {\n      label: '默认值'\n    },\n    default: 0,\n    dataType: 'number'\n  }, {\n    name: 'allowHalf',\n    type: 'switch',\n    props: {\n      label: '支持半选'\n    },\n    default: false,\n    dataType: 'boolean'\n  }]\n})\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Rate\n  }\n}\n","import { Slider } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\nimport { formControl } from './Form'\n\n@staticMembers({\n  displayName: '滑动输入条',\n  category: ElementCategory.FORM,\n  type: 'slider',\n  icon: 'column-width',\n  props: [{ // 右侧属性面板中可以编辑的属性列表\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签'\n    },\n    default: '滑动输入条',\n    dataType: 'string'\n  }, {\n    name: 'min',\n    type: 'input',\n    props: {\n      label: '最小值'\n    },\n    default: 0,\n    dataType: 'number'\n  }, {\n    name: 'max',\n    type: 'input',\n    props: {\n      label: '最大值'\n    },\n    default: 100,\n    dataType: 'number'\n  }, {\n    name: 'step',\n    type: 'input',\n    props: {\n      label: '步长'\n    },\n    default: 100,\n    dataType: 'number'\n  }, {\n    name: 'range',\n    type: 'switch',\n    props: {\n      label: '范围选择'\n    },\n    default: false,\n    dataType: 'boolean'\n  }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  @formControl\n  _getComponent() {\n    return Slider\n  }\n}\n","import { Transfer } from 'antd'\nimport Element from '../../core/element/Element'\nimport { staticMembers } from '../../core/decorator'\nimport { formControl } from './Form'\nimport ElementCategory from '../../core/element/ElementCategory'\n\n// 默认数据\nconst mockData = []\nfor (let i = 0; i < 20; i++) {\n  mockData.push({\n    key: i.toString(),\n    title: `content${i + 1}`,\n    description: `description of content${i + 1}`,\n    disabled: i % 3 < 1,\n  })\n}\n\n@staticMembers({\n  displayName: '穿梭框',\n  category: ElementCategory.FORM,\n  type: 'transfer',\n  icon: 'cluster',\n  props: [{\n    name: 'label',\n    type: 'input',\n    props: {\n      label: '标签文字',\n    },\n    default: '穿梭框',\n  }, {\n    name: 'dataSource',\n    type: 'json',\n    props: {\n      label: '数据源'\n    },\n    default: mockData,\n    dataType: ''\n  }, {\n    name: 'leftLabel',\n    type: 'input',\n    props: {\n      label: '左侧标签',\n    },\n    default: '未选',\n  }, {\n    name: 'rightLabel',\n    type: 'input',\n    props: {\n      label: '右侧标签',\n    },\n    default: '已选',\n  }]\n})\nclass InnerCls extends Element {\n  prepareProps(props: any): any {\n    const { leftLabel, rightLabel, value, ...innerProps } = props\n    return {\n      ...innerProps,\n      titles: [ leftLabel, rightLabel ],\n      targetKeys: value,\n    }\n  }\n\n  @formControl\n  _getComponent() {\n    return Transfer\n  }\n}\n\nexport default InnerCls\n","\nimport { Menu } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '导航菜单',\n  category: ElementCategory.BASIC,\n  type: 'menu',\n  icon: 'menu',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Menu\n  }\n}\n","\nimport { Pagination } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '分页',\n  category: ElementCategory.BASIC,\n  type: 'pagination',\n  icon: 'copy',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Pagination\n  }\n}\n","\nimport { PageHeader } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '页头',\n  category: ElementCategory.BASIC,\n  type: 'page_header',\n  icon: 'radius-upleft',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return PageHeader\n  }\n}\n","/**\n * 导出所有控件类型\n */\nimport PlainText from './PlainText'\nimport Link from './Link'\nimport Input from './Input'\nimport TextArea from './TextArea'\nimport Select from './Select'\nimport TreeSelect from './TreeSelect'\nimport Row from './Row'\nimport Col from './Col'\nimport Form from './Form'\nimport Button from './Button'\nimport Icon from './Icon'\nimport Radio from './Radio'\nimport Checkbox from './Checkbox'\nimport Switch from './Switch'\nimport Cascader from './Cascader'\nimport DatePicker from './DatePicker'\nimport TimePicker from './TimePicker'\nimport Rate from './Rate'\nimport Slider from './Slider'\nimport Transfer from './Transfer'\n// import Affix from './Affix'\n// import Breadcrumb from './Breadcrumb'\n// import Dropdown from './Dropdown'\nimport Menu from './Menu'\nimport Pagination from './Pagination'\nimport PageHeader from './PageHeader'\nimport Steps from './Steps'\n// new-comp-import - 不要删除或修改此行，用于自动生成组件\nimport { ElementContructor } from '../../core/element/IElement'\n\nconst elements: Array<ElementContructor> = [\n  Icon,\n  PlainText,\n  Link,\n  Button,\n  Form,\n  Input,\n  TextArea,\n  Select,\n  TreeSelect,\n  Row,\n  Col,\n  Radio,\n  Checkbox,\n  Switch,\n  Cascader,\n  DatePicker,\n  TimePicker,\n  Slider,\n  Rate,\n  Transfer,\n  // Affix,\n  // Breadcrumb,\n  // Dropdown,\n  Menu,\n  Pagination,\n  PageHeader,\n  Steps,\n  // new-comp-list - 不要删除或修改此行，用于自动生成组件\n]\n\nexport default elements\n","\nimport { Steps } from 'antd'\nimport Element from '../../core/element/Element'\nimport ElementCategory from '../../core/element/ElementCategory'\nimport { staticMembers/*, canBeDroped, canDropTo*/ } from '../../core/decorator'\n\n@staticMembers({\n  displayName: '步骤条',\n  category: ElementCategory.BASIC,\n  type: 'steps',\n  icon: 'arrow-right',\n  // props: [{ // 右侧属性面板中可以编辑的属性列表\n  //   name: 'label',\n  //   type: 'input',\n  //   props: {\n  //     label: '标签'\n  //   },\n  //   default: '输入框',\n  //   dataType: 'string'\n  // }]\n})\n// @canDropTo('row') // 指定可以将此控件拖入的其他控件名称\n// @canBeDroped('!col') // 指定不可拖入此控件的控件名称\nexport default class extends Element {\n  _getComponent() {\n    return Steps\n  }\n}\n","/**\r\n * 元素初始化参数\r\n */\r\nimport {OptionType, CommonPropType} from '../types'\r\nimport { genKey } from './utils'\r\n\r\nexport default class ElementOption {\r\n  key?: string\r\n  type: string\r\n  name?:string\r\n  dataType?: string // 允许绑定的数据类型\r\n  props?: CommonPropType\r\n  children?: Array<ElementOption>\r\n\r\n  constructor(option: OptionType) {\r\n    this.type = option.type\r\n    this.props = option.props\r\n    this.name = option.name\r\n    this.dataType = option.dataType || 'string' // 默认为字符串类型\r\n    this.children = option.children\r\n    // 若没有定义 key，则随机生成\r\n    this.key = option.key ? option.key : genKey()\r\n  }\r\n\r\n  /**\r\n   * 解析外部配置并创建 ElementOption 列表\r\n   */\r\n  static loadOptions(rawOptions: Array<OptionType> | OptionType): Array<ElementOption> {\r\n    if (!rawOptions) {\r\n      return []\r\n    }\r\n\r\n    if (!Array.isArray(rawOptions)) {\r\n      rawOptions = [rawOptions]\r\n    }\r\n\r\n    return rawOptions.reduce((ret: Array<ElementOption>, option: OptionType) => {\r\n      if (option) {\r\n        const elementOption = new ElementOption({\r\n          key: option.key,\r\n          type: option.type,\r\n          name: option.name,\r\n          props: option.props,\r\n          children: option.children ? ElementOption.loadOptions(option.children) : undefined\r\n        })\r\n\r\n        ret.push(elementOption)\r\n      }\r\n\r\n      return ret\r\n    }, [])\r\n  }\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { Icon } from 'antd'\r\nimport {DragSource, DragSourceMonitor, DragSourceConnector, ConnectDragSource} from 'react-dnd'\r\nimport {DragTypes} from '../../configs'\r\nimport styles from './index.module.less'\r\nimport { ElementContructor } from '../../core/element/IElement'\r\nimport ElementOption from '../../core/ElementOption'\r\nimport { DragItemType, PlainObjectType } from '../../types'\r\nimport { Store } from '../../store'\r\nimport { observer, inject } from 'mobx-react'\r\n\r\ninterface ConnectedProps {\r\n  isDragging: boolean,\r\n  connectDragSource: ConnectDragSource\r\n}\r\n\r\ntype DragProps = {\r\n  control: ElementContructor,\r\n  rootStore?: Store,\r\n  // element: Element\r\n}\r\n\r\ntype AllProps = DragProps & ConnectedProps\r\n\r\nconst spec = {\r\n  beginDrag(props: DragProps, monitor: DragSourceMonitor, component: ControlItem): DragItemType {\r\n    const ControlCtor = props.control\r\n    const defaultProps = ControlCtor.props || []\r\n\r\n    const newElem = new ControlCtor(new ElementOption({ // 创建默认元素\r\n      type: ControlCtor.type,\r\n      props: {\r\n        label: ControlCtor.displayName,\r\n        ...defaultProps.reduce((ret: PlainObjectType, item) => {\r\n          if (item.name && item.default) {\r\n            ret[item.name] = item.default\r\n          }\r\n          return ret\r\n        }, {})\r\n      }\r\n    }))\r\n\r\n    if (newElem.canBeDroped()) {\r\n      newElem.children = []\r\n    }\r\n\r\n    return {\r\n      element: newElem\r\n    }\r\n  },\r\n  endDrag(props: DragProps, monitor: DragSourceMonitor, component: ControlItem) {\r\n    const store: Store | undefined = component.props.rootStore\r\n    const droped = monitor.getDropResult()\r\n    if (!droped) {\r\n      store!.clearHover()\r\n      return\r\n    }\r\n\r\n    let { placeholder } = store!\r\n    if (!placeholder) {\r\n      return\r\n    }\r\n\r\n    const from = monitor.getItem().element\r\n\r\n    if (from) {\r\n      store!.moveElement(\r\n        from,\r\n        placeholder\r\n      )\r\n    }\r\n\r\n    store!.clearHover()\r\n  }\r\n}\r\n\r\nconst connect = function(connect: DragSourceConnector, monitor: DragSourceMonitor): ConnectedProps {\r\n  return {\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging()\r\n  }\r\n}\r\n\r\nclass ControlItem extends React.Component<AllProps> {\r\n  render(): ReactElement<{props: AllProps}> | null {\r\n    const { control, connectDragSource } = this.props\r\n\r\n    return connectDragSource(\r\n      <div className={styles.item}>\r\n        <Icon type={control.icon} />\r\n        <span className={styles.item__title}>{ control.displayName}</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DragSource(DragTypes.CARD, spec, connect)(inject('rootStore')(observer(ControlItem)))\r\n","import React from 'react'\r\nimport elements from '../../controls/antd'\r\nimport ElementCategory, { categoryList } from '../../core/element/ElementCategory'\r\nimport styles from './index.module.less'\r\nimport { ElementContructor } from '../../core/element/IElement'\r\nimport ControlItem from './ControlItem'\r\n\r\nexport default class LeftPanel extends React.Component {\r\n  render() {\r\n    const categoryElements: Map<ElementCategory, [ElementContructor]> = elements.reduce((ret: Map<ElementCategory, [ElementContructor]>, item) => {\r\n      const category = item.category\r\n\r\n      if (ret.has(category)) {\r\n        ret.get(category)!.push(item)\r\n      } else {\r\n        ret.set(category, [item])\r\n      }\r\n\r\n      return ret\r\n    }, new Map())\r\n\r\n    return (\r\n      <div className={styles.panel}>\r\n        {\r\n          categoryList.map(cat => (\r\n            <div key={cat.title} className={styles.categroy}>\r\n              <div className={styles.categroy__title}>{cat.title}</div>\r\n              <div className={styles.categroy__body}>\r\n                {\r\n                  categoryElements.get(cat.type) ? categoryElements.get(cat.type)!.map(elem => (\r\n                    <ControlItem key={elem.displayName} control={elem} />\r\n                  )) : null\r\n                }\r\n              </div>\r\n            </div>\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ControlList from './ControlList'\r\nimport styles from './index.module.less'\r\n\r\nexport default class LeftPanel extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.panel}>\r\n        \r\n        <ControlList></ControlList>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { ReactElement, MemoExoticComponent } from 'react'\r\nimport { Form } from 'antd'\r\nimport Element from '../../../core/element/Element'\r\nimport IElement, { RenderOption } from '../../../core/element/IElement'\r\nimport ElementControl from '../../../core/element/ElementControl'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../../store'\r\nimport { PROP_NAME_PREFIX } from '../../../configs'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass PropComponent extends React.Component<{\r\n  elements?: IElement[],\r\n  renderOptoin?: RenderOption,\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const renderProps = this.props.renderOptoin || {}\r\n    const { elements, rootStore } = this.props\r\n    const valueData = rootStore!.selectedElement!.props\r\n\r\n    // console.log('prop elements', elements)\r\n\r\n    return (\r\n      <Form labelCol={{span: 8}} wrapperCol={{span: 16}}>\r\n        {\r\n          elements && elements!.map(item => (\r\n            <ElementControl\r\n              key={item.key}\r\n              element={item}\r\n              renderOption={{\r\n                withBox: false, withLabel: true, props: {\r\n                  name: `${PROP_NAME_PREFIX}${item.name}`,\r\n                  value: valueData && item.name && (item.name in valueData) ? valueData[item.name] : ''\r\n                }\r\n              }}\r\n              {...renderProps}\r\n            />\r\n          ))\r\n        }\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nlet MemoedComp: MemoExoticComponent<typeof PropComponent> | null = null\r\n\r\nclass PropElement extends Element {\r\n  render(renderOption?:RenderOption): ReactElement {\r\n    let Comp = this.getComponent()\r\n    if (!MemoedComp) {\r\n      Comp = React.memo(Comp)\r\n    }\r\n\r\n    return (\r\n      <Comp renderOptoin={renderOption} elements={this.children} />\r\n    )\r\n  }\r\n\r\n  _getComponent(): typeof PropComponent {\r\n    return PropComponent\r\n  }\r\n}\r\n\r\nexport default PropElement\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../../store'\r\nimport PropElement from './PropElement'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass ControlProps extends React.Component<{\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const selectedElement = this.props.rootStore!.selectedElement\r\n\r\n    const propElement = new PropElement({\r\n      type: 'prop',\r\n      children: (selectedElement!.defaultProps() || []).slice().filter(item => item.type !== 'null')\r\n    })\r\n\r\n    return propElement.render()\r\n  }\r\n}\r\n\r\nexport default ControlProps\r\n","/**\r\n * define style render props,\r\n * follow json-schema\r\n */\r\nconst STYLE_DEFS: any = {\r\n  name: 'styles',\r\n  propsSchema: {\r\n    type: 'object',\r\n    properties: {\r\n      colors: {\r\n        title: 'Colors',\r\n        description: '颜色',\r\n        type: 'object',\r\n        properties: {\r\n          color: {\r\n            title: '前景色',\r\n            type: 'string',\r\n          },\r\n          backgroundColor: {\r\n            title: '背景色',\r\n            type: 'string',\r\n          },\r\n          borderColor: {\r\n            title: '边框颜色',\r\n            type: 'string',\r\n          }\r\n        }\r\n      },\r\n      texts: {\r\n        title: 'Text',\r\n        description: '文本',\r\n        type: 'object',\r\n        properties: {\r\n          fontFamily: {\r\n            title: '字体',\r\n            type: 'string',\r\n          },\r\n          fontSize: {\r\n            title: '字体大小',\r\n            type: 'string',\r\n          },\r\n          fontStyle: {\r\n            title: '字体样式',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'italic', 'oblique', 'initial', 'inherit']\r\n          },\r\n          fontWeight: {\r\n            title: '字体粗细',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'bold', 'bolder', 'lighter']\r\n          },\r\n          textAlign: {\r\n            title: '左右对齐',\r\n            type: 'string',\r\n            enum: ['', 'left', 'center', 'right'],\r\n          },\r\n          whiteSpace: {\r\n            title: '空白换行',\r\n            type: 'string',\r\n            enum: ['', 'normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap']\r\n          },\r\n          textDecorationLine: {\r\n            title: '线条',\r\n            type: 'string',\r\n            enum: ['', 'none', 'underline', 'overline', 'line-through']\r\n          },\r\n          textDecorationColor: {\r\n            title: '线条颜色',\r\n            type: 'string',\r\n          },\r\n          textDecorationStyle: {\r\n            title: '线条风格',\r\n            type: 'string',\r\n            enum: ['', 'solid', 'double', 'dotted', 'dashed', 'wavy']\r\n          },\r\n        }\r\n      },\r\n      margins: {\r\n        title: 'Margins',\r\n        description: '外边距',\r\n        type: 'object',\r\n        properties: {\r\n          marginTop: {\r\n            title: '上边距',\r\n            type: 'string'\r\n          },\r\n          marginBottom: {\r\n            title: '下边距',\r\n            type: 'string'\r\n          },\r\n          marginLeft: {\r\n            title: '左边距',\r\n            type: 'string'\r\n          },\r\n          marginRight: {\r\n            title: '右边距',\r\n            type: 'string'\r\n          }\r\n        }\r\n      },\r\n      paddings: {\r\n        title: 'Paddings',\r\n        description: '内边距',\r\n        type: 'object',\r\n        properties: {\r\n          paddingTop: {\r\n            title: '上边距',\r\n            type: 'string'\r\n          },\r\n          paddingBottom: {\r\n            title: '下边距',\r\n            type: 'string'\r\n          },\r\n          paddingLeft: {\r\n            title: '左边距',\r\n            type: 'string'\r\n          },\r\n          paddingRight: {\r\n            title: '右边距',\r\n            type: 'string'\r\n          }\r\n        }\r\n      },\r\n      borders: {\r\n        title: 'Border',\r\n        description: '边框',\r\n        type: 'object',\r\n        properties: {\r\n          borderWidth: {\r\n            title: '宽度',\r\n            type: 'string',\r\n          },\r\n          borderColor: {\r\n            title: '颜色',\r\n            type: 'string',\r\n          },\r\n          borderStyle: {\r\n            title: '样式',\r\n            type: 'string',\r\n            enum: ['', 'solid', 'none', 'hidden', 'dotted', 'dashed', 'double', 'groove', 'ridge', 'inset', 'outset']\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  uiSchema: {\r\n    colors: {\r\n      color: {\r\n        'ui:widget': 'color'\r\n      },\r\n      backgroundColor: {\r\n        'ui:widget': 'color'\r\n      },\r\n      borderColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    },\r\n    texts: {\r\n      textAlign: {\r\n        'ui:widget': 'select'\r\n      },\r\n      textDecorationColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    },\r\n    borders: {\r\n      borderColor: {\r\n        'ui:widget': 'color'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default () => STYLE_DEFS\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { toJS } from 'mobx'\r\nimport FormRender from 'form-render/lib/antd'\r\nimport styleList from './styleList'\r\n\r\nconst nestedPropNames = ['colors', 'texts', 'margins', 'paddings', 'borders']\r\n\r\nconst styleConfig = styleList()\r\n\r\nconst reversedProps = (function() {\r\n  const props = styleConfig.propsSchema.properties\r\n\r\n  return nestedPropNames.reduce((ret, item) => {\r\n    Object.keys(props[item].properties).forEach(name => {\r\n      ret[name] = item\r\n    })\r\n\r\n    return ret\r\n  }, {})\r\n})()\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass StylePanel extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      formData: {}\r\n    }\r\n  }\r\n\r\n  flatternStyle = (style) => {\r\n    const flattern = {}\r\n\r\n    for(let name in style) {\r\n      if (nestedPropNames.includes(name)) {\r\n        Object.keys(style[name]).forEach(item => {\r\n          if (style[name][item] === '') {\r\n            flattern[item] = undefined\r\n          } else {\r\n            flattern[item] = style[name][item]\r\n          }\r\n        })\r\n      } else {\r\n        flattern[name] = style[name]\r\n      }\r\n    }\r\n\r\n    return flattern\r\n  }\r\n\r\n  nestStyle = (style) => {\r\n    const nested = {}\r\n    for (let key in style) {\r\n      const parentKey = reversedProps[key]\r\n      if (parentKey) {\r\n        nested[parentKey] = nested[parentKey] || {}\r\n        nested[parentKey][key] = style[key]\r\n      } else {\r\n        nested[key] = style[key]\r\n      }\r\n    }\r\n\r\n    return nested\r\n  }\r\n\r\n  onChange = (e) => {\r\n    this.props.rootStore.handleStyleChange(this.flatternStyle(e))\r\n  }\r\n\r\n  onValidate = () => {}\r\n\r\n  render() {\r\n    const { propsSchema, uiSchema } = styleList()\r\n    const { selectedElement } = this.props.rootStore\r\n\r\n    if (!selectedElement) {\r\n      return null\r\n    }\r\n\r\n    const elem = toJS(selectedElement)\r\n    const style = this.nestStyle(elem.props ? elem.props.style : {})\r\n\r\n    return (\r\n      <FormRender\r\n        propsSchema={propsSchema}\r\n        uiSchema={uiSchema}\r\n        formData={style}\r\n        onChange={this.onChange}\r\n        onValidate={this.onValidate}\r\n        displayType=\"row\"\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default StylePanel\r\n","import React, { ReactElement } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Form } from 'antd'\r\nimport Element from '../../../core/element/Element'\r\nimport { RenderOption } from '../../../core/element/IElement'\r\nimport { Store } from '../../../store'\r\nimport { DATA_NAME_PREFIX } from '../../../configs'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass DataComponent extends React.Component<{\r\n  children?: Array<ReactElement>,\r\n  renderOptoin?: RenderOption,\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const { rootStore } = this.props\r\n    const selectedElement = rootStore!.selectedElement\r\n    const name = selectedElement.name || ''\r\n\r\n    const { children } = this.props\r\n\r\n    return (\r\n      <Form labelCol={{span: 8}} wrapperCol={{span: 16}}>\r\n        {\r\n          children!.map(child => React.cloneElement(child, {\r\n            name: `${DATA_NAME_PREFIX}${child.props.element.name}`,\r\n            value: name\r\n          }))\r\n        }\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nclass DataElement extends Element {\r\n  _getComponent(): typeof DataComponent {\r\n    return DataComponent\r\n  }\r\n\r\n  canBeDroped() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default DataElement\r\n","import React from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport { Store } from '../../../store'\r\nimport DataElement from './DataElement'\r\nimport dataList from './dataList'\r\nimport ElementControl from '../../../core/element/ElementControl'\r\n\r\n@inject('rootStore')\r\n@observer\r\nclass DataPanel extends React.Component<{\r\n  rootStore?: Store\r\n}> {\r\n  render() {\r\n    const dataElement = new DataElement({\r\n      type: 'style-panel',\r\n      children: dataList()\r\n    })\r\n\r\n    return (\r\n      <ElementControl\r\n        element={dataElement}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default DataPanel\r\n","import { CommonPropType } from \"../../../types\"\r\n\r\n/**\r\n * define style render props\r\n */\r\nexport default () => [{\r\n  \"type\": \"input\",\r\n  \"name\": \"modelName\",\r\n  \"props\": {\r\n    \"label\": \"模型名称\",\r\n  }\r\n}] as Array<CommonPropType>\r\n","import React from 'react'\r\nimport { inject } from 'mobx-react'\r\nimport { Tabs } from 'antd'\r\nimport ControlPanel from './basic-panel'\r\nimport StylePanel from './style-panel'\r\nimport DataPanel from './data-panel'\r\nimport styles from './index.module.less'\r\nimport { ElementProvider } from '../../core/element/ElementContext'\r\nimport { RENDER_MODE_DESIGN } from '../../configs'\r\n\r\nconst { TabPane } = Tabs\r\n\r\n@inject('rootStore')\r\nexport default class extends React.Component<any, {\r\n  current: string\r\n}> {\r\n  constructor(props: any) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      current: 'basic'\r\n    }\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange(e: React.ChangeEvent, name: string) {\r\n    const { rootStore } = this.props\r\n    rootStore && rootStore.handleFormChangeEvent(e, name)\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { current } = this.state\r\n\r\n    return (\r\n      <ElementProvider value={{ mode: RENDER_MODE_DESIGN, onChange: this.onChange }}>\r\n        <div className={styles.panel}>\r\n          <div className={styles.title}>控件属性</div>\r\n          <Tabs\r\n            defaultActiveKey={current}\r\n            onChange={index => this.setState({ current: index })}\r\n            size=\"small\"\r\n            tabBarStyle={{padding: '0 8px'}}\r\n            className={styles.panel_tabs}\r\n          >\r\n            <TabPane tab=\"基本属性\" key=\"basic\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <ControlPanel />\r\n              </div>\r\n            </TabPane>\r\n            <TabPane tab=\"样式\" key=\"style\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <StylePanel />\r\n              </div>\r\n            </TabPane>\r\n            <TabPane tab=\"数据\" key=\"data\" style={{padding: '4px 0'}}>\r\n              <div className={styles.controls}>\r\n                <DataPanel />\r\n              </div>\r\n            </TabPane>\r\n          </Tabs>\r\n        </div>\r\n      </ElementProvider>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styles from './index.module.less'\r\n\r\nexport default class Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.header}>Design Panel</div>\r\n    )\r\n  }\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport Element from '../../core/element/Element'\r\nimport { Store } from '../../store'\r\n\r\n@inject('rootStore')\r\n@observer\r\nexport default class CurrentControl extends React.Component<{rootStore?: Store}> {\r\n  render(): ReactElement | null {\r\n    const { rootStore } = this.props\r\n    const selectedElement = rootStore!.selectedElement\r\n\r\n    return selectedElement ? (\r\n      <div>\r\n        <span>{(selectedElement as Element).ctor().displayName}</span>\r\n        <span>&nbsp;|&nbsp;</span>\r\n        {\r\n          selectedElement.name ? (\r\n            <React.Fragment>\r\n              <span>{selectedElement.name}</span>\r\n              <span>&nbsp;|&nbsp;</span>\r\n            </React.Fragment>\r\n          ) : null\r\n        }\r\n        <span>{selectedElement.key}</span>\r\n      </div>\r\n    ) : null\r\n  }\r\n}\r\n","import React from 'react'\r\nimport CurrentControl from './CurrentControl'\r\nimport styles from './index.module.less'\r\n\r\nexport default class Footer extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.footer}>\r\n        <div className={styles.left}></div>\r\n        <div className={styles.right}>\r\n          <CurrentControl />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * 状态变化记录，\r\n * 可基于此模块实现 redo/undo 功能\r\n */\r\nimport deepEqual from 'lodash.isequal'\r\n\r\ntype RecordType<T> = {\r\n  time: Date,\r\n  value: T,\r\n}\r\n\r\n// 默认可记录 100 条操作\r\nconst DEFAULT_SIZE: number = 100\r\n\r\nclass Records<T> {\r\n  // 记录列表\r\n  _recordList: Array<RecordType<T>> = []\r\n  // 当前位置\r\n  _current: number = -1\r\n  // 保存列表最大长度\r\n  size: number = 0\r\n\r\n  constructor({ size = DEFAULT_SIZE } = {}) {\r\n    this.size = size\r\n  }\r\n\r\n  // 增加记录\r\n  add(value: T) {\r\n    // 防止重复添加\r\n    if (!value || deepEqual(this.getValue(), value)) {\r\n      return\r\n    }\r\n\r\n    // 超出限制大小，删除旧的元素\r\n    if (this._recordList.length === this.size) {\r\n      this._recordList.shift()\r\n    }\r\n\r\n    this._recordList.push({\r\n      time: new Date(),\r\n      value\r\n    })\r\n\r\n    // 调整队列\r\n    this._current = this._current + 1\r\n    this._recordList.length = this._current + 1\r\n  }\r\n\r\n  hasPrev(): boolean {\r\n    return this._current > 0\r\n  }\r\n\r\n  hasNext(): boolean {\r\n    return this._current < this._recordList.length - 1\r\n  }\r\n\r\n  prev(): T | undefined {\r\n    if (!this.hasPrev()) {\r\n      return undefined\r\n    }\r\n\r\n    this.setCurrent(this._current - 1)\r\n    return this.getValue()\r\n  }\r\n\r\n  next(): T | undefined {\r\n    if (!this.hasNext()) {\r\n      return undefined\r\n    }\r\n\r\n    this.setCurrent(this._current + 1)\r\n    return this.getValue()\r\n  }\r\n\r\n  // 获取当前记录点的值\r\n  getValue(): T | undefined {\r\n    if (this._current < 0 || this._current >= this._recordList.length) {\r\n      return undefined\r\n    }\r\n\r\n    // console.log('current', this._current)\r\n    return this._recordList[this._current] && this._recordList[this._current].value\r\n  }\r\n\r\n  // 设置当前记录点\r\n  setCurrent(current: number): boolean {\r\n    if (current < 0 || current >= this._recordList.length) {\r\n      return false\r\n    }\r\n\r\n    this._current = current\r\n    return true\r\n  }\r\n}\r\n\r\nexport default Records\r\n","import React from 'react'\r\nimport ELement from './Element'\r\nimport styles from './element.module.less'\r\n\r\nclass PageComponent extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.page}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class PageElement extends ELement {\r\n  public static icon: string = ''\r\n  public static displayName: string = '根节点'\r\n\r\n  _getComponent(): typeof React.Component {\r\n    return PageComponent\r\n  }\r\n\r\n  canDrag(): boolean {\r\n    return false\r\n  }\r\n\r\n  canBeDroped(): boolean {\r\n    return true\r\n  }\r\n\r\n  canRemove(): boolean {\r\n    return false\r\n  }\r\n}\r\n","import { observable, action, IObservableArray, computed, autorun } from 'mobx'\r\nimport ElementOption from '../core/ElementOption'\r\nimport rawOptions from '../mock.json'\r\nimport NullElement from '../core/element/NullElement'\r\nimport factory from '../core/ElementFactory'\r\nimport { ROOT_PAGE, DATA_NAME_PREFIX, PROP_NAME_PREFIX } from '../configs'\r\nimport IElement from '../core/element/IElement'\r\nimport { parseValue, triggerLayoutChange/* , willReflow */ } from '../core/utils'\r\nimport Records from './Records'\r\n// import { ChangeEvent } from 'react'\r\nimport { ValueDataType, DropPlace } from '../types'\r\nimport PageElement from '../core/element/PageElement'\r\n\r\nconst ensureArray = <T>(arr: T | Array<T>): Array<T> => Array.isArray(arr) ? arr : [arr]\r\n\r\n// 构建组件树\r\nconst makeElementTree = (options: Array<ElementOption>, dataValue: ValueDataType, parent?: IElement): Array<IElement> => {\r\n  return options.map(item => {\r\n    const elem = factory.createElement(item, parent)\r\n\r\n    if (item.children && item.children.length > 0) {\r\n      elem.children = makeElementTree(item.children, dataValue, elem)\r\n    }\r\n\r\n    return elem\r\n  })\r\n}\r\n\r\n// 在树结构中查找控件并进行自定义处理\r\ntype CallbackFunc = (item: IElement, index: number, list: Array<IElement>, parent?: IElement) => void\r\n\r\n// 查找控件并做指定的处理\r\nconst findAndHandleElement = (elementKey: string, list: Array<IElement>, callback: CallbackFunc, parent?: IElement) => {\r\n  for (let i = 0, len = list.length; i < len; i++) {\r\n    const item = list[i]\r\n    if (item.key === elementKey) {\r\n      callback && callback(item, i, list, parent)\r\n      return true\r\n    } else {\r\n      if (findAndHandleElement(elementKey, item!.children || [], callback, item)) {\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nconst nullElement = new NullElement()\r\nconst rootElement = new PageElement(new ElementOption({\r\n  type: 'page',\r\n  key: ROOT_PAGE,\r\n}))\r\n\r\nconst propsCache:Map<string, ElementOption | Array<ElementOption>> = new Map()\r\n\r\nexport class Store {\r\n  /**\r\n   * 所有节点定义\r\n   */\r\n  @observable elements: IObservableArray<IElement> = observable([])\r\n  @observable selectedElement: IElement = rootElement\r\n  @observable hoverElement?: IElement = nullElement\r\n  @observable hoverPlace: string = ''\r\n  @observable valueData: ValueDataType = new Map()\r\n  @observable canUndo: boolean = false\r\n  @observable canRedo: boolean = false\r\n  @observable placeholder: DropPlace | null = null\r\n  @observable rootElement: IElement = rootElement\r\n\r\n  records = new Records<Object>()\r\n\r\n  constructor() {\r\n    autorun(() => {\r\n      this.records.add(this.jsonData)\r\n\r\n      this.canUndo = this.records.hasPrev()\r\n      this.canRedo = this.records.hasNext()\r\n\r\n      triggerLayoutChange(120) // wait for animating\r\n    }, {\r\n      delay: 100\r\n    })\r\n  }\r\n\r\n  @computed get selectedProps(): Array<ElementOption> {\r\n    const  { selectedElement } = this\r\n    if (!selectedElement) {\r\n      return []\r\n    }\r\n\r\n    const defaultProps = selectedElement.defaultProps()\r\n    if (!defaultProps) {\r\n      return []\r\n    }\r\n\r\n    const elementKey = selectedElement.key\r\n    if (propsCache.has(elementKey)) {\r\n      return propsCache.get(elementKey) as ElementOption[]\r\n    } else {\r\n      const propsValue = selectedElement.props || {}\r\n\r\n      propsCache.set(elementKey, defaultProps.map(item => {\r\n        const key = `${elementKey}_prop_${item.name}`\r\n\r\n        if (!propsCache.has(key)) {\r\n          const option = new ElementOption({\r\n            type: 'input',\r\n            name: item.name,\r\n            key: key,\r\n            props: {}\r\n          })\r\n\r\n          propsCache.set(key, option)\r\n        }\r\n\r\n        const cached = propsCache.get(key) as ElementOption\r\n        Object.assign(cached.props, {\r\n          name: item.name,\r\n          ...(item.props || {}),\r\n          value: item.name ? propsValue[item.name] : item.default\r\n        })\r\n\r\n        return cached\r\n      }))\r\n    }\r\n\r\n    return propsCache.get(elementKey) as ElementOption[]\r\n  }\r\n\r\n  // 控件列表的 json 表示\r\n  @computed get jsonData() {\r\n    return (this.elements || []).map((item: IElement) => item.jsonData())\r\n  }\r\n\r\n  @action undo() {\r\n    const val = this.records.prev()\r\n    if (val) {\r\n      this.loadElements(val)\r\n    }\r\n  }\r\n\r\n  @action redo() {\r\n    const val = this.records.next()\r\n    if (val) {\r\n      this.loadElements(val)\r\n    }\r\n  }\r\n\r\n  // 加载配置并创建组件\r\n  @action loadElements(rawJson?: any) {\r\n    const options = ensureArray<ElementOption>(ElementOption.loadOptions(rawJson || rawOptions))\r\n    this.elements.replace(makeElementTree(options, this.valueData))\r\n    this.rootElement.children = this.elements\r\n    this.elements.map(item => item.parent = this.rootElement)\r\n\r\n    this.reselectElement()\r\n  }\r\n\r\n  // 列表发生变化后重新选中元素\r\n  reselectElement() {\r\n    if (this.selectedElement !== nullElement) {\r\n      if (!findAndHandleElement(this.selectedElement.key, this.elements, (item) => {\r\n        this.selectElement(item)\r\n      }, this.rootElement)) {\r\n        this.selectElement(rootElement)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 当前设计器中选择元素\r\n  @action selectElement(element: IElement) {\r\n    this.selectedElement = element\r\n  }\r\n\r\n  // 移除元素\r\n  @action removeElement(element: IElement) {\r\n    const removeKey = element.key\r\n    findAndHandleElement(removeKey, this.elements, (item: IElement, index, list) => {\r\n      list.splice(index, 1)\r\n\r\n      if(removeKey === this.selectedElement.key) {\r\n        this.selectElement(rootElement)\r\n      }\r\n    }, this.rootElement)\r\n  }\r\n\r\n  @action cloneElement(element: IElement) {\r\n    console.log('clone it')\r\n  }\r\n\r\n  @action clearHover() {\r\n    this.setPlaceHolder(null)\r\n  }\r\n\r\n  // 移动控件位置\r\n  @action moveElement(source: IElement, dropPlace: DropPlace) {\r\n    const { container, index } = dropPlace\r\n\r\n    if (container && source) {\r\n      const len = container.children ? container.children.length : 0\r\n      if (container.children && index < len && container.children[index].key === source.key) {\r\n        return\r\n      }\r\n\r\n      // 记录待删除的位置，添加之后进行删除操作\r\n      let listToDelete: Array<IElement> = []\r\n\r\n      findAndHandleElement(source.key, this.elements, (_, pos, list, parent) => {\r\n        // find same place to remove and insert\r\n        // list.splice(pos, 1)\r\n        listToDelete = list\r\n        list[pos] = nullElement\r\n      }, this.rootElement)\r\n\r\n      if (! container.children) {\r\n        container.children = []\r\n      }\r\n\r\n      source.parent = container\r\n      container.children.splice(index, 0, source)\r\n\r\n      if (listToDelete) {\r\n        listToDelete.forEach((item, index) => {\r\n          if (item.type === 'null') {\r\n            listToDelete.splice(index, 1)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  @action handleStyleChange(e: any) {\r\n    const { selectedElement } = this\r\n    if (!selectedElement) {\r\n      return\r\n    }\r\n\r\n    if (!selectedElement.props) {\r\n      selectedElement.props = {}\r\n    }\r\n\r\n    selectedElement.props.style = e\r\n  }\r\n\r\n  /**\r\n   * 控件属性面板\r\n   */\r\n  @action handleFormChangeEvent(e: any, name: string) {\r\n    console.debug('handleFormChangeEvent', e, name, e.target ? e.target.value : e)\r\n    const { selectedElement } = this\r\n    if (!selectedElement || !name) {\r\n      return\r\n    }\r\n\r\n    if (!selectedElement.props) {\r\n      selectedElement.props = {}\r\n    }\r\n\r\n    const value = e.target ? e.target.value : e\r\n\r\n    if (name.startsWith(DATA_NAME_PREFIX)) {\r\n      selectedElement.name = value\r\n    } else if (name.startsWith(PROP_NAME_PREFIX)) {\r\n      name = name.replace(PROP_NAME_PREFIX, '')\r\n      selectedElement.props = {\r\n        ...selectedElement.props,\r\n        [name]: parseValue(value, selectedElement.getPropType(name))\r\n      }\r\n    } else {\r\n      \r\n    }\r\n  }\r\n\r\n  // 设置插入占位符\r\n  @action setPlaceHolder(placeholder: DropPlace | null) {\r\n    this.placeholder = placeholder\r\n  }\r\n}\r\n","import React, { ReactNode } from 'react'\r\nimport { Icon } from 'antd'\r\nimport classnames from 'classnames'\r\nimport { triggerLayoutChange } from '../../core/utils'\r\nimport styles from './layout.module.less'\r\n\r\nexport default class Layout extends React.Component<{\r\n  header?: ReactNode,\r\n  left?: ReactNode,\r\n  center?: ReactNode,\r\n  right?: ReactNode,\r\n  footer?: ReactNode\r\n}, { leftPanel: boolean, rightPanel: boolean }> {\r\n  constructor(props: any) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      leftPanel: true,\r\n      rightPanel: true\r\n    }\r\n  }\r\n\r\n  toggleLeft = () => {\r\n    this.setState({\r\n      leftPanel: !this.state.leftPanel\r\n    }, () => triggerLayoutChange(100))\r\n  }\r\n\r\n  toggleRight = () => {\r\n    this.setState({\r\n      rightPanel: !this.state.rightPanel\r\n    }, () => triggerLayoutChange(100))\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      header,\r\n      left,\r\n      center,\r\n      right,\r\n      footer,\r\n    } = this.props\r\n\r\n    const { leftPanel, rightPanel } = this.state\r\n\r\n    const layoutCls = classnames({\r\n      [styles.layout]: true,\r\n      [styles.hide_left]: !leftPanel,\r\n      [styles.hide_right]: !rightPanel\r\n    })\r\n\r\n    return (\r\n      <div className={layoutCls}>\r\n        <div className={styles.header}>\r\n          {header}\r\n        </div>\r\n        <div className={styles.content}>\r\n          <div className={styles.left}>\r\n            {left}\r\n            <Icon\r\n              type={leftPanel ? \"double-left\" : \"double-right\"}\r\n              className={styles.collapseLeft}\r\n              onClick={this.toggleLeft}\r\n            />\r\n          </div>\r\n          <div className={styles.center}>\r\n            {center}\r\n          </div>\r\n          <div className={styles.right}>\r\n            {right}\r\n            <Icon\r\n              type={rightPanel ? \"double-right\" : \"double-left\"}\r\n              className={styles.collapseRight}\r\n              onClick={this.toggleRight}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.footer}>\r\n          {footer}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\nimport { DndProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { Provider } from 'mobx-react'\nimport Center from '../../components/center'\nimport LeftPanel from '../../components/left-panel'\nimport RightPanel from '../../components/right-panel'\nimport Header from '../../components/header'\nimport Footer from '../../components/footer'\nimport { Store } from '../../store'\nimport Layout from '../../components/layout'\n\nconst rootStore = new Store()\n\nclass App extends React.Component<any, {user: string}> {\n  componentDidMount() {\n    rootStore.loadElements()\n  }\n\n  render() {\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <Provider rootStore={rootStore}>\n          <Layout\n            header={\n              <Header />\n            }\n            left={\n              <LeftPanel />\n            }\n            right={\n              <RightPanel />\n            }\n            center={\n              <Center />\n            }\n            footer={\n              <Footer />\n            }\n          >\n          </Layout>\n        </Provider>\n      </DndProvider>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport App from './pages/app/App';\nimport elementTypes from './controls/antd'\nimport factory from './core/ElementFactory'\nimport * as serviceWorker from './serviceWorker'\nimport './index.less'\n\n// 初始化组件列表\nfactory.registerElement(elementTypes)\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"key\":\"index_key__Xy9AU\",\"string\":\"index_string__D8fDw\",\"boolean\":\"index_boolean__1AJRp\",\"number\":\"index_number__1sDNj\",\"null\":\"index_null__2__up\"};"],"sourceRoot":""}